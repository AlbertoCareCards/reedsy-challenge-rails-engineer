  [1m[35m (321.1ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (324.6ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (11.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-13 07:52:57.246771"], ["updated_at", "2022-01-13 07:52:57.246771"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (3.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for 192.168.48.1 at 2022-01-13 08:03:35 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /usr/local/bundle/gems/railties-7.0.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /usr/local/bundle/gems/railties-7.0.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 10.8ms | Allocations: 598)
Completed 200 OK in 132ms (Views: 54.9ms | ActiveRecord: 0.0ms | Allocations: 4853)


  [1m[35m (1.0ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (33.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "price_cents" integer, "code" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/API/V1/products" for 192.168.80.1 at 2022-01-13 16:44:41 +0000
  
ArgumentError ('API/products' is not a supported controller name. This can lead to potential routing problems. See https://guides.rubyonrails.org/routing.html#specifying-a-controller-to-use):
  
config/routes.rb:4:in `block (2 levels) in <main>'
config/routes.rb:2:in `block in <main>'
config/routes.rb:1:in `<main>'
Started GET "/favicon.ico" for 192.168.80.1 at 2022-01-13 16:44:43 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/API/V1/products" for 192.168.80.1 at 2022-01-13 16:45:08 +0000
  
ArgumentError ('API/V1/products' is not a supported controller name. This can lead to potential routing problems. See https://guides.rubyonrails.org/routing.html#specifying-a-controller-to-use):
  
config/routes.rb:5:in `block (3 levels) in <main>'
config/routes.rb:3:in `block (2 levels) in <main>'
config/routes.rb:2:in `block in <main>'
config/routes.rb:1:in `<main>'
Started GET "/API/V1/products" for 192.168.80.1 at 2022-01-13 16:45:13 +0000
  
ActionController::RoutingError (No route matches [GET] "/API/V1/products"):
  
Started GET "/API/V1/products" for 192.168.80.1 at 2022-01-13 16:53:47 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/API/V1/products"):
  
Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 16:53:53 +0000
  
Zeitwerk::NameError (expected file /home/app/reedsy-challenge/app/controllers/concerns/localizable.rb to define constant Localizable, but didn't):
  
app/controllers/application_controller.rb:2:in `<class:ApplicationController>'
app/controllers/application_controller.rb:1:in `<main>'
app/controllers/api/v1/products_controller.rb:2:in `<main>'
Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 16:54:05 +0000
  
NameError (uninitialized constant Localizable):
  
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:148:in `const_get'
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:148:in `block (2 levels) in unload'
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:146:in `each'
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:146:in `block in unload'
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:125:in `synchronize'
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:125:in `unload'
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:194:in `reload'
activesupport (7.0.1) lib/active_support/dependencies.rb:79:in `block in clear'
activesupport (7.0.1) lib/active_support/concurrency/share_lock.rb:151:in `exclusive'
activesupport (7.0.1) lib/active_support/dependencies/interlock.rb:17:in `unloading'
activesupport (7.0.1) lib/active_support/dependencies.rb:32:in `unload_interlock'
activesupport (7.0.1) lib/active_support/dependencies.rb:77:in `clear'
railties (7.0.1) lib/rails/application/finisher.rb:179:in `block (2 levels) in <module:Finisher>'
activesupport (7.0.1) lib/active_support/file_update_checker.rb:83:in `execute'
railties (7.0.1) lib/rails/application/finisher.rb:208:in `block (3 levels) in <module:Finisher>'
activesupport (7.0.1) lib/active_support/callbacks.rb:107:in `run_callbacks'
activesupport (7.0.1) lib/active_support/reloader.rb:120:in `class_unload!'
railties (7.0.1) lib/rails/application/finisher.rb:207:in `block (2 levels) in <module:Finisher>'
activesupport (7.0.1) lib/active_support/callbacks.rb:445:in `instance_exec'
activesupport (7.0.1) lib/active_support/callbacks.rb:445:in `block in make_lambda'
activesupport (7.0.1) lib/active_support/callbacks.rb:199:in `block (2 levels) in halting'
activesupport (7.0.1) lib/active_support/callbacks.rb:687:in `block (2 levels) in default_terminator'
activesupport (7.0.1) lib/active_support/callbacks.rb:686:in `catch'
activesupport (7.0.1) lib/active_support/callbacks.rb:686:in `block in default_terminator'
activesupport (7.0.1) lib/active_support/callbacks.rb:200:in `block in halting'
activesupport (7.0.1) lib/active_support/callbacks.rb:595:in `block in invoke_before'
activesupport (7.0.1) lib/active_support/callbacks.rb:595:in `each'
activesupport (7.0.1) lib/active_support/callbacks.rb:595:in `invoke_before'
activesupport (7.0.1) lib/active_support/callbacks.rb:106:in `run_callbacks'
activesupport (7.0.1) lib/active_support/execution_wrapper.rb:133:in `run'
activesupport (7.0.1) lib/active_support/execution_wrapper.rb:129:in `run!'
activesupport (7.0.1) lib/active_support/reloader.rb:114:in `run!'
activesupport (7.0.1) lib/active_support/execution_wrapper.rb:74:in `block in run!'
<internal:kernel>:90:in `tap'
activesupport (7.0.1) lib/active_support/execution_wrapper.rb:71:in `run!'
activesupport (7.0.1) lib/active_support/reloader.rb:63:in `run!'
actionpack (7.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (7.0.1) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.1) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.1) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.1) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.1) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/server_timing.rb:20:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.1) lib/rails/engine.rb:530:in `call'
puma (5.5.2) lib/puma/configuration.rb:249:in `call'
puma (5.5.2) lib/puma/request.rb:77:in `block in handle_request'
puma (5.5.2) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.5.2) lib/puma/request.rb:76:in `handle_request'
puma (5.5.2) lib/puma/server.rb:447:in `process_client'
puma (5.5.2) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 16:54:24 +0000
  
NameError (uninitialized constant Api):
  
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:148:in `const_get'
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:148:in `block (2 levels) in unload'
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:146:in `each'
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:146:in `block in unload'
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:125:in `synchronize'
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:125:in `unload'
zeitwerk (2.5.3) lib/zeitwerk/loader.rb:194:in `reload'
activesupport (7.0.1) lib/active_support/dependencies.rb:79:in `block in clear'
activesupport (7.0.1) lib/active_support/concurrency/share_lock.rb:151:in `exclusive'
activesupport (7.0.1) lib/active_support/dependencies/interlock.rb:17:in `unloading'
activesupport (7.0.1) lib/active_support/dependencies.rb:32:in `unload_interlock'
activesupport (7.0.1) lib/active_support/dependencies.rb:77:in `clear'
railties (7.0.1) lib/rails/application/finisher.rb:179:in `block (2 levels) in <module:Finisher>'
activesupport (7.0.1) lib/active_support/file_update_checker.rb:83:in `execute'
railties (7.0.1) lib/rails/application/finisher.rb:208:in `block (3 levels) in <module:Finisher>'
activesupport (7.0.1) lib/active_support/callbacks.rb:107:in `run_callbacks'
activesupport (7.0.1) lib/active_support/reloader.rb:120:in `class_unload!'
railties (7.0.1) lib/rails/application/finisher.rb:207:in `block (2 levels) in <module:Finisher>'
activesupport (7.0.1) lib/active_support/callbacks.rb:445:in `instance_exec'
activesupport (7.0.1) lib/active_support/callbacks.rb:445:in `block in make_lambda'
activesupport (7.0.1) lib/active_support/callbacks.rb:199:in `block (2 levels) in halting'
activesupport (7.0.1) lib/active_support/callbacks.rb:687:in `block (2 levels) in default_terminator'
activesupport (7.0.1) lib/active_support/callbacks.rb:686:in `catch'
activesupport (7.0.1) lib/active_support/callbacks.rb:686:in `block in default_terminator'
activesupport (7.0.1) lib/active_support/callbacks.rb:200:in `block in halting'
activesupport (7.0.1) lib/active_support/callbacks.rb:595:in `block in invoke_before'
activesupport (7.0.1) lib/active_support/callbacks.rb:595:in `each'
activesupport (7.0.1) lib/active_support/callbacks.rb:595:in `invoke_before'
activesupport (7.0.1) lib/active_support/callbacks.rb:106:in `run_callbacks'
activesupport (7.0.1) lib/active_support/execution_wrapper.rb:133:in `run'
activesupport (7.0.1) lib/active_support/execution_wrapper.rb:129:in `run!'
activesupport (7.0.1) lib/active_support/reloader.rb:114:in `run!'
activesupport (7.0.1) lib/active_support/execution_wrapper.rb:74:in `block in run!'
<internal:kernel>:90:in `tap'
activesupport (7.0.1) lib/active_support/execution_wrapper.rb:71:in `run!'
activesupport (7.0.1) lib/active_support/reloader.rb:63:in `run!'
actionpack (7.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (7.0.1) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.1) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.1) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.1) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.1) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/server_timing.rb:20:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.1) lib/rails/engine.rb:530:in `call'
puma (5.5.2) lib/puma/configuration.rb:249:in `call'
puma (5.5.2) lib/puma/request.rb:77:in `block in handle_request'
puma (5.5.2) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.5.2) lib/puma/request.rb:76:in `handle_request'
puma (5.5.2) lib/puma/server.rb:447:in `process_client'
puma (5.5.2) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 16:55:52 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
NoMethodError (undefined method `protect_from_forgery' for ApplicationController:Class):
  
app/controllers/application_controller.rb:6:in `<class:ApplicationController>'
app/controllers/application_controller.rb:1:in `<main>'
app/controllers/api/v1/products_controller.rb:2:in `<main>'
Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 16:56:03 +0000
Processing by Api::V1::ProductsController#index as JSON
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.0ms | Allocations: 1899)


  
NoMethodError (undefined method `set_locale' for #<Api::V1::ProductsController:0x0000000000ccb0>):
  
activesupport (7.0.1) lib/active_support/callbacks.rb:400:in `block in make_lambda'
activesupport (7.0.1) lib/active_support/callbacks.rb:199:in `block (2 levels) in halting'
actionpack (7.0.1) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.0.1) lib/active_support/callbacks.rb:200:in `block in halting'
activesupport (7.0.1) lib/active_support/callbacks.rb:595:in `block in invoke_before'
activesupport (7.0.1) lib/active_support/callbacks.rb:595:in `each'
activesupport (7.0.1) lib/active_support/callbacks.rb:595:in `invoke_before'
activesupport (7.0.1) lib/active_support/callbacks.rb:106:in `run_callbacks'
actionpack (7.0.1) lib/abstract_controller/callbacks.rb:233:in `process_action'
actionpack (7.0.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (7.0.1) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'
activesupport (7.0.1) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.0.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (7.0.1) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.0.1) lib/action_controller/metal/instrumentation.rb:66:in `process_action'
actionpack (7.0.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (7.0.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (7.0.1) lib/abstract_controller/base.rb:151:in `process'
actionpack (7.0.1) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.1) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.1) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.1) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.1) lib/action_dispatch/routing/route_set.rb:850:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
activerecord (7.0.1) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.1) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (7.0.1) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.1) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.1) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.1) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.1) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/server_timing.rb:20:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.1) lib/rails/engine.rb:530:in `call'
puma (5.5.2) lib/puma/configuration.rb:249:in `call'
puma (5.5.2) lib/puma/request.rb:77:in `block in handle_request'
puma (5.5.2) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.5.2) lib/puma/request.rb:76:in `handle_request'
puma (5.5.2) lib/puma/server.rb:447:in `process_client'
puma (5.5.2) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 16:56:05 +0000
Processing by Api::V1::ProductsController#index as JSON
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms | Allocations: 1792)


  
NoMethodError (undefined method `set_locale' for #<Api::V1::ProductsController:0x0000000000cda0>):
  
activesupport (7.0.1) lib/active_support/callbacks.rb:400:in `block in make_lambda'
activesupport (7.0.1) lib/active_support/callbacks.rb:199:in `block (2 levels) in halting'
actionpack (7.0.1) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.0.1) lib/active_support/callbacks.rb:200:in `block in halting'
activesupport (7.0.1) lib/active_support/callbacks.rb:595:in `block in invoke_before'
activesupport (7.0.1) lib/active_support/callbacks.rb:595:in `each'
activesupport (7.0.1) lib/active_support/callbacks.rb:595:in `invoke_before'
activesupport (7.0.1) lib/active_support/callbacks.rb:106:in `run_callbacks'
actionpack (7.0.1) lib/abstract_controller/callbacks.rb:233:in `process_action'
actionpack (7.0.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (7.0.1) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'
activesupport (7.0.1) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.0.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (7.0.1) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.0.1) lib/action_controller/metal/instrumentation.rb:66:in `process_action'
actionpack (7.0.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (7.0.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (7.0.1) lib/abstract_controller/base.rb:151:in `process'
actionpack (7.0.1) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.1) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.1) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.1) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.1) lib/action_dispatch/routing/route_set.rb:850:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
activerecord (7.0.1) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.1) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (7.0.1) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.1) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.1) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.1) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.1) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/server_timing.rb:20:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.1) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.1) lib/rails/engine.rb:530:in `call'
puma (5.5.2) lib/puma/configuration.rb:249:in `call'
puma (5.5.2) lib/puma/request.rb:77:in `block in handle_request'
puma (5.5.2) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.5.2) lib/puma/request.rb:76:in `handle_request'
puma (5.5.2) lib/puma/server.rb:447:in `process_client'
puma (5.5.2) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 16:56:16 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 65ms (Views: 6.0ms | ActiveRecord: 1.6ms | Allocations: 2741)


  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "products" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "products";
INSERT INTO "products" ("id", "name", "price_cents", "code", "created_at", "updated_at") VALUES (177050648, 'Reedsy Mug', 600, 0, '2022-01-13 16:56:40.463682', '2022-01-13 16:56:40.463682'), (167572108, 'MyString', 1500, 1, '2022-01-13 16:56:40.463682', '2022-01-13 16:56:40.463682'), (306220009, 'MyString', 2000, 2, '2022-01-13 16:56:40.463682', '2022-01-13 16:56:40.463682')[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "products" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 16:56:43 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 44ms (Views: 26.9ms | ActiveRecord: 16.4ms | Allocations: 4615)


Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 16:56:47 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 1.5ms | Allocations: 1086)


Started GET "/api/v1/products?pagination[page]=1&pagination[page_size]=1" for 192.168.80.1 at 2022-01-13 16:58:02 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"1", "page_size"=>"1"}}
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 10ms (Views: 7.9ms | ActiveRecord: 1.2ms | Allocations: 975)


Started GET "/api/v1/products?pagination[page]=1&pagination[page_size]=1" for 192.168.80.1 at 2022-01-13 16:58:41 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"1", "page_size"=>"1"}}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Completed 500 Internal Server Error in 37ms (ActiveRecord: 0.0ms | Allocations: 6051)


  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  
NoMethodError (undefined method `page' for #<ActiveRecord::Relation [#<Product id: 177050648, name: "Reedsy Mug", price_cents: 600, code: "mug", created_at: "2022-01-13 16:56:40.463682000 +0000", updated_at: "2022-01-13 16:56:40.463682000 +0000">, #<Product id: 167572108, name: "MyString", price_cents: 1500, code: "tshirt", created_at: "2022-01-13 16:56:40.463682000 +0000", updated_at: "2022-01-13 16:56:40.463682000 +0000">, #<Product id: 306220009, name: "MyString", price_cents: 2000, code: "hoodie", created_at: "2022-01-13 16:56:40.463682000 +0000", updated_at: "2022-01-13 16:56:40.463682000 +0000">]>):
  
app/controllers/concerns/paginated.rb:23:in `computed_page'
app/controllers/concerns/paginated.rb:12:in `paginated_items'
app/controllers/api/v1/products_controller.rb:7:in `index'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/api/v1/products?pagination[page]=1&pagination[page_size]=1" for 192.168.80.1 at 2022-01-13 16:59:15 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"1", "page_size"=>"1"}}
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.0ms | Allocations: 2914)


  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  
NoMethodError (undefined method `page' for #<ActiveRecord::Relation [#<Product id: 177050648, name: "Reedsy Mug", price_cents: 600, code: "mug", created_at: "2022-01-13 16:56:40.463682000 +0000", updated_at: "2022-01-13 16:56:40.463682000 +0000">, #<Product id: 167572108, name: "MyString", price_cents: 1500, code: "tshirt", created_at: "2022-01-13 16:56:40.463682000 +0000", updated_at: "2022-01-13 16:56:40.463682000 +0000">, #<Product id: 306220009, name: "MyString", price_cents: 2000, code: "hoodie", created_at: "2022-01-13 16:56:40.463682000 +0000", updated_at: "2022-01-13 16:56:40.463682000 +0000">]>):
  
app/controllers/concerns/paginated.rb:23:in `computed_page'
app/controllers/concerns/paginated.rb:12:in `paginated_items'
app/controllers/api/v1/products_controller.rb:7:in `index'
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/api/v1/products?pagination[page]=1&pagination[page_size]=1" for 192.168.80.1 at 2022-01-13 16:59:17 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"1", "page_size"=>"1"}}
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms | Allocations: 2881)


  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  
NoMethodError (undefined method `page' for #<ActiveRecord::Relation [#<Product id: 177050648, name: "Reedsy Mug", price_cents: 600, code: "mug", created_at: "2022-01-13 16:56:40.463682000 +0000", updated_at: "2022-01-13 16:56:40.463682000 +0000">, #<Product id: 167572108, name: "MyString", price_cents: 1500, code: "tshirt", created_at: "2022-01-13 16:56:40.463682000 +0000", updated_at: "2022-01-13 16:56:40.463682000 +0000">, #<Product id: 306220009, name: "MyString", price_cents: 2000, code: "hoodie", created_at: "2022-01-13 16:56:40.463682000 +0000", updated_at: "2022-01-13 16:56:40.463682000 +0000">]>):
  
app/controllers/concerns/paginated.rb:23:in `computed_page'
app/controllers/concerns/paginated.rb:12:in `paginated_items'
app/controllers/api/v1/products_controller.rb:7:in `index'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/api/v1/products?pagination[page]=1&pagination[page_size]=1" for 192.168.80.1 at 2022-01-13 16:59:36 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"1", "page_size"=>"1"}}
  [1m[36mProduct Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:23:in `computed_page'
Completed 500 Internal Server Error in 112ms (ActiveRecord: 5.8ms | Allocations: 6722)


  
ArgumentError (comparison of String with 3 failed):
  
app/controllers/concerns/paginated.rb:25:in `>='
app/controllers/concerns/paginated.rb:25:in `computed_page'
app/controllers/concerns/paginated.rb:12:in `paginated_items'
app/controllers/api/v1/products_controller.rb:7:in `index'
Started GET "/api/v1/products?pagination[page]=1&pagination[page_size]=1" for 192.168.80.1 at 2022-01-13 16:59:50 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"1", "page_size"=>"1"}}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:23:in `computed_page'
Completed 500 Internal Server Error in 122187ms (ActiveRecord: 1.0ms | Allocations: 10479)


  
ArgumentError (comparison of String with 3 failed):
  
app/controllers/concerns/paginated.rb:25:in `>='
app/controllers/concerns/paginated.rb:25:in `computed_page'
app/controllers/concerns/paginated.rb:12:in `paginated_items'
app/controllers/api/v1/products_controller.rb:7:in `index'
Started GET "/api/v1/products?pagination[page]=1&pagination[page_size]=1" for 192.168.80.1 at 2022-01-13 17:01:55 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"1", "page_size"=>"1"}}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 70ms (Views: 30.0ms | ActiveRecord: 14.8ms | Allocations: 7018)


Started GET "/api/v1/products?pagination[page]=2&pagination[page_size]=1" for 192.168.80.1 at 2022-01-13 17:02:03 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"2", "page_size"=>"1"}}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 17ms (Views: 7.8ms | ActiveRecord: 1.8ms | Allocations: 1908)


Started GET "/api/v1/products?pagination[page]=3&pagination[page_size]=1" for 192.168.80.1 at 2022-01-13 17:02:07 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"3", "page_size"=>"1"}}
  [1m[36mProduct Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 2]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 18ms (Views: 5.9ms | ActiveRecord: 2.0ms | Allocations: 1756)


Started GET "/api/v1/products?pagination[page]=3&pagination[page_size]=1" for 192.168.80.1 at 2022-01-13 17:02:17 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"3", "page_size"=>"1"}}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 2]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 11ms (Views: 4.5ms | ActiveRecord: 1.4ms | Allocations: 1740)


Started GET "/api/v1/products?pagination[page]=4&pagination[page_size]=1" for 192.168.80.1 at 2022-01-13 17:02:20 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"4", "page_size"=>"1"}}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 2]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 16ms (Views: 5.2ms | ActiveRecord: 2.3ms | Allocations: 1741)


Started GET "/api/v1/products?pagination[page]=-4&pagination[page_size]=1" for 192.168.80.1 at 2022-01-13 17:02:25 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"-4", "page_size"=>"1"}}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 14ms (Views: 6.4ms | ActiveRecord: 1.6ms | Allocations: 1741)


Started GET "/api/v1/products?pagination[page]=-4&pagination[page_size]=1000" for 192.168.80.1 at 2022-01-13 17:02:32 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"-4", "page_size"=>"1000"}}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 17ms (Views: 7.8ms | ActiveRecord: 1.4ms | Allocations: 1928)


Started GET "/api/v1/products?pagination[page]=-4&pagination[page_size]=1000" for 192.168.80.1 at 2022-01-13 17:03:48 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"-4", "page_size"=>"1000"}}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 12ms (Views: 5.3ms | ActiveRecord: 1.3ms | Allocations: 1928)


Started GET "/api/v1/products?pagination[page]=-4&pagination[page_size]=1000" for 192.168.80.1 at 2022-01-13 20:05:30 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"-4", "page_size"=>"1000"}}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 96ms (Views: 17.3ms | ActiveRecord: 10.7ms | Allocations: 10866)


Started GET "/api/v1/products?pagination[page]=-4&pagination[page_size]=1000" for 192.168.80.1 at 2022-01-13 20:05:33 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"-4", "page_size"=>"1000"}}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 15ms (Views: 5.5ms | ActiveRecord: 1.8ms | Allocations: 2099)


Started GET "/api/v1/products?pagination[page]=-4&pagination[page_size]=1000" for 192.168.80.1 at 2022-01-13 20:05:34 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"-4", "page_size"=>"1000"}}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 15ms (Views: 5.6ms | ActiveRecord: 1.9ms | Allocations: 1943)


Started GET "/api/v1/products?pagination[page]=-4&pagination[page_size]=1000" for 192.168.80.1 at 2022-01-13 20:05:35 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"-4", "page_size"=>"1000"}}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 16ms (Views: 7.7ms | ActiveRecord: 1.8ms | Allocations: 1944)


Started GET "/api/v1/products?pagination[page]=-4&pagination[page_size]=1000" for 192.168.80.1 at 2022-01-13 20:05:35 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"-4", "page_size"=>"1000"}}
  [1m[36mProduct Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 14ms (Views: 5.4ms | ActiveRecord: 2.0ms | Allocations: 1943)


Started GET "/api/v1/products?pagination[page]=-4&pagination[page_size]=1000" for 192.168.80.1 at 2022-01-13 20:05:36 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"-4", "page_size"=>"1000"}}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:25:in `computed_page'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
Completed 200 OK in 14ms (Views: 5.8ms | ActiveRecord: 1.3ms | Allocations: 1928)


Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 20:05:41 +0000
Processing by Api::V1::ProductsController#index as JSON
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 201)


  
ActionController::ParameterMissing (param is missing or the value is empty: pagination):
  
app/controllers/concerns/paginated.rb:37:in `pagination_params'
app/controllers/concerns/paginated.rb:17:in `paginate?'
app/controllers/concerns/paginated.rb:10:in `paginated_items'
app/controllers/api/v1/products_controller.rb:7:in `index'
Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 20:05:44 +0000
Processing by Api::V1::ProductsController#index as JSON
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 138)


  
ActionController::ParameterMissing (param is missing or the value is empty: pagination):
  
app/controllers/concerns/paginated.rb:37:in `pagination_params'
app/controllers/concerns/paginated.rb:17:in `paginate?'
app/controllers/concerns/paginated.rb:10:in `paginated_items'
app/controllers/api/v1/products_controller.rb:7:in `index'
Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 20:06:07 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
Completed 400 Bad Request in 16ms (ActiveRecord: 0.0ms | Allocations: 1922)


  
ActionController::ParameterMissing (param is missing or the value is empty: pagination):
  
app/controllers/concerns/paginated.rb:37:in `pagination_params'
app/controllers/concerns/paginated.rb:17:in `paginate?'
app/controllers/concerns/paginated.rb:10:in `paginated_items'
app/controllers/api/v1/products_controller.rb:7:in `index'
Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 20:07:40 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 8.7ms | Allocations: 335)
Completed 200 OK in 55ms (Views: 42.1ms | ActiveRecord: 0.0ms | Allocations: 3419)


Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 20:07:43 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 0.4ms | Allocations: 32)
Completed 200 OK in 6ms (Views: 5.8ms | ActiveRecord: 0.0ms | Allocations: 253)


Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 20:07:57 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 3.0ms | Allocations: 185)
Completed 200 OK in 20ms (Views: 9.2ms | ActiveRecord: 0.0ms | Allocations: 1977)


Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 20:18:55 +0000
  
SyntaxError (/home/app/reedsy-challenge/app/controllers/concerns/paginated.rb:41: syntax error, unexpected `end', expecting ')'
  end
  ^~~
):
  
app/controllers/concerns/paginated.rb:41: syntax error, unexpected `end', expecting ')'
app/controllers/concerns/paginated.rb:41: syntax error, unexpected `end', expecting ')'
app/controllers/application_controller.rb:3:in `<class:ApplicationController>'
app/controllers/application_controller.rb:1:in `<main>'
app/controllers/api/v1/products_controller.rb:2:in `<main>'
Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 20:19:26 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:5
  Rendered api/v1/products/index.json.jbuilder (Duration: 81.4ms | Allocations: 7204)
Completed 200 OK in 101ms (Views: 86.3ms | ActiveRecord: 38.2ms | Allocations: 9034)


Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 20:19:38 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:7
  Rendered api/v1/products/index.json.jbuilder (Duration: 13.2ms | Allocations: 1223)
Completed 200 OK in 20ms (Views: 18.3ms | ActiveRecord: 0.8ms | Allocations: 1868)


Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 20:19:41 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:7
  Rendered api/v1/products/index.json.jbuilder (Duration: 7.3ms | Allocations: 976)
Completed 200 OK in 11ms (Views: 9.8ms | ActiveRecord: 0.7ms | Allocations: 1207)


Started GET "/api/v1/products" for 192.168.80.1 at 2022-01-13 20:22:30 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:7
  Rendered api/v1/products/index.json.jbuilder (Duration: 25.2ms | Allocations: 2858)
Completed 200 OK in 41ms (Views: 20.9ms | ActiveRecord: 8.5ms | Allocations: 4672)


Started GET "/api/v1/products?pagination[page]=-4&pagination[page_size]=1000" for 192.168.80.1 at 2022-01-13 20:22:37 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"-4", "page_size"=>"1000"}}
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:7
  Rendered api/v1/products/index.json.jbuilder (Duration: 6.4ms | Allocations: 941)
Completed 200 OK in 10ms (Views: 9.1ms | ActiveRecord: 0.7ms | Allocations: 1161)


Started GET "/api/v1/products?pagination[page]=-4&pagination[page_size]=1000" for 192.168.80.1 at 2022-01-13 20:22:52 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"pagination"=>{"page"=>"-4", "page_size"=>"1000"}}
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:7
  Rendered api/v1/products/index.json.jbuilder (Duration: 10.8ms | Allocations: 1184)
Completed 200 OK in 18ms (Views: 16.5ms | ActiveRecord: 0.7ms | Allocations: 1809)


Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 20:23:11 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 1312)


  
NoMethodError (undefined method `blank' for "1":String
Did you mean?  blank?):
  
app/controllers/concerns/paginated.rb:20:in `all?'
app/controllers/concerns/paginated.rb:20:in `paginate?'
app/controllers/concerns/paginated.rb:12:in `paginated_items'
app/controllers/api/v1/products_controller.rb:7:in `index'
Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 20:23:23 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `load_pagination_params'
Completed 500 Internal Server Error in 42ms (ActiveRecord: 3.3ms | Allocations: 4368)


  
NameError (undefined local variable or method `pagination_params' for #<Api::V1::ProductsController:0x0000000001eaa0>
Did you mean?  paginated_items):
  
app/controllers/concerns/paginated.rb:40:in `load_pagination_params'
app/controllers/concerns/paginated.rb:14:in `paginated_items'
app/controllers/api/v1/products_controller.rb:7:in `index'
Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 20:23:26 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `load_pagination_params'
Completed 500 Internal Server Error in 23ms (ActiveRecord: 0.7ms | Allocations: 2567)


  
NameError (undefined local variable or method `pagination_params' for #<Api::V1::ProductsController:0x0000000001eb18>
Did you mean?  paginated_items):
  
app/controllers/concerns/paginated.rb:40:in `load_pagination_params'
app/controllers/concerns/paginated.rb:14:in `paginated_items'
app/controllers/api/v1/products_controller.rb:7:in `index'
Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 20:23:37 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `load_pagination_params'
Completed 500 Internal Server Error in 27ms (ActiveRecord: 1.0ms | Allocations: 2565)


  
NameError (undefined local variable or method `pagination_params' for #<Api::V1::ProductsController:0x0000000001ec30>
Did you mean?  paginated_items):
  
app/controllers/concerns/paginated.rb:40:in `load_pagination_params'
app/controllers/concerns/paginated.rb:14:in `paginated_items'
app/controllers/api/v1/products_controller.rb:7:in `index'
Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 20:23:40 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `load_pagination_params'
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.8ms | Allocations: 2565)


  
NameError (undefined local variable or method `pagination_params' for #<Api::V1::ProductsController:0x0000000001eca8>
Did you mean?  paginated_items):
  
app/controllers/concerns/paginated.rb:40:in `load_pagination_params'
app/controllers/concerns/paginated.rb:14:in `paginated_items'
app/controllers/api/v1/products_controller.rb:7:in `index'
Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 20:23:53 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `load_pagination_params'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:26:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:7
  Rendered api/v1/products/index.json.jbuilder (Duration: 16.9ms | Allocations: 2636)
Completed 200 OK in 52ms (Views: 14.5ms | ActiveRecord: 10.0ms | Allocations: 6277)


Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 20:24:04 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `load_pagination_params'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:26:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:7
  Rendered api/v1/products/index.json.jbuilder (Duration: 6.3ms | Allocations: 1031)
Completed 200 OK in 19ms (Views: 9.0ms | ActiveRecord: 1.1ms | Allocations: 2450)


Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 20:59:07 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
Completed 500 Internal Server Error in 53ms (ActiveRecord: 18.2ms | Allocations: 6330)


  
NameError (undefined local variable or method `items' for #<Api::V1::ProductsController:0x00000000025ad0>):
  
app/controllers/concerns/paginated.rb:23:in `paginated_items'
app/controllers/api/v1/products_controller.rb:9:in `index'
Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 20:59:17 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.9ms | Allocations: 2522)


  
NameError (undefined local variable or method `items' for #<Api::V1::ProductsController:0x00000000025be8>):
  
app/controllers/concerns/paginated.rb:23:in `paginated_items'
app/controllers/api/v1/products_controller.rb:9:in `index'
Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 20:59:18 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.7ms | Allocations: 2520)


  
NameError (undefined local variable or method `items' for #<Api::V1::ProductsController:0x00000000025c60>):
  
app/controllers/concerns/paginated.rb:23:in `paginated_items'
app/controllers/api/v1/products_controller.rb:9:in `index'
Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 20:59:19 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
Completed 500 Internal Server Error in 19ms (ActiveRecord: 1.4ms | Allocations: 2520)


  
NameError (undefined local variable or method `items' for #<Api::V1::ProductsController:0x00000000025cd8>):
  
app/controllers/concerns/paginated.rb:23:in `paginated_items'
app/controllers/api/v1/products_controller.rb:9:in `index'
Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 20:59:28 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:6
  Rendered api/v1/products/index.json.jbuilder (Duration: 23.7ms | Allocations: 2588)
Completed 200 OK in 62ms (Views: 20.7ms | ActiveRecord: 17.3ms | Allocations: 6302)


Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 21:00:51 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:3
  Rendered api/v1/products/index.json.jbuilder (Duration: 10.0ms | Allocations: 1222)
Completed 200 OK in 25ms (Views: 14.1ms | ActiveRecord: 1.1ms | Allocations: 3061)


Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 21:00:54 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:3
  Rendered api/v1/products/index.json.jbuilder (Duration: 7.4ms | Allocations: 973)
Completed 200 OK in 21ms (Views: 9.2ms | ActiveRecord: 1.5ms | Allocations: 2392)


Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 21:00:58 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:3
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.3ms | Allocations: 1221)
Completed 200 OK in 31ms (Views: 17.0ms | ActiveRecord: 2.3ms | Allocations: 3015)


Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 21:01:00 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:3
  Rendered api/v1/products/index.json.jbuilder (Duration: 7.3ms | Allocations: 973)
Completed 200 OK in 30ms (Views: 10.7ms | ActiveRecord: 1.7ms | Allocations: 2391)


Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 21:01:01 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:3
  Rendered api/v1/products/index.json.jbuilder (Duration: 7.9ms | Allocations: 973)
Completed 200 OK in 23ms (Views: 10.4ms | ActiveRecord: 1.9ms | Allocations: 2347)


Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 21:01:02 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:3
  Rendered api/v1/products/index.json.jbuilder (Duration: 7.6ms | Allocations: 973)
Completed 200 OK in 22ms (Views: 10.5ms | ActiveRecord: 1.5ms | Allocations: 2346)


Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 21:01:03 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:3
  Rendered api/v1/products/index.json.jbuilder (Duration: 7.7ms | Allocations: 973)
Completed 200 OK in 22ms (Views: 10.8ms | ActiveRecord: 0.9ms | Allocations: 2348)


Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 21:03:03 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 13.9ms | Allocations: 2357)
Completed 500 Internal Server Error in 34ms (ActiveRecord: 0.8ms | Allocations: 4150)


  
ActionView::Template::Error (Missing partial api/_v1 with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  kaminari/prev_page
               kaminari/gap
               kaminari/page
               kaminari/last_page
               kaminari/next_page
               kaminari/paginator):
    1: json.data @products
    2: json.partial! "api/v1"
  
app/views/api/v1/products/index.json.jbuilder:2
app/controllers/api/v1/products_controller.rb:10:in `index'
Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 21:03:26 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.2ms | Allocations: 2318)
Completed 500 Internal Server Error in 29ms (ActiveRecord: 1.1ms | Allocations: 4193)


  
ActionView::Template::Error (Missing partial api/_v1 with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  api/v1/v1
               kaminari/prev_page
               kaminari/gap
               kaminari/page
               kaminari/last_page
               kaminari/next_page):
    1: json.data @products
    2: json.partial! "api/v1"
  
app/views/api/v1/products/index.json.jbuilder:2
app/controllers/api/v1/products_controller.rb:10:in `index'
Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 21:03:29 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 8.9ms | Allocations: 2090)
Completed 500 Internal Server Error in 24ms (ActiveRecord: 0.8ms | Allocations: 3543)


  
ActionView::Template::Error (Missing partial api/_v1 with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  api/v1/v1
               kaminari/prev_page
               kaminari/gap
               kaminari/page
               kaminari/last_page
               kaminari/next_page):
    1: json.data @products
    2: json.partial! "api/v1"
  
app/views/api/v1/products/index.json.jbuilder:2
app/controllers/api/v1/products_controller.rb:10:in `index'
Started GET "/api/v1/products?page=1&page_size=1000" for 192.168.80.1 at 2022-01-13 21:03:29 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"1000"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 8.4ms | Allocations: 2090)
Completed 500 Internal Server Error in 26ms (ActiveRecord: 0.7ms | Allocations: 3451)


  
ActionView::Template::Error (Missing partial api/_v1 with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  api/v1/v1
               kaminari/prev_page
               kaminari/gap
               kaminari/page
               kaminari/last_page
               kaminari/next_page):
    1: json.data @products
    2: json.partial! "api/v1"
  
app/views/api/v1/products/index.json.jbuilder:2
app/controllers/api/v1/products_controller.rb:10:in `index'
  [1m[35m (1.5ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (3.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (333.2ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (326.0ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (11.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "price_cents_cents" integer DEFAULT 0 NOT NULL, "price_cents_currency" character varying DEFAULT 'USD' NOT NULL, "code" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-14 13:21:31.552595"], ["updated_at", "2022-01-14 13:21:31.552595"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (318.3ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "price_cents_cents" integer DEFAULT 0 NOT NULL, "price_cents_currency" character varying DEFAULT 'USD' NOT NULL, "code" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-14 13:27:54.664852"], ["updated_at", "2022-01-14 13:27:54.664852"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (3.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (329.0ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'USD' NOT NULL, "code" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-14 13:37:34.769043"], ["updated_at", "2022-01-14 13:37:34.769043"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price_cents", "price_currency", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy Mug"], ["price_cents", 60000], ["price_currency", "USD"], ["code", 0], ["created_at", "2022-01-14 13:37:37.871406"], ["updated_at", "2022-01-14 13:37:37.871406"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "price_cents", "price_currency", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy T-shirt"], ["price_cents", 150000], ["price_currency", "USD"], ["code", 1], ["created_at", "2022-01-14 13:37:37.880917"], ["updated_at", "2022-01-14 13:37:37.880917"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("name", "price_cents", "price_currency", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy Hoodie"], ["price_cents", 200000], ["price_currency", "USD"], ["code", 2], ["created_at", "2022-01-14 13:37:37.890046"], ["updated_at", "2022-01-14 13:37:37.890046"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("name", "price_cents", "price_currency", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy Mug"], ["price_cents", 60000], ["price_currency", "USD"], ["code", 0], ["created_at", "2022-01-14 13:45:50.381773"], ["updated_at", "2022-01-14 13:45:50.381773"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("name", "price_cents", "price_currency", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy T-shirt"], ["price_cents", 150000], ["price_currency", "USD"], ["code", 1], ["created_at", "2022-01-14 13:45:50.392575"], ["updated_at", "2022-01-14 13:45:50.392575"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "price_cents", "price_currency", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy Hoodie"], ["price_cents", 200000], ["price_currency", "USD"], ["code", 2], ["created_at", "2022-01-14 13:45:50.402989"], ["updated_at", "2022-01-14 13:45:50.402989"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 13:55:34 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (3.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:6
  Rendered api/v1/products/index.json.jbuilder (Duration: 34.8ms | Allocations: 6020)
Completed 200 OK in 132ms (Views: 114.6ms | ActiveRecord: 7.9ms | Allocations: 10927)


Started GET "/favicon.ico" for 172.26.0.1 at 2022-01-14 13:55:35 +0000
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:00:42 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:6
  Rendered api/v1/products/index.json.jbuilder (Duration: 9.5ms | Allocations: 1505)
Completed 200 OK in 14ms (Views: 12.3ms | ActiveRecord: 0.7ms | Allocations: 2187)


Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:00:46 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:6
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.3ms | Allocations: 1272)
Completed 200 OK in 16ms (Views: 14.3ms | ActiveRecord: 0.7ms | Allocations: 1529)


Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:00:47 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:6
  Rendered api/v1/products/index.json.jbuilder (Duration: 6.4ms | Allocations: 1264)
Completed 200 OK in 10ms (Views: 8.5ms | ActiveRecord: 0.6ms | Allocations: 1487)


Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:00:48 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:6
  Rendered api/v1/products/index.json.jbuilder (Duration: 5.6ms | Allocations: 1271)
Completed 200 OK in 9ms (Views: 8.4ms | ActiveRecord: 0.5ms | Allocations: 1498)


Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:00:49 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:6
  Rendered api/v1/products/index.json.jbuilder (Duration: 7.1ms | Allocations: 1272)
Completed 200 OK in 11ms (Views: 10.2ms | ActiveRecord: 0.4ms | Allocations: 1502)


Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:00:54 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 41.4ms | Allocations: 5147)
Completed 500 Internal Server Error in 46ms (ActiveRecord: 0.0ms | Allocations: 5805)


  
ActionView::Template::Error (Missing partial api/v1/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  action_text/attachables/remote_image
               action_text/contents/content
               kaminari/gap
               active_storage/blobs/blob
               kaminari/paginator
               kaminari/prev_page):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:01:28 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 9.8ms | Allocations: 2349)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.0ms | Allocations: 3008)


  
ActionView::Template::Error (Missing partial api/v1/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  api/v1/products/product
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/gap
               active_storage/blobs/blob
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:01:30 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 8.7ms | Allocations: 2115)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms | Allocations: 2349)


  
ActionView::Template::Error (Missing partial api/v1/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  api/v1/products/product
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/gap
               active_storage/blobs/blob
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:01:31 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 7.4ms | Allocations: 2124)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms | Allocations: 2334)


  
ActionView::Template::Error (Missing partial api/v1/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  api/v1/products/product
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/gap
               active_storage/blobs/blob
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:01:31 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 6.1ms | Allocations: 2123)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 2333)


  
ActionView::Template::Error (Missing partial api/v1/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  api/v1/products/product
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/gap
               active_storage/blobs/blob
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:01:32 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 6.0ms | Allocations: 2113)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 2323)


  
ActionView::Template::Error (Missing partial api/v1/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  api/v1/products/product
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/gap
               active_storage/blobs/blob
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:01:33 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 5.2ms | Allocations: 2124)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 2334)


  
ActionView::Template::Error (Missing partial api/v1/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  api/v1/products/product
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/gap
               active_storage/blobs/blob
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:01:34 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 15.6ms | Allocations: 2120)
Completed 500 Internal Server Error in 30ms (ActiveRecord: 0.0ms | Allocations: 2330)


  
ActionView::Template::Error (Missing partial api/v1/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  api/v1/products/product
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/gap
               active_storage/blobs/blob
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:02:33 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 8.0ms | Allocations: 2335)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms | Allocations: 2968)


  
ActionView::Template::Error (Missing partial api/v1/products/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  layouts/action_text/contents/content
               active_storage/blobs/blob
               kaminari/gap
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/products/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:02:35 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 6.2ms | Allocations: 2103)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.0ms | Allocations: 2337)


  
ActionView::Template::Error (Missing partial api/v1/products/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  layouts/action_text/contents/content
               active_storage/blobs/blob
               kaminari/gap
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/products/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:02:36 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 6.1ms | Allocations: 2103)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 2313)


  
ActionView::Template::Error (Missing partial api/v1/products/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  layouts/action_text/contents/content
               active_storage/blobs/blob
               kaminari/gap
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/products/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:02:37 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 6.6ms | Allocations: 2107)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.0ms | Allocations: 2317)


  
ActionView::Template::Error (Missing partial api/v1/products/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  layouts/action_text/contents/content
               active_storage/blobs/blob
               kaminari/gap
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/products/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:02:38 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 5.7ms | Allocations: 2103)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 2313)


  
ActionView::Template::Error (Missing partial api/v1/products/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  layouts/action_text/contents/content
               active_storage/blobs/blob
               kaminari/gap
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/products/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:02:39 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 6.3ms | Allocations: 2105)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 2315)


  
ActionView::Template::Error (Missing partial api/v1/products/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  layouts/action_text/contents/content
               active_storage/blobs/blob
               kaminari/gap
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/products/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:02:45 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  Rendered api/v1/products/index.json.jbuilder (Duration: 8.0ms | Allocations: 2103)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms | Allocations: 2313)


  
ActionView::Template::Error (Missing partial api/v1/products/_product with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}.

Searched in:
  * "/home/app/reedsy-challenge/app/views"
  * "/usr/local/bundle/gems/kaminari-core-1.2.2/app/views"
  * "/usr/local/bundle/gems/actiontext-7.0.1/app/views"
  * "/usr/local/bundle/gems/actionmailbox-7.0.1/app/views"

Did you mean?  layouts/action_text/contents/content
               active_storage/blobs/blob
               kaminari/gap
               action_text/attachables/remote_image
               action_text/contents/content
               kaminari/paginator):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.partial! 'api/v1/products/product', collection: @products, as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:03:05 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 5.0ms | Allocations: 747)
  Rendered api/v1/products/index.json.jbuilder (Duration: 19.6ms | Allocations: 1814)
Completed 500 Internal Server Error in 27ms (ActiveRecord: 1.2ms | Allocations: 2439)


  
ActionView::Template::Error (undefined method `name' for nil:NilClass):
    1: json.name @product.name
  
app/views/api/v1/products/_product.json.jbuilder:1
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:03:09 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 3.1ms | Allocations: 593)
  Rendered api/v1/products/index.json.jbuilder (Duration: 12.1ms | Allocations: 1359)
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.9ms | Allocations: 1593)


  
ActionView::Template::Error (undefined method `name' for nil:NilClass):
    1: json.name @product.name
  
app/views/api/v1/products/_product.json.jbuilder:1
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:03:10 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 1.6ms | Allocations: 593)
  Rendered api/v1/products/index.json.jbuilder (Duration: 8.8ms | Allocations: 1359)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.6ms | Allocations: 1569)


  
ActionView::Template::Error (undefined method `name' for nil:NilClass):
    1: json.name @product.name
  
app/views/api/v1/products/_product.json.jbuilder:1
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:03:24 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 214583.4ms | Allocations: 21792)
  Rendered api/v1/products/index.json.jbuilder (Duration: 214594.8ms | Allocations: 22591)
Completed 500 Internal Server Error in 214599ms (ActiveRecord: 0.6ms | Allocations: 22821)


  
ActionView::Template::Error (undefined method `name' for nil:NilClass):
    1: json.name @product.name
  
app/views/api/v1/products/_product.json.jbuilder:1
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:07:15 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 3.0ms | Allocations: 675)
  Rendered api/v1/products/index.json.jbuilder (Duration: 14.8ms | Allocations: 1744)
Completed 500 Internal Server Error in 20ms (ActiveRecord: 1.0ms | Allocations: 2392)


  
ActionView::Template::Error (undefined method `name' for nil:NilClass):
    1: json.name @product.name
  
app/views/api/v1/products/_product.json.jbuilder:1
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:07:17 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 2.0ms | Allocations: 594)
  Rendered api/v1/products/index.json.jbuilder (Duration: 8.3ms | Allocations: 1364)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.6ms | Allocations: 1598)


  
ActionView::Template::Error (undefined method `name' for nil:NilClass):
    1: json.name @product.name
  
app/views/api/v1/products/_product.json.jbuilder:1
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:07:28 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 4.2ms | Allocations: 229)
  Rendered api/v1/products/index.json.jbuilder (Duration: 15.0ms | Allocations: 1389)
Completed 200 OK in 22ms (Views: 20.8ms | ActiveRecord: 0.6ms | Allocations: 2033)


  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:11:44 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 48.9ms | Allocations: 2135)
  Rendered api/v1/products/index.json.jbuilder (Duration: 58.3ms | Allocations: 3403)
Completed 200 OK in 63ms (Views: 61.9ms | ActiveRecord: 0.5ms | Allocations: 4072)


Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:11:57 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 8.5ms | Allocations: 963)
  Rendered api/v1/products/index.json.jbuilder (Duration: 19.6ms | Allocations: 2227)
Completed 200 OK in 26ms (Views: 24.5ms | ActiveRecord: 0.6ms | Allocations: 2893)


  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:18:11 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 7.4ms | Allocations: 962)
  Rendered api/v1/products/index.json.jbuilder (Duration: 43.3ms | Allocations: 4550)
Completed 200 OK in 48ms (Views: 47.4ms | ActiveRecord: 15.3ms | Allocations: 5212)


Started GET "/api/v1/products" for 172.26.0.1 at 2022-01-14 14:18:13 +0000
Processing by Api::V1::ProductsController#index as JSON
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 5.3ms | Allocations: 830)
  Rendered api/v1/products/index.json.jbuilder (Duration: 14.4ms | Allocations: 1784)
Completed 200 OK in 18ms (Views: 17.0ms | ActiveRecord: 0.5ms | Allocations: 2031)


Started GET "/api/v1/products?currency=eur" for 172.26.0.1 at 2022-01-14 14:18:22 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"eur"}
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 0.9ms | Allocations: 260)
  Rendered api/v1/products/index.json.jbuilder (Duration: 10.4ms | Allocations: 1029)
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.8ms | Allocations: 1236)


  
ActionView::Template::Error (No conversion rate known for 'USD' -> 'EUR'):
    1: json.name product.name
    2: json.code product.code
    3: json.price humanized_money_with_symbol product.price.exchange_to(@currency)
  
app/views/api/v1/products/_product.json.jbuilder:3
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:12:in `with_currency'
Started GET "/api/v1/products?currency=eur" for 172.26.0.1 at 2022-01-14 14:19:00 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"eur"}
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 5.0ms | Allocations: 1355)
  Rendered api/v1/products/index.json.jbuilder (Duration: 39.1ms | Allocations: 6989)
Completed 200 OK in 84ms (Views: 59.9ms | ActiveRecord: 7.8ms | Allocations: 11104)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:19:05 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 1.1ms | Allocations: 716)
  Rendered api/v1/products/index.json.jbuilder (Duration: 9.5ms | Allocations: 1752)
Completed 200 OK in 13ms (Views: 11.3ms | ActiveRecord: 0.9ms | Allocations: 2011)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:26:52 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 2.0ms | Allocations: 791)
  Rendered api/v1/products/index.json.jbuilder (Duration: 36.5ms | Allocations: 5689)
Completed 200 OK in 48ms (Views: 39.6ms | ActiveRecord: 14.7ms | Allocations: 7621)


Started GET "/api/v1/products?currency=usd&page=1" for 172.26.0.1 at 2022-01-14 14:27:30 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"1"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
Completed 500 Internal Server Error in 34ms (ActiveRecord: 0.8ms | Allocations: 3439)


  
Kaminari::ZeroPerPageOperation (The number of total pages was incalculable. Perhaps you called .per(0)?):
  
app/controllers/concerns/paginated.rb:39:in `computed_page'
app/controllers/concerns/paginated.rb:23:in `paginated_items'
app/controllers/api/v1/products_controller.rb:14:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd&page=1" for 172.26.0.1 at 2022-01-14 14:28:10 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"1"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
Completed 500 Internal Server Error in 32850ms (ActiveRecord: 0.9ms | Allocations: 13009)


  
Kaminari::ZeroPerPageOperation (The number of total pages was incalculable. Perhaps you called .per(0)?):
  
app/controllers/concerns/paginated.rb:39:in `computed_page'
app/controllers/concerns/paginated.rb:23:in `paginated_items'
app/controllers/api/v1/products_controller.rb:14:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd&page=1" for 172.26.0.1 at 2022-01-14 14:28:45 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"1"}
  [1m[36mProduct Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:4
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 5.4ms | Allocations: 602)
  Rendered api/v1/products/index.json.jbuilder (Duration: 55.4ms | Allocations: 3650)
Completed 500 Internal Server Error in 6232ms (ActiveRecord: 23.0ms | Allocations: 12116)


  
ActionView::Template::Error (Can't merge [{"name"=>"Reedsy Mug", "code"=>"mug", "price"=>"$600"}, {"name"=>"Reedsy T-shirt", "code"=>"tshirt", "price"=>"$1,500"}, {"name"=>"Reedsy Hoodie", "code"=>"hoodie", "price"=>"$2,000"}] into {"total"=>6, "page"=>1, "page_size"=>3}):
    1: json.total @total if @total
    2: json.page @page if @page
    3: json.page_size @page_size if @page_size
    4: json.array! @products, partial: 'api/v1/products/product', as: :product
  
app/views/api/v1/products/index.json.jbuilder:4
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd&page=1" for 172.26.0.1 at 2022-01-14 14:29:34 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"1"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:62:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:39:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:5
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.9ms | Allocations: 475)
  Rendered api/v1/products/index.json.jbuilder (Duration: 15.2ms | Allocations: 1772)
Completed 200 OK in 3136ms (Views: 18.7ms | ActiveRecord: 1.8ms | Allocations: 8419)


Started GET "/api/v1/products?currency=usd&page=1" for 172.26.0.1 at 2022-01-14 14:29:55 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"1"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:40:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:5
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.2ms | Allocations: 436)
  Rendered api/v1/products/index.json.jbuilder (Duration: 17.0ms | Allocations: 2910)
Completed 200 OK in 46ms (Views: 16.6ms | ActiveRecord: 7.0ms | Allocations: 6790)


Started GET "/api/v1/products?currency=usd&page=1" for 172.26.0.1 at 2022-01-14 14:29:57 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"1"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:40:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/api/v1/products/index.json.jbuilder:5
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 0.7ms | Allocations: 372)
  Rendered api/v1/products/index.json.jbuilder (Duration: 6.9ms | Allocations: 1315)
Completed 200 OK in 18ms (Views: 9.1ms | ActiveRecord: 1.0ms | Allocations: 2753)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:30:01 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/api/v1/products/index.json.jbuilder:5
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 1.6ms | Allocations: 719)
  Rendered api/v1/products/index.json.jbuilder (Duration: 12.6ms | Allocations: 1709)
Completed 200 OK in 21ms (Views: 14.9ms | ActiveRecord: 1.3ms | Allocations: 2408)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:38:37 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list_metadata.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 5.0ms | Allocations: 819)
  Rendered common/_list_metadata.json.jbuilder (Duration: 19.8ms | Allocations: 1944)
  Rendered api/v1/products/index.json.jbuilder (Duration: 28.0ms | Allocations: 2507)
Completed 200 OK in 73ms (Views: 31.7ms | ActiveRecord: 21.3ms | Allocations: 5864)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:38:39 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list_metadata.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 2.4ms | Allocations: 716)
  Rendered common/_list_metadata.json.jbuilder (Duration: 9.5ms | Allocations: 1510)
  Rendered api/v1/products/index.json.jbuilder (Duration: 12.5ms | Allocations: 1813)
Completed 200 OK in 23ms (Views: 15.0ms | ActiveRecord: 1.6ms | Allocations: 2545)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:38:41 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list_metadata.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 2.3ms | Allocations: 716)
  Rendered common/_list_metadata.json.jbuilder (Duration: 11.0ms | Allocations: 1510)
  Rendered api/v1/products/index.json.jbuilder (Duration: 13.5ms | Allocations: 1813)
Completed 200 OK in 23ms (Views: 15.8ms | ActiveRecord: 2.0ms | Allocations: 2511)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:38:41 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list_metadata.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 1.1ms | Allocations: 716)
  Rendered common/_list_metadata.json.jbuilder (Duration: 9.2ms | Allocations: 1510)
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.9ms | Allocations: 1813)
Completed 200 OK in 21ms (Views: 14.3ms | ActiveRecord: 1.5ms | Allocations: 2511)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:38:42 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list_metadata.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 2.9ms | Allocations: 716)
  Rendered common/_list_metadata.json.jbuilder (Duration: 15.2ms | Allocations: 1510)
  Rendered api/v1/products/index.json.jbuilder (Duration: 17.9ms | Allocations: 1814)
Completed 200 OK in 33ms (Views: 25.0ms | ActiveRecord: 1.7ms | Allocations: 2530)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:38:43 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list_metadata.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 1.4ms | Allocations: 716)
  Rendered common/_list_metadata.json.jbuilder (Duration: 10.6ms | Allocations: 1510)
  Rendered api/v1/products/index.json.jbuilder (Duration: 13.5ms | Allocations: 1813)
Completed 200 OK in 25ms (Views: 17.7ms | ActiveRecord: 2.0ms | Allocations: 2511)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:38:45 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list_metadata.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 1.5ms | Allocations: 716)
  Rendered common/_list_metadata.json.jbuilder (Duration: 9.4ms | Allocations: 1510)
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.8ms | Allocations: 1813)
Completed 200 OK in 21ms (Views: 14.3ms | ActiveRecord: 1.5ms | Allocations: 2511)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:38:46 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list_metadata.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 1.1ms | Allocations: 716)
  Rendered common/_list_metadata.json.jbuilder (Duration: 10.0ms | Allocations: 1510)
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.8ms | Allocations: 1813)
Completed 200 OK in 20ms (Views: 13.2ms | ActiveRecord: 1.9ms | Allocations: 2511)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:38:50 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list_metadata.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 2.4ms | Allocations: 716)
  Rendered common/_list_metadata.json.jbuilder (Duration: 9.8ms | Allocations: 1510)
  Rendered api/v1/products/index.json.jbuilder (Duration: 12.8ms | Allocations: 1813)
Completed 200 OK in 27ms (Views: 17.3ms | ActiveRecord: 1.7ms | Allocations: 2511)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:38:51 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list_metadata.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 1.0ms | Allocations: 716)
  Rendered common/_list_metadata.json.jbuilder (Duration: 7.8ms | Allocations: 1510)
  Rendered api/v1/products/index.json.jbuilder (Duration: 9.8ms | Allocations: 1813)
Completed 200 OK in 20ms (Views: 13.6ms | ActiveRecord: 1.4ms | Allocations: 2511)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:38:52 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list_metadata.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 1.1ms | Allocations: 716)
  Rendered common/_list_metadata.json.jbuilder (Duration: 8.9ms | Allocations: 1510)
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.3ms | Allocations: 1813)
Completed 200 OK in 21ms (Views: 13.2ms | ActiveRecord: 2.2ms | Allocations: 2512)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:38:52 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list_metadata.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 2.1ms | Allocations: 716)
  Rendered common/_list_metadata.json.jbuilder (Duration: 9.2ms | Allocations: 1510)
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.7ms | Allocations: 1813)
Completed 200 OK in 25ms (Views: 16.0ms | ActiveRecord: 1.3ms | Allocations: 2511)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:38:53 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list_metadata.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 1.4ms | Allocations: 716)
  Rendered common/_list_metadata.json.jbuilder (Duration: 7.9ms | Allocations: 1512)
  Rendered api/v1/products/index.json.jbuilder (Duration: 10.4ms | Allocations: 1815)
Completed 200 OK in 27ms (Views: 13.2ms | ActiveRecord: 1.6ms | Allocations: 2516)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:39:14 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 5.8ms | Allocations: 819)
  Rendered common/_list.json.jbuilder (Duration: 18.7ms | Allocations: 1866)
  Rendered api/v1/products/index.json.jbuilder (Duration: 25.5ms | Allocations: 2405)
Completed 200 OK in 42ms (Views: 32.6ms | ActiveRecord: 2.0ms | Allocations: 3527)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:39:17 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 2.3ms | Allocations: 716)
  Rendered common/_list.json.jbuilder (Duration: 10.2ms | Allocations: 1512)
  Rendered api/v1/products/index.json.jbuilder (Duration: 12.6ms | Allocations: 1815)
Completed 200 OK in 21ms (Views: 15.2ms | ActiveRecord: 1.3ms | Allocations: 2547)


Started GET "/api/v1/products?currency=errrr" for 172.26.0.1 at 2022-01-14 14:40:01 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"errrr"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 0.7ms | Allocations: 254)
  Rendered common/_list.json.jbuilder (Duration: 7.4ms | Allocations: 1050)
  Rendered api/v1/products/index.json.jbuilder (Duration: 10.1ms | Allocations: 1155)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 1.9ms | Allocations: 1854)


  
ActionView::Template::Error (Unknown currency 'errrr'):
    1: json.name product.name
    2: json.code product.code
    3: json.price humanized_money_with_symbol product.price.exchange_to(@currency)
  
app/views/api/v1/products/_product.json.jbuilder:3
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/products?currency=errrr" for 172.26.0.1 at 2022-01-14 14:50:55 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"errrr"}
  [1m[36mProduct Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 6.4ms | Allocations: 1230)
  Rendered common/_list.json.jbuilder (Duration: 16.3ms | Allocations: 2353)
  Rendered api/v1/products/index.json.jbuilder (Duration: 20.0ms | Allocations: 2890)
Completed 200 OK in 54ms (Views: 23.2ms | ActiveRecord: 15.9ms | Allocations: 6255)


Started GET "/api/v1/products?currency=usd+" for 172.26.0.1 at 2022-01-14 14:54:57 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd "}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 6.6ms | Allocations: 1226)
  Rendered common/_list.json.jbuilder (Duration: 18.5ms | Allocations: 2273)
  Rendered api/v1/products/index.json.jbuilder (Duration: 22.8ms | Allocations: 2809)
Completed 200 OK in 36ms (Views: 28.4ms | ActiveRecord: 1.6ms | Allocations: 3961)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:54:59 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 1.2ms | Allocations: 716)
  Rendered common/_list.json.jbuilder (Duration: 6.4ms | Allocations: 1512)
  Rendered api/v1/products/index.json.jbuilder (Duration: 9.1ms | Allocations: 1815)
Completed 200 OK in 17ms (Views: 11.2ms | ActiveRecord: 1.5ms | Allocations: 2547)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-14 14:56:00 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:63:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 1.8ms | Allocations: 716)
  Rendered common/_list.json.jbuilder (Duration: 10.8ms | Allocations: 1512)
  Rendered api/v1/products/index.json.jbuilder (Duration: 12.7ms | Allocations: 1815)
Completed 200 OK in 20ms (Views: 14.9ms | ActiveRecord: 1.3ms | Allocations: 2513)


  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 09:50:36 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 49.0ms | Allocations: 2388)
  Rendered common/_list.json.jbuilder (Duration: 76.5ms | Allocations: 6904)
  Rendered api/v1/products/index.json.jbuilder (Duration: 85.8ms | Allocations: 7741)
Completed 200 OK in 156ms (Views: 121.9ms | ActiveRecord: 11.3ms | Allocations: 13207)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 10:00:40 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 7.8ms | Allocations: 947)
  Rendered common/_list.json.jbuilder (Duration: 19.8ms | Allocations: 3175)
  Rendered api/v1/products/index.json.jbuilder (Duration: 22.5ms | Allocations: 3549)
Completed 200 OK in 84ms (Views: 27.8ms | ActiveRecord: 20.4ms | Allocations: 8629)


Started GET "/api/v1/products?currency=usd&page=1" for 172.26.0.1 at 2022-01-15 10:00:45 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"1"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.5ms | Allocations: 500)
  Rendered common/_list.json.jbuilder (Duration: 14.9ms | Allocations: 1638)
  Rendered api/v1/products/index.json.jbuilder (Duration: 17.0ms | Allocations: 1910)
Completed 200 OK in 32ms (Views: 18.3ms | ActiveRecord: 2.7ms | Allocations: 3694)


Started GET "/api/v1/products?currency=usd&page=144&page_size=1" for 172.26.0.1 at 2022-01-15 10:09:23 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"144", "page_size"=>"1"}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 0.7ms | Allocations: 236)
  Rendered common/_list.json.jbuilder (Duration: 12.5ms | Allocations: 2552)
  Rendered api/v1/products/index.json.jbuilder (Duration: 14.2ms | Allocations: 2761)
Completed 200 OK in 68ms (Views: 16.4ms | ActiveRecord: 17.3ms | Allocations: 8751)


Started GET "/api/v1/products?currency=usd&page=144&page_size=1" for 172.26.0.1 at 2022-01-15 10:09:43 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"144", "page_size"=>"1"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 1.6ms | Allocations: 152)
  Rendered common/_list.json.jbuilder (Duration: 13.2ms | Allocations: 974)
  Rendered api/v1/products/index.json.jbuilder (Duration: 15.9ms | Allocations: 1142)
Completed 200 OK in 36ms (Views: 19.1ms | ActiveRecord: 1.6ms | Allocations: 2610)


Started GET "/api/v1/products?currency=usd&page=144&page_size=1" for 172.26.0.1 at 2022-01-15 10:09:47 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"144", "page_size"=>"1"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 1.3ms | Allocations: 152)
  Rendered common/_list.json.jbuilder (Duration: 14.0ms | Allocations: 973)
  Rendered api/v1/products/index.json.jbuilder (Duration: 17.3ms | Allocations: 1142)
Completed 200 OK in 37ms (Views: 20.5ms | ActiveRecord: 2.0ms | Allocations: 2559)


Started GET "/api/v1/products?currency=usd&page=144&page_size=1" for 172.26.0.1 at 2022-01-15 10:09:48 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"144", "page_size"=>"1"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 2.6ms | Allocations: 152)
  Rendered common/_list.json.jbuilder (Duration: 12.8ms | Allocations: 973)
  Rendered api/v1/products/index.json.jbuilder (Duration: 15.5ms | Allocations: 1141)
Completed 200 OK in 36ms (Views: 19.7ms | ActiveRecord: 1.9ms | Allocations: 2540)


Started GET "/api/v1/products?currency=usd&page=144&page_size=1" for 172.26.0.1 at 2022-01-15 10:09:49 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"144", "page_size"=>"1"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 2.0ms | Allocations: 152)
  Rendered common/_list.json.jbuilder (Duration: 17.5ms | Allocations: 973)
  Rendered api/v1/products/index.json.jbuilder (Duration: 19.8ms | Allocations: 1141)
Completed 200 OK in 40ms (Views: 23.5ms | ActiveRecord: 1.8ms | Allocations: 2539)


Started GET "/api/v1/products?currency=usd&page=144&page_size=1" for 172.26.0.1 at 2022-01-15 10:09:56 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"144", "page_size"=>"1"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 0.8ms | Allocations: 207)
  Rendered common/_list.json.jbuilder (Duration: 11.4ms | Allocations: 1173)
  Rendered api/v1/products/index.json.jbuilder (Duration: 9972.1ms | Allocations: 10270)
Completed 200 OK in 9994ms (Views: 9975.1ms | ActiveRecord: 2.4ms | Allocations: 11686)


Started GET "/api/v1/products?currency=usd&page=144&page_size=1" for 172.26.0.1 at 2022-01-15 10:10:21 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"144", "page_size"=>"1"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ (eval):2:in `computed_page'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 1.6ms | Allocations: 236)
  Rendered common/_list.json.jbuilder (Duration: 23.8ms | Allocations: 2552)
  Rendered api/v1/products/index.json.jbuilder (Duration: 26.4ms | Allocations: 2760)
Completed 200 OK in 24925ms (Views: 25.3ms | ActiveRecord: 18.8ms | Allocations: 17089)


Started GET "/api/v1/products?currency=usd&page=144&page_size=1" for 172.26.0.1 at 2022-01-15 10:11:29 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"144", "page_size"=>"1"}
  [1m[36mProduct Count (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 1.8ms | Allocations: 152)
  Rendered common/_list.json.jbuilder (Duration: 14.6ms | Allocations: 973)
  Rendered api/v1/products/index.json.jbuilder (Duration: 17.5ms | Allocations: 1141)
Completed 200 OK in 43ms (Views: 21.1ms | ActiveRecord: 2.7ms | Allocations: 2543)


Started GET "/api/v1/products?currency=usd&page=144&page_size=1" for 172.26.0.1 at 2022-01-15 10:11:34 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"144", "page_size"=>"1"}
  [1m[36mProduct Count (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 5]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 1.3ms | Allocations: 254)
  Rendered common/_list.json.jbuilder (Duration: 26.5ms | Allocations: 2551)
  Rendered api/v1/products/index.json.jbuilder (Duration: 29.9ms | Allocations: 2759)
Completed 200 OK in 78ms (Views: 28.6ms | ActiveRecord: 13.7ms | Allocations: 6647)


Started GET "/api/v1/products?currency=usd&page=144&page_size=1" for 172.26.0.1 at 2022-01-15 10:11:37 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"144", "page_size"=>"1"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 5]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 0.9ms | Allocations: 170)
  Rendered common/_list.json.jbuilder (Duration: 9.2ms | Allocations: 991)
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.5ms | Allocations: 1159)
Completed 200 OK in 27ms (Views: 15.5ms | ActiveRecord: 1.0ms | Allocations: 2595)


Started GET "/api/v1/products?currency=usd&page=144&page_size=1" for 172.26.0.1 at 2022-01-15 10:11:38 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"144", "page_size"=>"1"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 5]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 1.2ms | Allocations: 170)
  Rendered common/_list.json.jbuilder (Duration: 9.3ms | Allocations: 991)
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.6ms | Allocations: 1159)
Completed 200 OK in 26ms (Views: 14.6ms | ActiveRecord: 1.5ms | Allocations: 2550)


Started GET "/api/v1/products?currency=usd&page=144&page_size=1" for 172.26.0.1 at 2022-01-15 10:11:40 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd", "page"=>"144", "page_size"=>"1"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 5]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 1.5ms | Allocations: 170)
  Rendered common/_list.json.jbuilder (Duration: 10.3ms | Allocations: 991)
  Rendered api/v1/products/index.json.jbuilder (Duration: 13.0ms | Allocations: 1159)
Completed 200 OK in 27ms (Views: 16.4ms | ActiveRecord: 1.1ms | Allocations: 2550)


  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 16:59:32 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 31.9ms | Allocations: 3598)
  Rendered common/_list.json.jbuilder (Duration: 53.1ms | Allocations: 6038)
  Rendered api/v1/products/index.json.jbuilder (Duration: 58.1ms | Allocations: 6360)
Completed 500 Internal Server Error in 115ms (ActiveRecord: 16.8ms | Allocations: 11661)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x0000000001b850>
Did you mean?  readline):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:00:02 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 27.9ms | Allocations: 2924)
  Rendered common/_list.json.jbuilder (Duration: 35.2ms | Allocations: 3744)
  Rendered api/v1/products/index.json.jbuilder (Duration: 37.3ms | Allocations: 3861)
Completed 500 Internal Server Error in 52ms (ActiveRecord: 1.9ms | Allocations: 4644)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x0000000001ba58>
Did you mean?  readline):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:00:05 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 26.2ms | Allocations: 2892)
  Rendered common/_list.json.jbuilder (Duration: 34.4ms | Allocations: 3687)
  Rendered api/v1/products/index.json.jbuilder (Duration: 36.4ms | Allocations: 3792)
Completed 500 Internal Server Error in 44ms (ActiveRecord: 1.6ms | Allocations: 4477)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x0000000001bad0>
Did you mean?  readline):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:00:43 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 17.0ms | Allocations: 1821)
  Rendered common/_list.json.jbuilder (Duration: 41.0ms | Allocations: 6336)
  Rendered api/v1/products/index.json.jbuilder (Duration: 49.3ms | Allocations: 6891)
Completed 500 Internal Server Error in 109ms (ActiveRecord: 9.9ms | Allocations: 12301)


  
ActionView::Template::Error (undefined method `readable_price' for PriceHelper:Module):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price PriceHelper.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:04:08 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 9.7ms | Allocations: 1085)
  Rendered common/_list.json.jbuilder (Duration: 26.8ms | Allocations: 3412)
  Rendered api/v1/products/index.json.jbuilder (Duration: 28.6ms | Allocations: 3541)
Completed 500 Internal Server Error in 58ms (ActiveRecord: 10.8ms | Allocations: 6611)


  
ActionView::Template::Error (undefined method `readable_price' for PriceHelper:Module):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price PriceHelper.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:04:10 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 8.0ms | Allocations: 958)
  Rendered common/_list.json.jbuilder (Duration: 16.3ms | Allocations: 1779)
  Rendered api/v1/products/index.json.jbuilder (Duration: 18.2ms | Allocations: 1897)
Completed 500 Internal Server Error in 30ms (ActiveRecord: 1.5ms | Allocations: 2698)


  
ActionView::Template::Error (undefined method `readable_price' for PriceHelper:Module):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price PriceHelper.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:05:39 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 32.3ms | Allocations: 3717)
  Rendered common/_list.json.jbuilder (Duration: 63.1ms | Allocations: 8232)
  Rendered api/v1/products/index.json.jbuilder (Duration: 73.9ms | Allocations: 8787)
Completed 500 Internal Server Error in 144ms (ActiveRecord: 11.4ms | Allocations: 14206)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x00000000009f88>
Did you mean?  readline):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:08:20 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 18.4ms | Allocations: 2352)
  Rendered common/_list.json.jbuilder (Duration: 27.8ms | Allocations: 3399)
  Rendered api/v1/products/index.json.jbuilder (Duration: 32.2ms | Allocations: 3722)
Completed 500 Internal Server Error in 43ms (ActiveRecord: 1.5ms | Allocations: 4926)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x00007fa5a10423f8 @_config=#< {}>, @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>, @view_renderer=#<ActionView::Renderer:0x00007fa5a1042380 @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>>, @current_template=nil, @_assigns={}, @_controller=nil, @view_flow=#<ActionView::OutputFlow:0x00007fa5a10422e0 @content={}>, @output_buffer=nil, @virtual_path=nil>):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price ActionController::Base.helpers.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:08:23 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 13.9ms | Allocations: 2181)
  Rendered common/_list.json.jbuilder (Duration: 24.0ms | Allocations: 2977)
  Rendered api/v1/products/index.json.jbuilder (Duration: 26.4ms | Allocations: 3083)
Completed 500 Internal Server Error in 36ms (ActiveRecord: 1.6ms | Allocations: 3820)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x00007fa5a10423f8 @_config=#< {}>, @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>, @view_renderer=#<ActionView::Renderer:0x00007fa5a1042380 @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>>, @current_template=nil, @_assigns={}, @_controller=nil, @view_flow=#<ActionView::OutputFlow:0x00007fa5a10422e0 @content={}>, @output_buffer=nil, @virtual_path=nil>):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price ActionController::Base.helpers.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:08:25 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 13.3ms | Allocations: 2181)
  Rendered common/_list.json.jbuilder (Duration: 20.4ms | Allocations: 2976)
  Rendered api/v1/products/index.json.jbuilder (Duration: 22.7ms | Allocations: 3082)
Completed 500 Internal Server Error in 34ms (ActiveRecord: 1.9ms | Allocations: 3782)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x00007fa5a10423f8 @_config=#< {}>, @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>, @view_renderer=#<ActionView::Renderer:0x00007fa5a1042380 @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>>, @current_template=nil, @_assigns={}, @_controller=nil, @view_flow=#<ActionView::OutputFlow:0x00007fa5a10422e0 @content={}>, @output_buffer=nil, @virtual_path=nil>):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price ActionController::Base.helpers.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:09:07 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 21.7ms | Allocations: 2246)
  Rendered common/_list.json.jbuilder (Duration: 39.8ms | Allocations: 4563)
  Rendered api/v1/products/index.json.jbuilder (Duration: 42.0ms | Allocations: 4692)
Completed 500 Internal Server Error in 74ms (ActiveRecord: 10.2ms | Allocations: 7751)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x00007fa5a10423f8 @_config=#< {}>, @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>, @view_renderer=#<ActionView::Renderer:0x00007fa5a1042380 @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>>, @current_template=nil, @_assigns={}, @_controller=nil, @view_flow=#<ActionView::OutputFlow:0x00007fa5a10422e0 @content={}>, @output_buffer=nil, @virtual_path=nil>):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price ActionController::Base.helpers.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:09:10 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 14.0ms | Allocations: 2181)
  Rendered common/_list.json.jbuilder (Duration: 23.3ms | Allocations: 2976)
  Rendered api/v1/products/index.json.jbuilder (Duration: 25.2ms | Allocations: 3081)
Completed 500 Internal Server Error in 35ms (ActiveRecord: 1.7ms | Allocations: 3799)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x00007fa5a10423f8 @_config=#< {}>, @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>, @view_renderer=#<ActionView::Renderer:0x00007fa5a1042380 @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>>, @current_template=nil, @_assigns={}, @_controller=nil, @view_flow=#<ActionView::OutputFlow:0x00007fa5a10422e0 @content={}>, @output_buffer=nil, @virtual_path=nil>):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price ActionController::Base.helpers.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:09:12 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 15.9ms | Allocations: 2181)
  Rendered common/_list.json.jbuilder (Duration: 23.5ms | Allocations: 2976)
  Rendered api/v1/products/index.json.jbuilder (Duration: 25.6ms | Allocations: 3081)
Completed 500 Internal Server Error in 37ms (ActiveRecord: 1.5ms | Allocations: 3766)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x00007fa5a10423f8 @_config=#< {}>, @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>, @view_renderer=#<ActionView::Renderer:0x00007fa5a1042380 @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>>, @current_template=nil, @_assigns={}, @_controller=nil, @view_flow=#<ActionView::OutputFlow:0x00007fa5a10422e0 @content={}>, @output_buffer=nil, @virtual_path=nil>):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price ActionController::Base.helpers.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:09:18 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 14.8ms | Allocations: 2247)
  Rendered common/_list.json.jbuilder (Duration: 30.1ms | Allocations: 4564)
  Rendered api/v1/products/index.json.jbuilder (Duration: 32.6ms | Allocations: 4692)
Completed 500 Internal Server Error in 64ms (ActiveRecord: 11.4ms | Allocations: 7729)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x00007fa5a10423f8 @_config=#< {}>, @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>, @view_renderer=#<ActionView::Renderer:0x00007fa5a1042380 @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>>, @current_template=nil, @_assigns={}, @_controller=nil, @view_flow=#<ActionView::OutputFlow:0x00007fa5a10422e0 @content={}>, @output_buffer=nil, @virtual_path=nil>):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price ActionController::Base.helpers.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:09:21 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 13.1ms | Allocations: 2181)
  Rendered common/_list.json.jbuilder (Duration: 20.2ms | Allocations: 2976)
  Rendered api/v1/products/index.json.jbuilder (Duration: 22.3ms | Allocations: 3081)
Completed 500 Internal Server Error in 32ms (ActiveRecord: 1.8ms | Allocations: 3799)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x00007fa5a10423f8 @_config=#< {}>, @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>, @view_renderer=#<ActionView::Renderer:0x00007fa5a1042380 @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>>, @current_template=nil, @_assigns={}, @_controller=nil, @view_flow=#<ActionView::OutputFlow:0x00007fa5a10422e0 @content={}>, @output_buffer=nil, @virtual_path=nil>):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price ActionController::Base.helpers.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:09:23 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 18.6ms | Allocations: 2181)
  Rendered common/_list.json.jbuilder (Duration: 27.0ms | Allocations: 2976)
  Rendered api/v1/products/index.json.jbuilder (Duration: 29.8ms | Allocations: 3082)
Completed 500 Internal Server Error in 39ms (ActiveRecord: 1.3ms | Allocations: 3767)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x00007fa5a10423f8 @_config=#< {}>, @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>, @view_renderer=#<ActionView::Renderer:0x00007fa5a1042380 @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>>, @current_template=nil, @_assigns={}, @_controller=nil, @view_flow=#<ActionView::OutputFlow:0x00007fa5a10422e0 @content={}>, @output_buffer=nil, @virtual_path=nil>):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price ActionController::Base.helpers.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:09:25 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 16.6ms | Allocations: 2181)
  Rendered common/_list.json.jbuilder (Duration: 24.9ms | Allocations: 2976)
  Rendered api/v1/products/index.json.jbuilder (Duration: 28.6ms | Allocations: 3081)
Completed 500 Internal Server Error in 38ms (ActiveRecord: 1.3ms | Allocations: 3766)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x00007fa5a10423f8 @_config=#< {}>, @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>, @view_renderer=#<ActionView::Renderer:0x00007fa5a1042380 @lookup_context=#<ActionView::LookupContext:0x00007fa5a10427e0 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x00007fa5a1042498 @paths=[]>>>, @current_template=nil, @_assigns={}, @_controller=nil, @view_flow=#<ActionView::OutputFlow:0x00007fa5a10422e0 @content={}>, @output_buffer=nil, @virtual_path=nil>):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price ActionController::Base.helpers.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:11:04 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 5.9ms | Allocations: 1021)
  Rendered common/_list.json.jbuilder (Duration: 19.6ms | Allocations: 2066)
  Rendered api/v1/products/index.json.jbuilder (Duration: 26.2ms | Allocations: 2388)
Completed 500 Internal Server Error in 40ms (ActiveRecord: 2.0ms | Allocations: 3489)


  
ActionView::Template::Error (undefined method `new' for PriceHelper:Module):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price PriceHelper.new.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:13:22 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 46.3ms | Allocations: 2301)
  Rendered common/_list.json.jbuilder (Duration: 58.9ms | Allocations: 3352)
  Rendered api/v1/products/index.json.jbuilder (Duration: 65.5ms | Allocations: 3923)
Completed 200 OK in 77ms (Views: 70.3ms | ActiveRecord: 1.6ms | Allocations: 5123)


Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:13:30 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 13.3ms | Allocations: 2210)
  Rendered common/_list.json.jbuilder (Duration: 31.6ms | Allocations: 4527)
  Rendered api/v1/products/index.json.jbuilder (Duration: 33.4ms | Allocations: 4655)
Completed 500 Internal Server Error in 65ms (ActiveRecord: 11.2ms | Allocations: 7693)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x000055ad8fdd53f0 @_config=#< {}>, @lookup_context=#<ActionView::LookupContext:0x000055ad8fdd6048 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x000055ad8fdd54e0 @paths=[]>>, @view_renderer=#<ActionView::Renderer:0x000055ad8fdd5350 @lookup_context=#<ActionView::LookupContext:0x000055ad8fdd6048 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x000055ad8fdd54e0 @paths=[]>>>, @current_template=nil, @_assigns={}, @_controller=nil, @view_flow=#<ActionView::OutputFlow:0x000055ad8fdd5300 @content={}>, @output_buffer=nil, @virtual_path=nil>):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price ApplicationController.helpers.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:13:33 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 12.4ms | Allocations: 2097)
  Rendered common/_list.json.jbuilder (Duration: 19.7ms | Allocations: 2892)
  Rendered api/v1/products/index.json.jbuilder (Duration: 21.7ms | Allocations: 2997)
Completed 500 Internal Server Error in 31ms (ActiveRecord: 2.1ms | Allocations: 3715)


  
ActionView::Template::Error (undefined method `readable_price' for #<ActionView::Base:0x000055ad8fdd53f0 @_config=#< {}>, @lookup_context=#<ActionView::LookupContext:0x000055ad8fdd6048 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x000055ad8fdd54e0 @paths=[]>>, @view_renderer=#<ActionView::Renderer:0x000055ad8fdd5350 @lookup_context=#<ActionView::LookupContext:0x000055ad8fdd6048 @details_key=nil, @digest_cache=nil, @cache=true, @prefixes=[], @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}, @view_paths=#<ActionView::PathSet:0x000055ad8fdd54e0 @paths=[]>>>, @current_template=nil, @_assigns={}, @_controller=nil, @view_flow=#<ActionView::OutputFlow:0x000055ad8fdd5300 @content={}>, @output_buffer=nil, @virtual_path=nil>):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price ApplicationController.helpers.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:4
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/products/index.json.jbuilder:1
app/controllers/api/v1/products_controller.rb:15:in `index'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/products?currency=usd" for 172.26.0.1 at 2022-01-15 17:13:59 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [6 times] (Duration: 6.5ms | Allocations: 1024)
  Rendered common/_list.json.jbuilder (Duration: 26.4ms | Allocations: 3343)
  Rendered api/v1/products/index.json.jbuilder (Duration: 28.6ms | Allocations: 3716)
Completed 200 OK in 57ms (Views: 25.5ms | ActiveRecord: 11.4ms | Allocations: 6777)


Started POST "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 17:47:39 +0000
  
ActionController::RoutingError (No route matches [POST] "/api/v1/products/1"):
  
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 17:47:50 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"id"=>"1"}
Completed 500 Internal Server Error in 7ms (Allocations: 239)


  
SyntaxError (/home/app/reedsy-challenge/app/models/product.rb:17: syntax error, unexpected end-of-input, expecting `end'):
  
app/models/product.rb:17: syntax error, unexpected end-of-input, expecting `end'
app/models/product.rb:17: syntax error, unexpected end-of-input, expecting `end'
app/controllers/api/v1/products_controller.rb:53:in `set_product'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 17:48:01 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"id"=>"1"}
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:53:in `set_product'
Completed 400 Bad Request in 65ms (ActiveRecord: 14.3ms | Allocations: 7065)


  
ActionController::ParameterMissing (param is missing or the value is empty: product):
  
app/controllers/api/v1/products_controller.rb:59:in `product_params'
app/controllers/api/v1/products_controller.rb:38:in `update'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 17:48:42 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"name"=>"potato"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:53:in `set_product'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:38:in `update'
  [1m[36mProduct Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:38:in `update'
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "name" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["name", "potato"], ["updated_at", "2022-01-15 17:48:43.086986"], ["id", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:38:in `update'
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:38:in `update'
Completed 200 OK in 94ms (Views: 0.5ms | ActiveRecord: 8.4ms | Allocations: 4770)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 17:48:57 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"name"=>nil}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:53:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:38:in `update'
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:38:in `update'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:38:in `update'
Completed 422 Unprocessable Entity in 25ms (Views: 1.4ms | ActiveRecord: 2.2ms | Allocations: 3321)


  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 17:57:07 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"name"=>nil}, "id"=>"1"}
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
[31mUnpermitted parameter: :name. Context: { controller: Api::V1::ProductsController, action: update, request: #<ActionDispatch::Request:0x00007fa5a12bad38>, params: {"product"=>{"name"=>nil}, "format"=>"json", "controller"=>"api/v1/products", "action"=>"update", "id"=>"1"} }[0m
[31mUnpermitted parameter: :name. Context: { controller: Api::V1::ProductsController, action: update, request: #<ActionDispatch::Request:0x00007fa5a12bad38>, params: {"product"=>{"name"=>nil}, "format"=>"json", "controller"=>"api/v1/products", "action"=>"update", "id"=>"1"} }[0m
[31mUnpermitted parameter: :name. Context: { controller: Api::V1::ProductsController, action: update, request: #<ActionDispatch::Request:0x00007fa5a12bad38>, params: {"product"=>{"name"=>nil}, "format"=>"json", "controller"=>"api/v1/products", "action"=>"update", "id"=>"1"} }[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mProduct Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 200 OK in 15462ms (Views: 2.1ms | ActiveRecord: 19.6ms | Allocations: 16627)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 17:57:30 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>nil}, "id"=>"1"}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
Completed 500 Internal Server Error in 61680ms (ActiveRecord: 0.8ms | Allocations: 10147)


  
ActiveModel::UnknownAttributeError (unknown attribute 'currency' for Product.):
  
app/controllers/api/v1/products_controller.rb:39:in `update'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:04:35 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>nil}, "id"=>"1"}
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
Completed 500 Internal Server Error in 38ms (ActiveRecord: 16.5ms | Allocations: 5087)


  
Money::Currency::UnknownCurrency (Unknown currency ''):
  
app/controllers/api/v1/products_controller.rb:58:in `new'
app/controllers/api/v1/products_controller.rb:58:in `set_updated_price'
app/controllers/api/v1/products_controller.rb:38:in `update'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:04:46 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"name"=>"hola"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
[31mUnpermitted parameter: :name. Context: { controller: Api::V1::ProductsController, action: update, request: #<ActionDispatch::Request:0x00007fa5a09d9f98>, params: {"product"=>{"name"=>"hola"}, "format"=>"json", "controller"=>"api/v1/products", "action"=>"update", "id"=>"1"} }[0m
[31mUnpermitted parameter: :name. Context: { controller: Api::V1::ProductsController, action: update, request: #<ActionDispatch::Request:0x00007fa5a09d9f98>, params: {"product"=>{"name"=>"hola"}, "format"=>"json", "controller"=>"api/v1/products", "action"=>"update", "id"=>"1"} }[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.7ms | Allocations: 845)


  
Money::Currency::UnknownCurrency (Unknown currency ''):
  
app/controllers/api/v1/products_controller.rb:58:in `new'
app/controllers/api/v1/products_controller.rb:58:in `set_updated_price'
app/controllers/api/v1/products_controller.rb:38:in `update'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:04:55 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"name"=>"hola"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mProduct Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 2.8ms | Allocations: 358)
  Rendered api/v1/products/update.json.jbuilder (Duration: 8.6ms | Allocations: 718)
Completed 200 OK in 52ms (Views: 13.4ms | ActiveRecord: 14.6ms | Allocations: 6842)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:05:14 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"name"=>"hola"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.2ms | Allocations: 170)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.1ms | Allocations: 312)
Completed 200 OK in 31ms (Views: 6.1ms | ActiveRecord: 2.6ms | Allocations: 3416)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:05:22 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"name"=>nil}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.8ms | Allocations: 170)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.9ms | Allocations: 312)
Completed 200 OK in 37ms (Views: 12.8ms | ActiveRecord: 2.6ms | Allocations: 3185)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:05:25 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"name"=>nil}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.6ms | Allocations: 170)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.3ms | Allocations: 312)
Completed 200 OK in 32ms (Views: 7.3ms | ActiveRecord: 2.7ms | Allocations: 3191)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:05:44 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"name"=>nil}, "id"=>"1"}
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 39ms (Views: 1.1ms | ActiveRecord: 10.2ms | Allocations: 5976)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:06:54 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 7.8ms | Allocations: 3187)


  
ActiveModel::UnknownAttributeError (unknown attribute '_update_price' for Product.):
  
app/controllers/api/v1/products_controller.rb:39:in `update'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:07:10 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
Completed 500 Internal Server Error in 21ms (ActiveRecord: 9.2ms | Allocations: 3210)


  
ActiveModel::UnknownAttributeError (unknown attribute 'update_price' for Product.):
  
app/controllers/api/v1/products_controller.rb:39:in `update'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:07:41 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
Completed 500 Internal Server Error in 22ms (ActiveRecord: 6.2ms | Allocations: 3210)


  
ActiveModel::UnknownAttributeError (unknown attribute 'update_price' for Product.):
  
app/controllers/api/v1/products_controller.rb:39:in `update'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:07:51 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.5ms | Allocations: 733)


  
ActiveModel::UnknownAttributeError (unknown attribute 'update_price' for Product.):
  
app/controllers/api/v1/products_controller.rb:39:in `update'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:08:26 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:20:in `_update_price='
  [1m[36mProduct Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:20:in `_update_price='
  [1m[36mProduct Update (1.0ms)[0m  [1m[33mUPDATE "products" SET "price_cents" = $1, "price_currency" = $2, "updated_at" = $3 WHERE "products"."id" = $4[0m  [["price_cents", 10], ["price_currency", "EUR"], ["updated_at", "2022-01-15 18:08:27.268345"], ["id", 1]]
  ↳ app/models/product.rb:20:in `_update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (6.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.9ms | Allocations: 229)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.6ms | Allocations: 410)
Completed 200 OK in 92ms (Views: 9.9ms | ActiveRecord: 22.5ms | Allocations: 8232)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:09:43 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
[31mUnpermitted parameter: :price. Context: { controller: Api::V1::ProductsController, action: update, request: #<ActionDispatch::Request:0x00007fa5a0c01528>, params: {"product"=>{"currency"=>"eur", "price"=>"10"}, "format"=>"json", "controller"=>"api/v1/products", "action"=>"update", "id"=>"1"} }[0m
[31mUnpermitted parameter: :price. Context: { controller: Api::V1::ProductsController, action: update, request: #<ActionDispatch::Request:0x00007fa5a0c01528>, params: {"product"=>{"currency"=>"eur", "price"=>"10"}, "format"=>"json", "controller"=>"api/v1/products", "action"=>"update", "id"=>"1"} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:20:in `_update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:20:in `_update_price='
  [1m[36mProduct Update (1.0ms)[0m  [1m[33mUPDATE "products" SET "price_cents" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["price_cents", 0], ["updated_at", "2022-01-15 18:09:44.208095"], ["id", 1]]
  ↳ app/models/product.rb:20:in `_update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.9ms | Allocations: 229)
  Rendered api/v1/products/update.json.jbuilder (Duration: 4.4ms | Allocations: 410)
Completed 200 OK in 66ms (Views: 9.8ms | ActiveRecord: 12.8ms | Allocations: 8269)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:09:57 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
[31mUnpermitted parameter: :price. Context: { controller: Api::V1::ProductsController, action: update, request: #<ActionDispatch::Request:0x00007fa5a1074c40>, params: {"product"=>{"currency"=>"eur", "price"=>"10"}, "format"=>"json", "controller"=>"api/v1/products", "action"=>"update", "id"=>"1"} }[0m
[31mUnpermitted parameter: :price. Context: { controller: Api::V1::ProductsController, action: update, request: #<ActionDispatch::Request:0x00007fa5a1074c40>, params: {"product"=>{"currency"=>"eur", "price"=>"10"}, "format"=>"json", "controller"=>"api/v1/products", "action"=>"update", "id"=>"1"} }[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:20:in `_update_price='
  [1m[36mProduct Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:20:in `_update_price='
  [1m[36mCACHE Product Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 17.2ms | Allocations: 129)
  Rendered api/v1/products/update.json.jbuilder (Duration: 22.7ms | Allocations: 271)
Completed 200 OK in 48389ms (Views: 36.0ms | ActiveRecord: 6.5ms | Allocations: 8543)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:10:48 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:20:in `_update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:20:in `_update_price='
  [1m[36mProduct Update (1.0ms)[0m  [1m[33mUPDATE "products" SET "price_cents" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["price_cents", 10], ["updated_at", "2022-01-15 18:10:48.965439"], ["id", 1]]
  ↳ app/models/product.rb:20:in `_update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.8ms | Allocations: 229)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.5ms | Allocations: 410)
Completed 200 OK in 55ms (Views: 6.2ms | ActiveRecord: 13.1ms | Allocations: 8183)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:19:56 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (2.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:23:in `_update_price='
  [1m[36mProduct Exists? (5.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:23:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.2ms | Allocations: 229)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.9ms | Allocations: 410)
Completed 200 OK in 90ms (Views: 8.3ms | ActiveRecord: 28.0ms | Allocations: 9432)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:19:59 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.9ms | Allocations: 131)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.0ms | Allocations: 273)
Completed 200 OK in 34ms (Views: 6.3ms | ActiveRecord: 2.8ms | Allocations: 3476)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:20:00 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.5ms | Allocations: 131)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.9ms | Allocations: 273)
Completed 200 OK in 33ms (Views: 7.7ms | ActiveRecord: 2.7ms | Allocations: 3235)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:20:02 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.4ms | Allocations: 131)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.0ms | Allocations: 273)
Completed 200 OK in 30ms (Views: 5.0ms | ActiveRecord: 2.9ms | Allocations: 3238)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:20:42 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mProduct Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.8ms | Allocations: 182)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.3ms | Allocations: 356)
Completed 200 OK in 20607ms (Views: 7.6ms | ActiveRecord: 4.1ms | Allocations: 12750)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:21:32 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:27:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:27:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.6ms | Allocations: 231)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.0ms | Allocations: 412)
Completed 200 OK in 58ms (Views: 7.5ms | ActiveRecord: 16.7ms | Allocations: 7201)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:21:33 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:27:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:27:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.8ms | Allocations: 131)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.4ms | Allocations: 273)
Completed 200 OK in 40ms (Views: 6.9ms | ActiveRecord: 1.9ms | Allocations: 4181)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:21:50 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.8ms | Allocations: 231)
  Rendered api/v1/products/update.json.jbuilder (Duration: 4.1ms | Allocations: 412)
Completed 200 OK in 62ms (Views: 10.9ms | ActiveRecord: 14.7ms | Allocations: 6401)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:22:36 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
Completed 500 Internal Server Error in 24ms (ActiveRecord: 9.1ms | Allocations: 3193)


  
ArgumentError (wrong number of arguments (given 0, expected 1)):
  
app/models/product.rb:27:in `rescue in _update_price='
app/models/product.rb:21:in `_update_price='
app/controllers/api/v1/products_controller.rb:39:in `update'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:22:46 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:27:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:27:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.8ms | Allocations: 231)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.5ms | Allocations: 412)
Completed 200 OK in 60ms (Views: 7.7ms | ActiveRecord: 9.7ms | Allocations: 7337)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:23:00 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ (eval):1:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ (eval):1:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ (eval):2:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.0ms | Allocations: 231)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.3ms | Allocations: 412)
Completed 200 OK in 148100ms (Views: 6.7ms | ActiveRecord: 14.4ms | Allocations: 20225)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:25:37 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"-10"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mProduct Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.9ms | Allocations: 131)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.0ms | Allocations: 273)
Completed 200 OK in 36ms (Views: 6.1ms | ActiveRecord: 3.2ms | Allocations: 4403)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:25:37 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"-10"}, "id"=>"1"}
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.7ms | Allocations: 131)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.9ms | Allocations: 273)
Completed 200 OK in 37ms (Views: 6.4ms | ActiveRecord: 2.9ms | Allocations: 4152)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:25:38 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"-10"}, "id"=>"1"}
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.5ms | Allocations: 131)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.4ms | Allocations: 273)
Completed 200 OK in 35ms (Views: 5.7ms | ActiveRecord: 2.9ms | Allocations: 4157)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:25:48 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.6ms | Allocations: 131)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.7ms | Allocations: 273)
Completed 200 OK in 41ms (Views: 6.2ms | ActiveRecord: 2.6ms | Allocations: 4152)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:25:55 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Hoodie"], ["id", 6], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ (eval):1:in `_update_price='
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ (eval):1:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ (eval):1:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ (eval):1:in `_update_price='
  [1m[36mCACHE Product Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 292064ms (Views: 7.0ms | ActiveRecord: 3.4ms | Allocations: 22296)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:30:51 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.9ms | Allocations: 145)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.7ms | Allocations: 300)
Completed 200 OK in 43ms (Views: 6.2ms | ActiveRecord: 3.0ms | Allocations: 4276)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:30:53 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.7ms | Allocations: 131)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.8ms | Allocations: 273)
Completed 200 OK in 39ms (Views: 6.2ms | ActiveRecord: 2.7ms | Allocations: 4152)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:30:54 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.1ms | Allocations: 131)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.2ms | Allocations: 273)
Completed 200 OK in 38ms (Views: 6.7ms | ActiveRecord: 2.8ms | Allocations: 4154)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:31:02 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mCACHE Product Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ (eval):1:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 2.7ms | Allocations: 182)
  Rendered api/v1/products/update.json.jbuilder (Duration: 6.5ms | Allocations: 356)
Completed 200 OK in 37726ms (Views: 12.3ms | ActiveRecord: 3.2ms | Allocations: 20677)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:31:42 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eurrrr", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:28:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.8ms | Allocations: 152)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.3ms | Allocations: 323)
Completed 200 OK in 35576ms (Views: 6.8ms | ActiveRecord: 3.8ms | Allocations: 15481)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:32:23 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:23:in `_update_price='
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:23:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 32ms (Views: 1.2ms | ActiveRecord: 1.8ms | Allocations: 4239)


  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Hoodie"], ["id", 6], ["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Hoodie"], ["id", 6], ["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Hoodie"], ["id", 6], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Hoodie"], ["id", 6], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:48:05 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:24:in `_update_price='
  [1m[36mProduct Exists? (4.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:24:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 85ms (Views: 2.4ms | ActiveRecord: 23.8ms | Allocations: 9131)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:49:16 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:24:in `_update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:24:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 199078ms (Views: 2.3ms | ActiveRecord: 3.1ms | Allocations: 18709)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:52:38 +0000
  
NameError (undefined local variable or method `invalid_currency' for Product:Class):
  
app/models/product.rb:6:in `<class:Product>'
app/models/product.rb:3:in `<main>'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:52:54 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 47ms (Views: 1.1ms | ActiveRecord: 13.2ms | Allocations: 7125)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:53:07 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 51ms (Views: 1.1ms | ActiveRecord: 10.6ms | Allocations: 7032)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:53:09 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 35ms (Views: 0.9ms | ActiveRecord: 3.0ms | Allocations: 4188)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:53:10 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 39ms (Views: 1.1ms | ActiveRecord: 2.7ms | Allocations: 4182)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:53:15 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 500 Internal Server Error in 39ms (ActiveRecord: 8.8ms | Allocations: 6197)


  
NoMethodError (undefined method `validate' for true:TrueClass):
  
app/models/product.rb:26:in `_update_price='
app/controllers/api/v1/products_controller.rb:39:in `update'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:53:16 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 500 Internal Server Error in 29ms (ActiveRecord: 2.5ms | Allocations: 3536)


  
NoMethodError (undefined method `validate' for true:TrueClass):
  
app/models/product.rb:26:in `_update_price='
app/controllers/api/v1/products_controller.rb:39:in `update'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:53:19 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 500 Internal Server Error in 29ms (ActiveRecord: 2.5ms | Allocations: 3531)


  
NoMethodError (undefined method `validate' for true:TrueClass):
  
app/models/product.rb:26:in `_update_price='
app/controllers/api/v1/products_controller.rb:39:in `update'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:53:34 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 500 Internal Server Error in 53ms (ActiveRecord: 13.4ms | Allocations: 6230)


  
NoMethodError (undefined method `validate' for true:TrueClass):
  
app/models/product.rb:26:in `_update_price='
app/controllers/api/v1/products_controller.rb:39:in `update'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:54:54 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 49ms (Views: 1.4ms | ActiveRecord: 8.5ms | Allocations: 7077)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:55:06 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 47ms (Views: 1.3ms | ActiveRecord: 8.7ms | Allocations: 7037)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:55:08 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 30ms (Views: 1.1ms | ActiveRecord: 1.7ms | Allocations: 4160)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:55:14 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 48ms (Views: 1.1ms | ActiveRecord: 9.4ms | Allocations: 7038)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:55:22 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mCACHE Product Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 104ms (Views: 3.6ms | ActiveRecord: 13.4ms | Allocations: 7026)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:55:42 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mCACHE Product Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 99ms (Views: 2.4ms | ActiveRecord: 12.9ms | Allocations: 7028)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:55:52 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mCACHE Product Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 47ms (Views: 2.8ms | ActiveRecord: 2.8ms | Allocations: 4168)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:55:58 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:26:in `_update_price='
  [1m[36mCACHE Product Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "potato"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 50ms (Views: 2.9ms | ActiveRecord: 2.5ms | Allocations: 4165)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:56:03 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eu333r", "price_cents"=>"1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:30:in `rescue in _update_price='
  [1m[36mProduct Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:30:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 2257ms (Views: 0.7ms | ActiveRecord: 3.7ms | Allocations: 11512)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:56:14 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eu333r", "price_cents"=>"1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:30:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:30:in `rescue in _update_price='
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "name" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["name", ".."], ["updated_at", "2022-01-15 18:56:14.803580"], ["id", 1]]
  ↳ app/models/product.rb:30:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.1ms | Allocations: 231)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.1ms | Allocations: 412)
Completed 200 OK in 58ms (Views: 7.1ms | ActiveRecord: 12.1ms | Allocations: 8133)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:56:24 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eu333r", "price_cents"=>"1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:30:in `rescue in _update_price='
  [1m[36mProduct Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:30:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 58ms (Views: 1.4ms | ActiveRecord: 11.7ms | Allocations: 6641)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 18:57:19 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eu333r", "price_cents"=>"1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:31:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:31:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 47ms (Views: 0.3ms | ActiveRecord: 9.6ms | Allocations: 6605)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 19:34:06 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"1000"}, "id"=>"1"}
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Update (1.3ms)[0m  [1m[33mUPDATE "products" SET "price_cents" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["price_cents", 1000], ["updated_at", "2022-01-15 19:34:06.638120"], ["id", 1]]
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.3ms | Allocations: 229)
  Rendered api/v1/products/update.json.jbuilder (Duration: 4.4ms | Allocations: 410)
Completed 200 OK in 90ms (Views: 9.3ms | ActiveRecord: 25.6ms | Allocations: 10243)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 19:43:11 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 64ms (Views: 1.3ms | ActiveRecord: 20.3ms | Allocations: 9004)


  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "price_cents" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["price_cents", 0], ["updated_at", "2022-01-15 19:44:28.488113"], ["id", 1]]
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 20:11:58 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-1000"}, "id"=>"1"}
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 60ms (Views: 2.0ms | ActiveRecord: 20.4ms | Allocations: 6414)


Started PUT "/api/v1/products/1" for 172.26.0.1 at 2022-01-15 20:18:21 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"100"}, "id"=>"1"}
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Update (1.1ms)[0m  [1m[33mUPDATE "products" SET "price_cents" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["price_cents", 100], ["updated_at", "2022-01-15 20:18:21.222428"], ["id", 1]]
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", ".."], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.7ms | Allocations: 229)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.7ms | Allocations: 410)
Completed 200 OK in 71ms (Views: 7.2ms | ActiveRecord: 23.9ms | Allocations: 7554)


  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (304.1ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" integer NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'EUR' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-15 20:57:02.942141"], ["updated_at", "2022-01-15 20:57:02.942141"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy Mug"], ["code", 0], ["price_cents", 600], ["price_currency", "EUR"], ["created_at", "2022-01-15 20:57:06.680187"], ["updated_at", "2022-01-15 20:57:06.680187"]]
  [1m[36mTRANSACTION (9.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy T-shirt"], ["code", 1], ["price_cents", 1500], ["price_currency", "EUR"], ["created_at", "2022-01-15 20:57:06.704047"], ["updated_at", "2022-01-15 20:57:06.704047"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy Hoodie"], ["code", 2], ["price_cents", 2000], ["price_currency", "EUR"], ["created_at", "2022-01-15 20:57:06.720168"], ["updated_at", "2022-01-15 20:57:06.720168"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
Started PUT "/api/v1/products/1" for 172.31.0.1 at 2022-01-16 16:38:59 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"100"}, "id"=>"1"}
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Update (1.7ms)[0m  [1m[33mUPDATE "products" SET "price_cents" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["price_cents", 100], ["updated_at", "2022-01-16 16:39:00.213382"], ["id", 1]]
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 4.5ms | Allocations: 345)
  Rendered api/v1/products/update.json.jbuilder (Duration: 17.3ms | Allocations: 978)
Completed 200 OK in 193ms (Views: 64.0ms | ActiveRecord: 23.9ms | Allocations: 15522)


Started PUT "/api/v1/products/1" for 172.31.0.1 at 2022-01-16 16:39:07 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-100"}, "id"=>"1"}
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mCACHE Product Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
Completed 422 Unprocessable Entity in 40ms (Views: 1.5ms | ActiveRecord: 3.5ms | Allocations: 4768)


  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started PUT "/api/v1/products/1" for 172.31.0.1 at 2022-01-16 16:59:42 +0000
Error occurred while parsing request parameters.
Contents:

{
	"product": {
		"currency": "eur",
	}
}
Processing by Api::V1::ProductsController#update as */*
Completed 400 Bad Request in 1ms (Allocations: 197)


  
ActionDispatch::Http::Parameters::ParseError (Error occurred while parsing request parameters):
  
app/controllers/api/v1/products_controller.rb:54:in `set_product'
Started PUT "/api/v1/products/1" for 172.31.0.1 at 2022-01-16 17:00:12 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur"}, "id"=>"1"}
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Exists? (8.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Update (1.4ms)[0m  [1m[33mUPDATE "products" SET "price_cents" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["price_cents", 0], ["updated_at", "2022-01-16 17:04:01.045091"], ["id", 1]]
  ↳ app/models/product.rb:27:in `_update_price='
  [1m[36mProduct Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (7.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 4.5ms | Allocations: 289)
  Rendered api/v1/products/update.json.jbuilder (Duration: 14.0ms | Allocations: 648)
Completed 200 OK in 228579ms (Views: 20.3ms | ActiveRecord: 39.8ms | Allocations: 30333)


Started PUT "/api/v1/products/1" for 172.31.0.1 at 2022-01-16 17:04:04 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur"}, "id"=>"1"}
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:54:in `set_product'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:28:in `_update_price='
  [1m[36mProduct Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:28:in `_update_price='
  [1m[36mCACHE Product Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:39:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.7ms | Allocations: 229)
  Rendered api/v1/products/update.json.jbuilder (Duration: 3.2ms | Allocations: 411)
Completed 200 OK in 66ms (Views: 8.1ms | ActiveRecord: 19.2ms | Allocations: 7440)


  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" = $1[0m  [["code", 0]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (308.9ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" integer NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'EUR' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-18 14:57:22.876315"], ["updated_at", "2022-01-18 14:57:22.876315"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy Mug"], ["code", 0], ["price_cents", 600], ["price_currency", "EUR"], ["created_at", "2022-01-18 14:57:25.966428"], ["updated_at", "2022-01-18 14:57:25.966428"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy T-shirt"], ["code", 1], ["price_cents", 1500], ["price_currency", "EUR"], ["created_at", "2022-01-18 14:57:25.979841"], ["updated_at", "2022-01-18 14:57:25.979841"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy Hoodie"], ["code", 2], ["price_cents", 2000], ["price_currency", "EUR"], ["created_at", "2022-01-18 14:57:25.992757"], ["updated_at", "2022-01-18 14:57:25.992757"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/products" for 172.24.0.1 at 2022-01-18 14:59:25 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 25.3ms | Allocations: 1987)
  Rendered common/_list.json.jbuilder (Duration: 44.3ms | Allocations: 6469)
  Rendered api/v1/products/index.json.jbuilder (Duration: 59.7ms | Allocations: 7306)
Completed 200 OK in 154ms (Views: 128.0ms | ActiveRecord: 8.9ms | Allocations: 13625)


Started GET "/api/v1/products?currency=usd" for 172.24.0.1 at 2022-01-18 14:59:38 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.3ms | Allocations: 565)
  Rendered common/_list.json.jbuilder (Duration: 10.4ms | Allocations: 1345)
  Rendered api/v1/products/index.json.jbuilder (Duration: 12.0ms | Allocations: 1584)
Completed 200 OK in 21ms (Views: 13.9ms | ActiveRecord: 1.4ms | Allocations: 2396)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:01:01 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie"]}
Completed 500 Internal Server Error in 27ms (ActiveRecord: 0.0ms | Allocations: 2429)


  
NoMethodError (undefined method `status' for #<NoMethodError: undefined method `valid_product_codes?' for NonPersistent::Basket:Class>):
  
app/lib/error/error_handler.rb:20:in `render_error'
app/lib/error/error_handler.rb:8:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:01:26 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie"]}
Completed 500 Internal Server Error in 23ms (ActiveRecord: 2.1ms | Allocations: 3701)


  
NoMethodError (undefined method `valid_product_codes?' for NonPersistent::Basket:Class):
  
app/models/non_persistent/basket.rb:20:in `from_product_codes'
app/controllers/api/v1/basket_controller.rb:20:in `set_basket'
app/controllers/api/v1/basket_controller.rb:12:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:01:49 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie"]}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:21:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered api/v1/basket/check.json.jbuilder (Duration: 36.4ms | Allocations: 2238)
Completed 500 Internal Server Error in 156ms (ActiveRecord: 8.6ms | Allocations: 8142)


  
ActionView::Template::Error (undefined method `products' for #<NonPersistent::Basket:0x00005596500fcf80 @items=[#<NonPersistent::BasketItem:0x00005596500fd160 @product=#<Product id: 1, name: "Reedsy Mug", code: "mug", price_cents: 600, price_currency: "EUR", created_at: "2022-01-18 14:57:25.966428000 +0000", updated_at: "2022-01-18 14:57:25.966428000 +0000">, @amount=1>, #<NonPersistent::BasketItem:0x00005596500fd048 @product=#<Product id: 3, name: "Reedsy Hoodie", code: "hoodie", price_cents: 2000, price_currency: "EUR", created_at: "2022-01-18 14:57:25.992757000 +0000", updated_at: "2022-01-18 14:57:25.992757000 +0000">, @amount=1>]>):
    1: json.total ApplicationController.helpers.readable_price price: @basket.total_price(currency: @currency), currency: @currency
    2: json.partial! 'common/list',
    3:               locals: {
    4:                 resources: @basket.products,
    5:                 resource_name: :product,
    6:                 resource_template: 'api/v1/products/product',
    7:               }
  
app/views/api/v1/basket/check.json.jbuilder:4
app/controllers/api/v1/basket_controller.rb:13:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:03:05 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie"]}
  [1m[36mProduct Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:21:in `map'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:21:in `map'
  [1m[36mCACHE Product Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:21:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered api/v1/basket/check.json.jbuilder (Duration: 14.3ms | Allocations: 961)
Completed 500 Internal Server Error in 24922ms (ActiveRecord: 2.4ms | Allocations: 18247)


  
ActionView::Template::Error (undefined method `products' for #<NonPersistent::Basket:0x00007fcf207c0140 @items=[#<NonPersistent::BasketItem:0x00007fcf207c01e0 @product=#<Product id: 1, name: "Reedsy Mug", code: "mug", price_cents: 600, price_currency: "EUR", created_at: "2022-01-18 14:57:25.966428000 +0000", updated_at: "2022-01-18 14:57:25.966428000 +0000">, @amount=1>, #<NonPersistent::BasketItem:0x00007fcf207c0190 @product=#<Product id: 3, name: "Reedsy Hoodie", code: "hoodie", price_cents: 2000, price_currency: "EUR", created_at: "2022-01-18 14:57:25.992757000 +0000", updated_at: "2022-01-18 14:57:25.992757000 +0000">, @amount=1>]>):
    1: json.total ApplicationController.helpers.readable_price price: @basket.total_price(currency: @currency), currency: @currency
    2: json.partial! 'common/list',
    3:               locals: {
    4:                 resources: @basket.products,
    5:                 resource_name: :product,
    6:                 resource_template: 'api/v1/products/product',
    7:               }
  
app/views/api/v1/basket/check.json.jbuilder:4
app/controllers/api/v1/basket_controller.rb:13:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:03:54 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie"]}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:21:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered api/v1/basket/check.json.jbuilder (Duration: 15805.3ms | Allocations: 7204)
Completed 500 Internal Server Error in 15829ms (ActiveRecord: 1.5ms | Allocations: 8607)


  
ActionView::Template::Error (undefined method `products' for #<NonPersistent::Basket:0x000055965031a0b0 @items=[#<NonPersistent::BasketItem:0x000055965031a178 @product=#<Product id: 1, name: "Reedsy Mug", code: "mug", price_cents: 600, price_currency: "EUR", created_at: "2022-01-18 14:57:25.966428000 +0000", updated_at: "2022-01-18 14:57:25.966428000 +0000">, @amount=1>, #<NonPersistent::BasketItem:0x000055965031a128 @product=#<Product id: 3, name: "Reedsy Hoodie", code: "hoodie", price_cents: 2000, price_currency: "EUR", created_at: "2022-01-18 14:57:25.992757000 +0000", updated_at: "2022-01-18 14:57:25.992757000 +0000">, @amount=1>]>):
    1: json.total ApplicationController.helpers.readable_price price: @basket.total_price(currency: @currency), currency: @currency
    2: json.partial! 'common/list',
    3:               locals: {
    4:                 resources: @basket.items,
    5:                 resource_name: :product,
    6:                 resource_template: 'api/v1/products/product',
    7:               }
  
app/views/api/v1/basket/check.json.jbuilder:4
app/controllers/api/v1/basket_controller.rb:13:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:04:12 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie"]}
  [1m[36mProduct Count (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:21:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered common/_list.json.jbuilder (Duration: 13.8ms | Allocations: 3170)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 21.6ms | Allocations: 3690)
Completed 500 Internal Server Error in 48ms (ActiveRecord: 4.4ms | Allocations: 5602)


  
ActionView::Template::Error (undefined local variable or method `total' for #<ActionView::Base:0x00000000011d50>):
     7: # - resource_template: JBuilder partial to render resources
     8: # - resource_name: local variable name for resource partial
     9: #
    10: json.total total if total
    11: json.page page if page
    12: json.page_size page_size if page_size
    13: json.data do
  
app/views/common/_list.json.jbuilder:10
app/views/api/v1/basket/check.json.jbuilder:2
app/controllers/api/v1/basket_controller.rb:13:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:05:32 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie"]}
  [1m[36mProduct Count (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:21:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered collection of api/v1/products/_product.json.jbuilder [2 times] (Duration: 5.4ms | Allocations: 837)
  Rendered common/_list.json.jbuilder (Duration: 11.0ms | Allocations: 1107)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 22.6ms | Allocations: 1631)
Completed 500 Internal Server Error in 49ms (ActiveRecord: 3.1ms | Allocations: 3542)


  
ActionView::Template::Error (undefined method `id' for #<NonPersistent::BasketItem:0x00007fcf2065f800 @product=#<Product id: 1, name: "Reedsy Mug", code: "mug", price_cents: 600, price_currency: "EUR", created_at: "2022-01-18 14:57:25.966428000 +0000", updated_at: "2022-01-18 14:57:25.966428000 +0000">, @amount=1>):
    1: json.id product.id
    2: json.name product.name
    3: json.code product.code
    4: json.price ApplicationController.helpers.readable_price price: product.price, currency: @currency
  
app/views/api/v1/products/_product.json.jbuilder:1
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/basket/check.json.jbuilder:2
app/controllers/api/v1/basket_controller.rb:13:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:06:03 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie"]}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:21:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered collection of api/v1/products/_product.json.jbuilder [2 times] (Duration: 3.3ms | Allocations: 351)
  Rendered common/_list.json.jbuilder (Duration: 8.1ms | Allocations: 620)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 16.5ms | Allocations: 1253)
Completed 200 OK in 39ms (Views: 20.8ms | ActiveRecord: 1.9ms | Allocations: 3189)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:06:17 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:21:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered collection of api/v1/products/_product.json.jbuilder [2 times] (Duration: 1.6ms | Allocations: 272)
  Rendered common/_list.json.jbuilder (Duration: 2.9ms | Allocations: 382)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 5.5ms | Allocations: 720)
Completed 200 OK in 19ms (Views: 7.9ms | ActiveRecord: 1.5ms | Allocations: 2247)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:08:14 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:21:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.6ms | Allocations: 194)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.4ms | Allocations: 125)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 6.6ms | Allocations: 664)
  Rendered common/_list.json.jbuilder (Duration: 9.7ms | Allocations: 938)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 14.8ms | Allocations: 1579)
Completed 200 OK in 28ms (Views: 18.0ms | ActiveRecord: 1.2ms | Allocations: 3397)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:09:17 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:21:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 2.3ms | Allocations: 195)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.4ms | Allocations: 126)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 10.0ms | Allocations: 686)
  Rendered common/_list.json.jbuilder (Duration: 14.7ms | Allocations: 953)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 21.0ms | Allocations: 1607)
Completed 200 OK in 39ms (Views: 26.8ms | ActiveRecord: 1.8ms | Allocations: 3566)


Started GET "/api/v1/basket/check?product_codes[]=mrrreug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:09:37 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mrrreug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
Completed 500 Internal Server Error in 40ms (ActiveRecord: 0.7ms | Allocations: 3156)


  
Error::Model::Basket::InvalidProductCodesError (test):
  
app/models/non_persistent/basket.rb:23:in `from_product_codes'
app/controllers/api/v1/basket_controller.rb:20:in `set_basket'
app/controllers/api/v1/basket_controller.rb:12:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=mrrreug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:09:52 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mrrreug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
Completed 500 Internal Server Error in 56ms (ActiveRecord: 3.3ms | Allocations: 5361)


  
NoMethodError (undefined method `template' for #<Api::V1::BasketController:0x000000000158d8>):
  
app/lib/error/error_handler.rb:19:in `render_error'
app/lib/error/error_handler.rb:8:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=mrrreug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:10:13 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mrrreug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 15.5ms | Allocations: 3146)
Completed 500 Internal Server Error in 58ms (ActiveRecord: 3.8ms | Allocations: 6973)


  
ActionView::Template::Error (undefined local variable or method `error' for #<ActionView::Base:0x000000000190f0>):
    1: json.code error.code
    2: json.status error.status
    3: json.message error.message
  
app/views/api/v1/error.json.jbuilder:1
app/lib/error/error_handler.rb:19:in `render_error'
app/lib/error/error_handler.rb:8:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=mrrreug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:10:24 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mrrreug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 57.6ms | Allocations: 3057)
Completed 500 Internal Server Error in 53478ms (ActiveRecord: 0.8ms | Allocations: 9987)


  
ActionView::Template::Error (undefined local variable or method `error' for #<ActionView::Base:0x00000000019258>):
    1: json.code error.code
    2: json.status error.status
    3: json.message error.message
  
app/views/api/v1/error.json.jbuilder:1
app/lib/error/error_handler.rb:19:in `render_error'
app/lib/error/error_handler.rb:8:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=mrrreug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:11:21 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mrrreug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 12.3ms | Allocations: 3066)
Completed 500 Internal Server Error in 53ms (ActiveRecord: 4.0ms | Allocations: 6812)


  
ActionView::Template::Error (undefined local variable or method `error' for #<ActionView::Base:0x0000000001c9f8>):
    1: json.code error.code
    2: json.status error.status
    3: json.message error.message
  
app/views/api/v1/error.json.jbuilder:1
app/lib/error/error_handler.rb:19:in `render_error'
app/lib/error/error_handler.rb:8:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=mrrreug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:11:33 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mrrreug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 12843.3ms | Allocations: 7601)
Completed 500 Internal Server Error in 12856ms (ActiveRecord: 0.7ms | Allocations: 8548)


  
ActionView::Template::Error (undefined local variable or method `error' for #<ActionView::Base:0x0000000001cb60>):
    1: json.code code
    2: json.status status
    3: json.message error.message
  
app/views/api/v1/error.json.jbuilder:1
app/lib/error/error_handler.rb:19:in `render_error'
app/lib/error/error_handler.rb:8:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=mrrreug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:11:48 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mrrreug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 3.3ms | Allocations: 180)
Completed 422 Unprocessable Entity in 15ms (Views: 9.4ms | ActiveRecord: 0.6ms | Allocations: 1454)


Started GET "/api/v1/basket/check?product_codes[]=mrrreug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:13:52 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mrrreug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 2], ["code", 2]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:15:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.4ms | Allocations: 101)
Completed 422 Unprocessable Entity in 71ms (Views: 4.4ms | ActiveRecord: 9.1ms | Allocations: 6093)


Started GET "/api/v1/basket/check?product_codes[]=mrrreug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 15:14:17 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mrrreug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 2], ["code", 2]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.4ms | Allocations: 101)
Completed 422 Unprocessable Entity in 56ms (Views: 3.5ms | ActiveRecord: 8.3ms | Allocations: 6012)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=usd" for 172.24.0.1 at 2022-01-18 15:14:35 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie", "hoodie"], "currency"=>"usd"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:21:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.9ms | Allocations: 240)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.3ms | Allocations: 166)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 6.9ms | Allocations: 772)
  Rendered common/_list.json.jbuilder (Duration: 10.4ms | Allocations: 1039)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 14.4ms | Allocations: 1845)
Completed 200 OK in 76ms (Views: 17.3ms | ActiveRecord: 1.2ms | Allocations: 5676)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.24.0.1 at 2022-01-18 15:14:39 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie", "hoodie"], "currency"=>"eur"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:47:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:21:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.3ms | Allocations: 128)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.4ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 3.9ms | Allocations: 479)
  Rendered common/_list.json.jbuilder (Duration: 5.5ms | Allocations: 588)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 7.5ms | Allocations: 953)
Completed 200 OK in 20ms (Views: 9.7ms | ActiveRecord: 1.5ms | Allocations: 2455)


Started GET "/api/v1/basket/check" for 172.24.0.1 at 2022-01-18 16:13:29 +0000
Processing by Api::V1::BasketController#check as JSON
Completed 500 Internal Server Error in 30ms (Allocations: 1073)


  
NoMethodError (undefined method `error' for #<ActionController::ParameterMissing: param is missing or the value is empty: product_codes>):
  
app/lib/error/error_handler.rb:8:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=MUG&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.24.0.1 at 2022-01-18 16:19:47 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["MUG", "hoodie", "hoodie"], "currency"=>"eur"}
  [1m[36mProduct Count (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 2], ["code", 2]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.4ms | Allocations: 101)
Completed 422 Unprocessable Entity in 132ms (Views: 3.4ms | ActiveRecord: 14.9ms | Allocations: 9520)


Started GET "/api/v1/basket/check?product_codes[]=MUG&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.24.0.1 at 2022-01-18 16:20:31 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["MUG", "hoodie", "hoodie"], "currency"=>"eur"}
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.0ms | Allocations: 2046)


  
NoMethodError (undefined method `error' for #<NoMethodError: undefined method `lowercase' for "MUG":String>):
  
app/lib/error/error_handler.rb:8:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=MUG&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.24.0.1 at 2022-01-18 16:20:56 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["MUG", "hoodie", "hoodie"], "currency"=>"eur"}
Completed 500 Internal Server Error in 48298ms (ActiveRecord: 0.0ms | Allocations: 10542)


  
NoMethodError (undefined method `error' for #<NoMethodError: undefined method `lowercase' for "MUG":String>):
  
app/lib/error/error_handler.rb:8:in `block (2 levels) in included'
Started GET "/api/v1/basket/check" for 172.24.0.1 at 2022-01-18 16:22:16 +0000
Processing by Api::V1::BasketController#check as JSON
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms | Allocations: 948)


  
NoMethodError (undefined method `error' for #<ActionController::ParameterMissing: param is missing or the value is empty: product_codes>):
  
app/lib/error/error_handler.rb:8:in `block (2 levels) in included'
Started GET "/api/v1/basket/check" for 172.24.0.1 at 2022-01-18 16:22:46 +0000
Processing by Api::V1::BasketController#check as JSON
Completed 400 Bad Request in 4ms (ActiveRecord: 0.0ms | Allocations: 432)


  
ActionController::ParameterMissing (param is missing or the value is empty: product_codes):
  
app/controllers/api/v1/basket_controller.rb:25:in `basket_params'
app/controllers/api/v1/basket_controller.rb:20:in `set_basket'
app/controllers/api/v1/basket_controller.rb:12:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check" for 172.24.0.1 at 2022-01-18 16:23:05 +0000
Processing by Api::V1::BasketController#check as JSON
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.0ms | Allocations: 948)


  
NoMethodError (undefined method `error' for #<ActionController::ParameterMissing: param is missing or the value is empty: product_codes>):
  
app/lib/error/error_handler.rb:8:in `block (2 levels) in included'
Started GET "/api/v1/basket/check" for 172.24.0.1 at 2022-01-18 16:23:15 +0000
Processing by Api::V1::BasketController#check as JSON
Completed 500 Internal Server Error in 748315ms (ActiveRecord: 0.0ms | Allocations: 44932)


  
NoMethodError (undefined method `error' for #<ActionController::ParameterMissing: param is missing or the value is empty: product_codes>):
  
app/lib/error/error_handler.rb:8:in `block (2 levels) in included'
Started GET "/api/v1/basket/check" for 172.24.0.1 at 2022-01-18 16:35:47 +0000
Processing by Api::V1::BasketController#check as JSON
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 99)
Completed 0  in 8ms (Views: 3.4ms | Allocations: 927)


Started GET "/api/v1/basket/check" for 172.24.0.1 at 2022-01-18 16:36:12 +0000
Processing by Api::V1::BasketController#check as JSON
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.5ms | Allocations: 63)
Completed 0  in 9ms (Views: 8.3ms | Allocations: 380)


Started GET "/api/v1/basket/check" for 172.24.0.1 at 2022-01-18 16:36:45 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BasketController#check as JSON
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 7.1ms | Allocations: 393)
Completed 0  in 27613ms (Views: 65.6ms | ActiveRecord: 0.0ms | Allocations: 12168)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-18 16:37:38 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie"]}
  [1m[36mProduct Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:22:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 2.7ms | Allocations: 205)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.3ms | Allocations: 126)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 8.4ms | Allocations: 743)
  Rendered common/_list.json.jbuilder (Duration: 12.3ms | Allocations: 1060)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 42.5ms | Allocations: 3086)
Completed 200 OK in 95ms (Views: 45.5ms | ActiveRecord: 9.2ms | Allocations: 11279)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:37:43 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 91)
Completed 0  in 19ms (Views: 3.3ms | ActiveRecord: 1.1ms | Allocations: 2035)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:39:07 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 103)
Completed 422 Unprocessable Entity in 74ms (Views: 7.9ms | ActiveRecord: 7.1ms | Allocations: 5859)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:39:15 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.7ms | Allocations: 101)
Completed 0  in 57ms (Views: 5.8ms | ActiveRecord: 8.4ms | Allocations: 5905)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:39:44 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
Completed 200 OK in 52ms (ActiveRecord: 9.0ms | Allocations: 5280)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:39:49 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.8ms | Allocations: 101)
Completed 0  in 63ms (Views: 4.4ms | ActiveRecord: 8.8ms | Allocations: 5880)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:40:12 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
Completed 200 OK in 35ms (ActiveRecord: 7.4ms | Allocations: 5353)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:40:33 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
Completed 500 Internal Server Error in 42ms (ActiveRecord: 8.9ms | Allocations: 5436)


  
ArgumentError (Unrecognized status code :sss):
  
app/lib/error/error_handler.rb:28:in `render_error'
app/lib/error/error_handler.rb:14:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:40:40 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 101)
Completed 200 OK in 47ms (Views: 3.8ms | ActiveRecord: 9.4ms | Allocations: 5922)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:40:55 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 101)
Completed 200 OK in 39ms (Views: 3.5ms | ActiveRecord: 7.1ms | Allocations: 5854)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:41:27 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 101)
Completed 0  in 37ms (Views: 3.9ms | ActiveRecord: 6.4ms | Allocations: 5854)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:41:49 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 101)
Completed 0  in 38ms (Views: 3.2ms | ActiveRecord: 7.3ms | Allocations: 5853)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:42:11 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 100)
Completed 200 OK in 40ms (Views: 3.8ms | ActiveRecord: 7.6ms | Allocations: 5851)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:42:27 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 100)
Completed 0  in 58ms (Views: 4.2ms | ActiveRecord: 7.8ms | Allocations: 5890)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:42:49 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.7ms | Allocations: 100)
Completed 0  in 48ms (Views: 5.5ms | ActiveRecord: 7.7ms | Allocations: 5869)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:43:10 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.7ms | Allocations: 63)
Completed 0  in 20ms (Views: 5.0ms | ActiveRecord: 1.7ms | Allocations: 1600)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:43:32 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.8ms | Allocations: 96)
Completed 0  in 41555ms (Views: 5.1ms | ActiveRecord: 1.7ms | Allocations: 29512)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:44:41 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.4ms | Allocations: 100)
Completed 100 Continue in 36ms (Views: 3.5ms | ActiveRecord: 7.2ms | Allocations: 5855)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:45:17 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 100)
Completed 200 OK in 37ms (Views: 3.6ms | ActiveRecord: 6.8ms | Allocations: 5855)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:46:03 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.4ms | Allocations: 100)
Completed 200 OK in 52ms (Views: 5.0ms | ActiveRecord: 10.4ms | Allocations: 5934)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:46:11 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
Completed 500 Internal Server Error in 40ms (ActiveRecord: 7.3ms | Allocations: 5442)


  
ArgumentError (Unrecognized status code :"internal server error"):
  
app/lib/error/error_handler.rb:28:in `render_error'
app/lib/error/error_handler.rb:14:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:46:30 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
Completed 500 Internal Server Error in 473152ms (ActiveRecord: 1.9ms | Allocations: 94404)


  
ArgumentError (Unrecognized status code :"internal server error"):
  
app/lib/error/error_handler.rb:28:in `render_error'
app/lib/error/error_handler.rb:14:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:54:30 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
Completed 500 Internal Server Error in 130ms (ActiveRecord: 7.7ms | Allocations: 7236)


  
NoMethodError (undefined method `standard_error_code' for #<Api::V1::BasketController:0x0000000004baf0>):
  
app/lib/error/error_handler.rb:12:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:54:38 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
Completed 500 Internal Server Error in 101ms (ActiveRecord: 1.9ms | Allocations: 3090)


  
NoMethodError (undefined method `standard_error_code' for #<Api::V1::BasketController:0x0000000004bb68>):
  
app/lib/error/error_handler.rb:12:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:55:00 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
Completed 500 Internal Server Error in 32ms (ActiveRecord: 6.6ms | Allocations: 5353)


  
ArgumentError (wrong number of arguments (given 1, expected 0; required keyword: error_code)):
  
app/lib/error/error_handler.rb:37:in `http_code_status'
app/lib/error/error_handler.rb:16:in `block (2 levels) in included'
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:55:28 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.6ms | Allocations: 100)
Completed 500 Internal Server Error in 58ms (Views: 5.0ms | ActiveRecord: 7.5ms | Allocations: 5888)


Started GET "/api/v1/basket/check" for 172.24.0.1 at 2022-01-18 16:55:42 +0000
Processing by Api::V1::BasketController#check as JSON
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.4ms | Allocations: 63)
Completed 400 Bad Request in 7ms (Views: 6.3ms | ActiveRecord: 0.0ms | Allocations: 387)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:56:04 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.6ms | Allocations: 63)
Completed 500 Internal Server Error in 19ms (Views: 4.3ms | ActiveRecord: 1.7ms | Allocations: 1569)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodieee" for 172.24.0.1 at 2022-01-18 16:56:14 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodieee"]}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1)[0m  [["code", 0]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.5ms | Allocations: 101)
Completed 422 Unprocessable Entity in 46ms (Views: 3.5ms | ActiveRecord: 8.2ms | Allocations: 5855)


Started GET "/api/v1/basket/check" for 172.24.0.1 at 2022-01-18 16:56:20 +0000
Processing by Api::V1::BasketController#check as JSON
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.6ms | Allocations: 63)
Completed 400 Bad Request in 6ms (Views: 4.7ms | ActiveRecord: 0.0ms | Allocations: 390)


Started GET "/api/v1/basket/check" for 172.24.0.1 at 2022-01-18 16:56:34 +0000
Processing by Api::V1::BasketController#check as JSON
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.2ms | Allocations: 99)
Completed 400 Bad Request in 6ms (Views: 3.2ms | ActiveRecord: 0.0ms | Allocations: 935)


Started GET "/api/v1/basket/check?product_codes[]=" for 172.24.0.1 at 2022-01-18 17:49:49 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>[""]}
  [1m[36mProduct Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IS NULL[0m
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IS NULL[0m
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.5ms | Allocations: 91)
Completed 422 Unprocessable Entity in 153ms (Views: 5.0ms | ActiveRecord: 25.6ms | Allocations: 8799)


Started GET "/api/v1/basket/check?product_codes[]=rrr" for 172.24.0.1 at 2022-01-18 17:49:54 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["rrr"]}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IS NULL[0m
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IS NULL[0m
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.2ms | Allocations: 64)
Completed 422 Unprocessable Entity in 13ms (Views: 3.1ms | ActiveRecord: 1.3ms | Allocations: 1418)


Started GET "/apipie" for 172.24.0.1 at 2022-01-18 17:59:53 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (3.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Apipie::ApipiesController#index as HTML
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie (Duration: 4.3ms | Allocations: 693)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 8.2ms | Allocations: 1199)
Completed 404 Not Found in 447ms (Views: 41.7ms | ActiveRecord: 0.0ms | Allocations: 26933)


Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 17:59:54 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 17:59:54 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 17:59:54 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 17:59:54 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 17:59:54 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 17:59:54 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 17:59:54 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 17:59:54 +0000
Started GET "/favicon.ico" for 172.24.0.1 at 2022-01-18 17:59:55 +0000
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/apipie" for 172.24.0.1 at 2022-01-18 18:00:32 +0000
Processing by Apipie::ApipiesController#index as HTML
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.4ms | Allocations: 145)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 4.1ms | Allocations: 1149)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 7.1ms | Allocations: 1375)
Completed 200 OK in 440ms (Views: 12.3ms | ActiveRecord: 0.0ms | Allocations: 51497)


Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:00:33 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:00:33 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:00:33 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:00:33 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:00:33 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:00:33 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:00:33 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:00:33 +0000
Started GET "/apipie" for 172.24.0.1 at 2022-01-18 18:04:13 +0000
Processing by Apipie::ApipiesController#index as HTML
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.2ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 3.0ms | Allocations: 193)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 6.9ms | Allocations: 417)
Completed 200 OK in 171ms (Views: 10.4ms | ActiveRecord: 0.0ms | Allocations: 19825)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:04:13 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:04:13 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:04:13 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:04:13 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:04:14 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:04:14 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:04:14 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:04:14 +0000
Started GET "/apipie/1.0/products/index.en.html" for 172.24.0.1 at 2022-01-18 18:04:21 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.en.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie (Duration: 1.0ms | Allocations: 132)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 5.3ms | Allocations: 359)
Completed 404 Not Found in 205ms (Views: 10.8ms | ActiveRecord: 0.0ms | Allocations: 19154)


Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:04:21 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:04:21 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:04:21 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:04:21 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:04:21 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:04:21 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:04:21 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:04:22 +0000
Started GET "/apipie/1.0/products/index.en.html" for 172.24.0.1 at 2022-01-18 18:04:23 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.en.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie (Duration: 0.5ms | Allocations: 125)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 3.9ms | Allocations: 351)
Completed 404 Not Found in 220ms (Views: 7.3ms | ActiveRecord: 0.0ms | Allocations: 19166)


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:04:23 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:04:23 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:04:23 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:04:23 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:04:23 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:04:23 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:04:23 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:04:23 +0000
Started GET "/apipie" for 172.24.0.1 at 2022-01-18 18:05:07 +0000
Processing by Apipie::ApipiesController#index as HTML
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.3ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 3.0ms | Allocations: 193)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 7.1ms | Allocations: 417)
Completed 200 OK in 211ms (Views: 12.0ms | ActiveRecord: 0.0ms | Allocations: 21196)


Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:05:08 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:05:08 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:05:08 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:05:08 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:05:08 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:05:08 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:05:08 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:05:08 +0000
Started GET "/apipie/1.0/products/index.en.html" for 172.24.0.1 at 2022-01-18 18:05:09 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.en.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie (Duration: 0.5ms | Allocations: 125)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 3.5ms | Allocations: 351)
Completed 404 Not Found in 166ms (Views: 6.9ms | ActiveRecord: 0.0ms | Allocations: 19634)


Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:05:10 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:05:10 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:05:10 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:05:10 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:05:10 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:05:10 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:05:10 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:05:10 +0000
Started GET "/apipie/1.0/products/index.en.html" for 172.24.0.1 at 2022-01-18 18:05:43 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.en.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie (Duration: 0.5ms | Allocations: 125)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 3.4ms | Allocations: 351)
Completed 404 Not Found in 165ms (Views: 6.6ms | ActiveRecord: 0.0ms | Allocations: 20459)


Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:05:44 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:05:44 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:05:44 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:05:44 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:05:44 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:05:44 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:05:44 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:05:44 +0000
Started GET "/apipie/1.0/products/index.en.html" for 172.24.0.1 at 2022-01-18 18:05:50 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.en.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie (Duration: 0.7ms | Allocations: 125)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 4.7ms | Allocations: 351)
Completed 404 Not Found in 152ms (Views: 8.2ms | ActiveRecord: 0.0ms | Allocations: 20415)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:05:50 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:05:50 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:05:50 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:05:50 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:05:50 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:05:50 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:05:50 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:05:50 +0000
Started GET "/apipie" for 172.24.0.1 at 2022-01-18 18:06:35 +0000
Processing by Apipie::ApipiesController#index as HTML
Completed 500 Internal Server Error in 187ms (ActiveRecord: 0.0ms | Allocations: 18897)


  
RuntimeError (param group Api::V1::ProductsController#address not defined):
  
app/controllers/api/v1/products_controller.rb:13:in `block (2 levels) in <class:ProductsController>'
app/controllers/api/v1/products_controller.rb:23:in `<class:ProductsController>'
app/controllers/api/v1/products_controller.rb:2:in `<main>'
Started GET "/apipie" for 172.24.0.1 at 2022-01-18 18:06:40 +0000
Processing by Apipie::ApipiesController#index as HTML
Completed 500 Internal Server Error in 129ms (ActiveRecord: 0.0ms | Allocations: 18902)


  
RuntimeError (param group Api::V1::ProductsController#address not defined):
  
app/controllers/api/v1/products_controller.rb:13:in `block (2 levels) in <class:ProductsController>'
app/controllers/api/v1/products_controller.rb:23:in `<class:ProductsController>'
app/controllers/api/v1/products_controller.rb:2:in `<main>'
Started GET "/apipie" for 172.24.0.1 at 2022-01-18 18:07:12 +0000
Processing by Apipie::ApipiesController#index as HTML
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 2.6ms | Allocations: 188)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 6.2ms | Allocations: 412)
Completed 200 OK in 271ms (Views: 9.9ms | ActiveRecord: 0.0ms | Allocations: 23260)


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:07:12 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:07:12 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:07:12 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:07:12 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:07:12 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:07:12 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:07:12 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:07:13 +0000
Started GET "/apipie/1.0/products.en.html" for 172.24.0.1 at 2022-01-18 18:07:20 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products.en.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie (Duration: 0.5ms | Allocations: 117)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 3.3ms | Allocations: 344)
Completed 404 Not Found in 156ms (Views: 6.9ms | ActiveRecord: 0.0ms | Allocations: 21270)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:07:20 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:07:20 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:07:20 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:07:20 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:07:20 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:07:20 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:07:20 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:07:20 +0000
Started GET "/apipie" for 172.24.0.1 at 2022-01-18 18:07:42 +0000
Processing by Apipie::ApipiesController#index as HTML
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 2.6ms | Allocations: 193)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 14.2ms | Allocations: 418)
Completed 200 OK in 261ms (Views: 30.4ms | ActiveRecord: 0.0ms | Allocations: 23478)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:07:43 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:07:43 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:07:43 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:07:43 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:07:43 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:07:43 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:07:43 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:07:43 +0000
Started GET "/apipie" for 172.24.0.1 at 2022-01-18 18:07:52 +0000
Processing by Apipie::ApipiesController#index as HTML
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 3.5ms | Allocations: 193)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 5.9ms | Allocations: 417)
Completed 200 OK in 178ms (Views: 8.6ms | ActiveRecord: 0.0ms | Allocations: 23853)


Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:07:52 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:07:52 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:07:52 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:07:52 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:07:52 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:07:52 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:07:52 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:07:52 +0000
Started GET "/apipie/1.0/products/index.en.html" for 172.24.0.1 at 2022-01-18 18:07:54 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.en.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie (Duration: 0.8ms | Allocations: 125)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 4.1ms | Allocations: 351)
Completed 404 Not Found in 241ms (Views: 8.3ms | ActiveRecord: 0.0ms | Allocations: 22245)


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:07:54 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:07:54 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:07:54 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:07:54 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:07:54 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:07:54 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:07:54 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:07:54 +0000
Started GET "/apipie/1.0/products/index.en.html" for 172.24.0.1 at 2022-01-18 18:08:45 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.en.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie (Duration: 69.6ms | Allocations: 2757)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 73.7ms | Allocations: 3263)
Completed 404 Not Found in 447ms (Views: 101.1ms | ActiveRecord: 0.0ms | Allocations: 52144)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:08:46 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:08:46 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:08:46 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:08:46 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:08:46 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:08:46 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:08:46 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:08:46 +0000
Started GET "/apipie/1.0/products/index.en.html" for 172.24.0.1 at 2022-01-18 18:08:49 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.en.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie (Duration: 1.3ms | Allocations: 392)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 4.5ms | Allocations: 846)
Completed 404 Not Found in 127ms (Views: 9.4ms | ActiveRecord: 0.0ms | Allocations: 19046)


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:08:49 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:08:49 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:08:49 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:08:49 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:08:49 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:08:49 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:08:49 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:08:49 +0000
Started GET "/apipie/1.0/products/index.en.html" for 172.24.0.1 at 2022-01-18 18:08:53 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.en.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie (Duration: 0.6ms | Allocations: 125)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 3.1ms | Allocations: 352)
Completed 404 Not Found in 153ms (Views: 6.3ms | ActiveRecord: 0.0ms | Allocations: 18419)


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:08:53 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:08:53 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:08:53 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:08:53 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:08:53 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:08:53 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:08:53 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:08:53 +0000
Started GET "/apipie/1.0/products/index.en.html" for 172.24.0.1 at 2022-01-18 18:09:51 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.en.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/apipie_404.html.erb within layouts/apipie/apipie (Duration: 0.5ms | Allocations: 125)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 3.7ms | Allocations: 352)
Completed 404 Not Found in 144ms (Views: 7.3ms | ActiveRecord: 0.0ms | Allocations: 18538)


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:09:51 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:09:51 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:09:51 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:09:51 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:09:51 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:09:51 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:09:52 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:09:52 +0000
Started GET "/apipie/1.0/products/index.html" for 172.24.0.1 at 2022-01-18 18:10:21 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.5ms | Allocations: 153)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 2.1ms | Allocations: 1146)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.7ms | Allocations: 278)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 62.3ms | Allocations: 4672)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 72.5ms | Allocations: 5964)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 76.5ms | Allocations: 6447)
Completed 200 OK in 478ms (Views: 99.3ms | ActiveRecord: 0.0ms | Allocations: 56317)


Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:10:22 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:10:22 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:10:22 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:10:22 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:10:22 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:10:22 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:10:22 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:10:22 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:10:22 +0000
Started GET "/apipie/1.0/products.html" for 172.24.0.1 at 2022-01-18 18:10:36 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/resource.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 6.7ms | Allocations: 143)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 8.5ms | Allocations: 270)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 2.0ms | Allocations: 1136)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 18.3ms | Allocations: 2172)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/resource.html.erb within layouts/apipie/apipie (Duration: 48.5ms | Allocations: 3938)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 51.7ms | Allocations: 4390)
Completed 200 OK in 251ms (Views: 77.4ms | ActiveRecord: 0.0ms | Allocations: 23497)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:10:36 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:10:36 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:10:36 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:10:36 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:10:36 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:10:36 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:10:36 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:10:37 +0000
Started GET "/apipie/1.0.html" for 172.24.0.1 at 2022-01-18 18:10:44 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 16)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 3.8ms | Allocations: 927)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 6.8ms | Allocations: 1152)
Completed 200 OK in 149ms (Views: 11.5ms | ActiveRecord: 0.0ms | Allocations: 20215)


Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:10:45 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:10:45 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:10:45 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:10:45 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:10:45 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:10:45 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:10:45 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:10:45 +0000
Started GET "/apipie/1.0/products/index.html" for 172.24.0.1 at 2022-01-18 18:10:46 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 16)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.1ms | Allocations: 631)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 4.7ms | Allocations: 866)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 9.5ms | Allocations: 1567)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 13.8ms | Allocations: 1791)
Completed 200 OK in 175ms (Views: 18.9ms | ActiveRecord: 0.0ms | Allocations: 20969)


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-18 18:10:47 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-18 18:10:47 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-18 18:10:47 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-18 18:10:47 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-18 18:10:47 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-18 18:10:47 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-18 18:10:47 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-18 18:10:47 +0000
Started GET "/apipie/1.0.html" for 172.24.0.1 at 2022-01-18 19:41:48 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0.html"}
Completed 500 Internal Server Error in 259ms (Allocations: 17920)


  
ArgumentError (wrong number of arguments (given 0, expected 2..4)):
  
app/controllers/api/v1/products_controller.rb:42:in `<class:ProductsController>'
app/controllers/api/v1/products_controller.rb:2:in `<main>'
Started GET "/api/v1/products?currency=usd" for 172.24.0.1 at 2022-01-19 05:51:36 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (4.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"usd"}
  [1m[36mProduct Count (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 73.2ms | Allocations: 3099)
  Rendered common/_list.json.jbuilder (Duration: 95.7ms | Allocations: 7582)
  Rendered api/v1/products/index.json.jbuilder (Duration: 104.0ms | Allocations: 8311)
Completed 200 OK in 154ms (Views: 124.2ms | ActiveRecord: 13.8ms | Allocations: 13878)


Started GET "/favicon.ico" for 172.24.0.1 at 2022-01-19 05:51:38 +0000
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/apipie" for 172.24.0.1 at 2022-01-19 05:51:42 +0000
Processing by Apipie::ApipiesController#index as HTML
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 1.7ms | Allocations: 145)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 9.3ms | Allocations: 1165)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 13.6ms | Allocations: 1637)
Completed 200 OK in 192ms (Views: 20.4ms | ActiveRecord: 0.0ms | Allocations: 29011)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 05:51:43 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 05:51:43 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 05:51:43 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 05:51:43 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 05:51:43 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 05:51:43 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 05:51:43 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 05:51:43 +0000
Started GET "/apipie/1.0/products/index.html" for 172.24.0.1 at 2022-01-19 05:51:45 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.2ms | Allocations: 16)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 2.0ms | Allocations: 1144)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 1.2ms | Allocations: 276)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 10.3ms | Allocations: 2549)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 16.1ms | Allocations: 3345)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 19.7ms | Allocations: 3569)
Completed 200 OK in 159ms (Views: 23.6ms | ActiveRecord: 0.0ms | Allocations: 26327)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 05:51:45 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 05:51:45 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 05:51:45 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 05:51:45 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 05:51:45 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 05:51:45 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 05:51:45 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 05:51:45 +0000
Started GET "/apipie/1.0/products/index.html" for 172.24.0.1 at 2022-01-19 05:51:56 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.1ms | Allocations: 631)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 5.6ms | Allocations: 868)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 10.2ms | Allocations: 1053)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 13.2ms | Allocations: 1277)
Completed 200 OK in 169ms (Views: 16.6ms | ActiveRecord: 0.0ms | Allocations: 24108)


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 05:51:56 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 05:51:56 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 05:51:56 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 05:51:56 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 05:51:56 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 05:51:56 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 05:51:56 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 05:51:56 +0000
Started GET "/apipie/1.0/products/index.html" for 172.24.0.1 at 2022-01-19 05:52:21 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.8ms | Allocations: 631)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 4.8ms | Allocations: 866)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 8.0ms | Allocations: 1051)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 11.7ms | Allocations: 1275)
Completed 200 OK in 257ms (Views: 15.8ms | ActiveRecord: 0.0ms | Allocations: 23192)


Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 05:52:22 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 05:52:22 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 05:52:22 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 05:52:22 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 05:52:22 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 05:52:22 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 05:52:22 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 05:52:22 +0000
Started GET "/apipie/1.0/products/index.html" for 172.24.0.1 at 2022-01-19 05:52:25 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.8ms | Allocations: 631)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 3.6ms | Allocations: 866)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 6.6ms | Allocations: 1051)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 9.6ms | Allocations: 1275)
Completed 200 OK in 143ms (Views: 12.7ms | ActiveRecord: 0.0ms | Allocations: 23153)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 05:52:25 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 05:52:25 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 05:52:25 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 05:52:25 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 05:52:25 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 05:52:25 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 05:52:25 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 05:52:25 +0000
Started GET "/apipie/1.0/products.html" for 172.24.0.1 at 2022-01-19 05:52:26 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/resource.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 16)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.2ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.3ms | Allocations: 631)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 5.3ms | Allocations: 865)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.1ms | Allocations: 596)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.0ms | Allocations: 404)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 7.9ms | Allocations: 1405)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/resource.html.erb within layouts/apipie/apipie (Duration: 30.7ms | Allocations: 3491)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 33.7ms | Allocations: 3716)
Completed 200 OK in 197ms (Views: 39.5ms | ActiveRecord: 0.0ms | Allocations: 27798)


Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 05:52:27 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 05:52:27 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 05:52:27 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 05:52:27 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 05:52:27 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 05:52:27 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 05:52:27 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 05:52:27 +0000
Started GET "/apipie/1.0/products.html" for 172.24.0.1 at 2022-01-19 05:52:53 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/resource.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.9ms | Allocations: 627)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 2.2ms | Allocations: 1312)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 5.3ms | Allocations: 2171)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 11.1ms | Allocations: 3234)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.8ms | Allocations: 596)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.3ms | Allocations: 779)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 4.1ms | Allocations: 1617)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 10.6ms | Allocations: 2579)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/resource.html.erb within layouts/apipie/apipie (Duration: 28.0ms | Allocations: 6138)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 31.1ms | Allocations: 6362)
Completed 200 OK in 201ms (Views: 34.3ms | ActiveRecord: 0.0ms | Allocations: 39036)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 05:52:53 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 05:52:53 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 05:52:54 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 05:52:54 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 05:52:54 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 05:52:54 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 05:52:54 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 05:52:54 +0000
Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:04:02 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 4.1ms | Allocations: 182)
Completed 500 Internal Server Error in 60ms (Views: 8.2ms | ActiveRecord: 22.3ms | Allocations: 8181)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:04:30 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:80:in `set_product'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mProduct Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mProduct Update (1.0ms)[0m  [1m[33mUPDATE "products" SET "price_cents" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["price_cents", 10], ["updated_at", "2022-01-19 06:04:30.399479"], ["id", 1]]
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in `update'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 2.3ms | Allocations: 289)
  Rendered api/v1/products/update.json.jbuilder (Duration: 6.4ms | Allocations: 564)
Completed 200 OK in 61ms (Views: 9.5ms | ActiveRecord: 15.6ms | Allocations: 10401)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:04:43 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 102)
Completed 500 Internal Server Error in 34ms (Views: 3.9ms | ActiveRecord: 7.9ms | Allocations: 4914)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:04:51 +0000
  
RuntimeError (Validator for string not found.):
  
app/controllers/api/v1/products_controller.rb:78:in `<class:ProductsController>'
app/controllers/api/v1/products_controller.rb:2:in `<main>'
Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:04:58 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 101)
Completed 500 Internal Server Error in 31ms (Views: 3.8ms | ActiveRecord: 6.6ms | Allocations: 4887)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:04:59 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 64)
Completed 500 Internal Server Error in 12ms (Views: 6.2ms | ActiveRecord: 0.8ms | Allocations: 979)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:06:00 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.2ms | Allocations: 101)
Completed 500 Internal Server Error in 25ms (Views: 3.2ms | ActiveRecord: 6.1ms | Allocations: 4826)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:07:30 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 64)
Completed 500 Internal Server Error in 9ms (Views: 3.5ms | ActiveRecord: 0.4ms | Allocations: 971)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:07:47 +0000
  
RuntimeError (Validator for {:required=>true, :desc=>"Updated product price in cents.", :parent=>#<Apipie::ParamDescription:0x00007f8970445100 @options={:param_group=>nil, :desc=>"Updated product.", :required=>true}, @method_description=#<Apipie::MethodDescription:0x00007f897042d758 @method="update", @resource=#<Apipie::ResourceDescription:0x00007f896d0804a0 @_methods={:index=>#<Apipie::MethodDescription:0x00007f89703e6060 @method="index", @resource=#<Apipie::ResourceDescription:0x00007f896d0804a0 ...>, @from_concern=nil, @apis=[#<Apipie::MethodDescription::Api:0x00007f89703e5f98 @http_method="GET", @path="/v1/products", @short_description=nil, @from_routes=nil, @options={}>], @full_description="\n<p>Return list of products in database (Challenge I)</p>\n", @errors=[], @tag_list=[], @returns=[#<Apipie::ResponseDescription:0x00007f89703ef4d0 @type_ref=false, @is_array_of=false, @method_description=#<Apipie::MethodDescription:0x00007f89703e6060 ...>, @code=200, @description="successful response", @scope=Api::V1::ProductsController, @response_object=#<Apipie::ResponseDescription::ResponseObject:0x00007f89703ef458 @method_description=#<Apipie::MethodDescription:0x00007f89703e6060 ...>, @scope=Api::V1::ProductsController, @param_group={:scope=>Api::V1::ProductsController}, @additional_properties=nil, @typename=false, @_apipie_dsl_data={:api=>false, :api_args=>[], :api_from_routes=>nil, :errors=>[], :tag_list=>[], :returns=>{}, :params=>[[:total, Integer, {:desc=>"Total number of products in database.", :param_group=>{:scope=>Api::V1::ProductsController}}, {:only_in=>:response, :required=>true, :param_group=>nil}, nil], [:page, Integer, {:desc=>"Results page (only present when using pagination parameters).", :param_group=>{:scope=>Api::V1::ProductsController}}, {:only_in=>:response, :required=>true, :param_group=>nil}, nil], [:page_size, Integer, {:desc=>"Results page size (only present when using pagination parameters).", :param_group=>{:scope=>Api::V1::ProductsController}}, {:only_in=>:response, :required=>true, :param_group=>nil}, nil], [:data, Hash, {:desc=>"Collection of product information.", :param_group=>{:scope=>Api::V1::ProductsController}}, {:only_in=>:response, :required=>true, :param_group=>nil}, #<Proc:0x00007f89703eea08 /home/app/reedsy-challenge/app/controllers/api/v1/products_controller.rb:32>]], :headers=>[], :resource_id=>nil, :short_description=>nil, :description=>nil, :examples=>[], :see=>[], :formats=>nil, :api_versions=>[], :meta=>nil, :show=>true, :deprecated=>false}, @params_ordered=[#<Apipie::ParamDescription:0x00007f89703ee850 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Total number of products in database."}, @method_description=#<Apipie::MethodDescription:0x00007f89703e6060 ...>, @name=:total, @as=:total, @desc="\n<p>Total number of products in database.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122320 param_description: ParamDescription: products#index#total>, @validations=[], @additional_properties=nil, @from_concern=nil>, #<Apipie::ParamDescription:0x00007f89703ec2d0 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Results page (only present when using pagination parameters)."}, @method_description=#<Apipie::MethodDescription:0x00007f89703e6060 ...>, @name=:page, @as=:page, @desc="\n<p>Results page (only present when using pagination parameters).</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122340 param_description: ParamDescription: products#index#page>, @validations=[], @additional_properties=nil, @from_concern=nil>, #<Apipie::ParamDescription:0x00007f89703f57e0 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Results page size (only present when using pagination parameters)."}, @method_description=#<Apipie::MethodDescription:0x00007f89703e6060 ...>, @name=:page_size, @as=:page_size, @desc="\n<p>Results page size (only present when using pagination parameters).</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122360 param_description: ParamDescription: products#index#page_size>, @validations=[], @additional_properties=nil, @from_concern=nil>, #<Apipie::ParamDescription:0x00007f89703feb88 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Collection of product information."}, @method_description=#<Apipie::MethodDescription:0x00007f89703e6060 ...>, @name=:data, @as=:data, @desc="\n<p>Collection of product information.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::HashValidator:122380 param_description: ParamDescription: products#index#data>, @validations=[], @additional_properties=nil, @from_concern=nil>], @hash_params={:total=>#<Apipie::ParamDescription:0x00007f89703ee850 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Total number of products in database."}, @method_description=#<Apipie::MethodDescription:0x00007f89703e6060 ...>, @name=:total, @as=:total, @desc="\n<p>Total number of products in database.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122320 param_description: ParamDescription: products#index#total>, @validations=[], @additional_properties=nil, @from_concern=nil>, :page=>#<Apipie::ParamDescription:0x00007f89703ec2d0 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Results page (only present when using pagination parameters)."}, @method_description=#<Apipie::MethodDescription:0x00007f89703e6060 ...>, @name=:page, @as=:page, @desc="\n<p>Results page (only present when using pagination parameters).</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122340 param_description: ParamDescription: products#index#page>, @validations=[], @additional_properties=nil, @from_concern=nil>, :page_size=>#<Apipie::ParamDescription:0x00007f89703f57e0 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Results page size (only present when using pagination parameters)."}, @method_description=#<Apipie::MethodDescription:0x00007f89703e6060 ...>, @name=:page_size, @as=:page_size, @desc="\n<p>Results page size (only present when using pagination parameters).</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122360 param_description: ParamDescription: products#index#page_size>, @validations=[], @additional_properties=nil, @from_concern=nil>, :data=>#<Apipie::ParamDescription:0x00007f89703feb88 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Collection of product information."}, @method_description=#<Apipie::MethodDescription:0x00007f89703e6060 ...>, @name=:data, @as=:data, @desc="\n<p>Collection of product information.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::HashValidator:122380 param_description: ParamDescription: products#index#data>, @validations=[], @additional_properties=nil, @from_concern=nil>}>>], @see=[], @formats=nil, @examples=[], @metadata=nil, @params_ordered=[#<Apipie::ParamDescription:0x00007f897040c198 @options={:param_group=>nil, :desc=>"Pagination param, sorts results by pages and returns specified page results.If specified page is lower than 1 API will return page 1 results. If specifiedpage is higher than last page API will return last page results", :required=>false}, @method_description=#<Apipie::MethodDescription:0x00007f89703e6060 ...>, @name=:page, @as=:page, @desc="\n<p>Pagination param, sorts results by pages and returns specified page results.If specified page is lower than 1 API will return page 1 results. If specifiedpage is higher than last page API will return last page results</p>\n", @parent=nil, @metadata=nil, @required=false, @response_only=false, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122400 param_description: ParamDescription: products#index#page>, @validations=[], @additional_properties=nil>, #<Apipie::ParamDescription:0x00007f897041e578 @options={:param_group=>nil, :desc=>"Pagination param, specifies size of result pages.", :required=>false}, @method_description=#<Apipie::MethodDescription:0x00007f89703e6060 ...>, @name=:page_size, @as=:page_size, @desc="\n<p>Pagination param, specifies size of result pages.</p>\n", @parent=nil, @metadata=nil, @required=false, @response_only=false, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::NumberValidator:122420 param_description: ParamDescription: products#index#page_size>, @validations=[], @additional_properties=nil>, #<Apipie::ParamDescription:0x00007f8970427ec0 @options={:param_group=>nil, :required=>false, :desc=>"Currency ISO code. Specifies currency in which prices will be returned. Only eur & usd codes allowed. Using other codes will return prices in default currency (EUR)"}, @method_description=#<Apipie::MethodDescription:0x00007f89703e6060 ...>, @name=:currency, @as=:currency, @desc="\n<p>Currency ISO code. Specifies currency in which prices will be returned. Only eur &amp; usd codes allowed. Using other codes will return prices in default currency (EUR)</p>\n", @parent=nil, @metadata=nil, @required=false, @response_only=false, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122440 param_description: ParamDescription: products#index#currency>, @validations=[], @additional_properties=nil>], @headers=[], @show=true>, :update=>#<Apipie::MethodDescription:0x00007f8978285740 @method="update", @resource=#<Apipie::ResourceDescription:0x00007f896d0804a0 ...>, @from_concern=nil, @apis=[#<Apipie::MethodDescription::Api:0x00007f89782856a0 @http_method="PUT", @path="/v1/products/:id", @short_description=nil, @from_routes=nil, @options={}>], @full_description="\n<p>Updates product price (Challenge II)</p>\n", @errors=[], @tag_list=[], @returns=[#<Apipie::ResponseDescription:0x00007f897828f4c0 @type_ref=false, @is_array_of=false, @method_description=#<Apipie::MethodDescription:0x00007f8978285740 ...>, @code=200, @description="successful response", @scope=Api::V1::ProductsController, @response_object=#<Apipie::ResponseDescription::ResponseObject:0x00007f897828f498 @method_description=#<Apipie::MethodDescription:0x00007f8978285740 ...>, @scope=Api::V1::ProductsController, @param_group={:scope=>Api::V1::ProductsController}, @additional_properties=nil, @typename=false, @_apipie_dsl_data={:api=>false, :api_args=>[], :api_from_routes=>nil, :errors=>[], :tag_list=>[], :returns=>{}, :params=>[[:id, Integer, {:desc=>"Product ID.", :param_group=>{:scope=>Api::V1::ProductsController}}, {:only_in=>:response, :required=>true, :param_group=>nil}, nil], [:name, String, {:desc=>"Product name.", :param_group=>{:scope=>Api::V1::ProductsController}}, {:only_in=>:response, :required=>true, :param_group=>nil}, nil], [:code, String, {:desc=>"Product code.", :param_group=>{:scope=>Api::V1::ProductsController}}, {:only_in=>:response, :required=>true, :param_group=>nil}, nil], [:price, String, {:desc=>"Product price in specified currency.", :param_group=>{:scope=>Api::V1::ProductsController}}, {:only_in=>:response, :required=>true, :param_group=>nil}, nil]], :headers=>[], :resource_id=>nil, :short_description=>nil, :description=>nil, :examples=>[], :see=>[], :formats=>nil, :api_versions=>[], :meta=>nil, :show=>true, :deprecated=>false}, @params_ordered=[#<Apipie::ParamDescription:0x00007f897828e980 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product ID."}, @method_description=#<Apipie::MethodDescription:0x00007f8978285740 ...>, @name=:id, @as=:id, @desc="\n<p>Product ID.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122460 param_description: ParamDescription: products#update#id>, @validations=[], @additional_properties=nil, @from_concern=nil>, #<Apipie::ParamDescription:0x00007f897828ce50 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product name."}, @method_description=#<Apipie::MethodDescription:0x00007f8978285740 ...>, @name=:name, @as=:name, @desc="\n<p>Product name.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122480 param_description: ParamDescription: products#update#name>, @validations=[], @additional_properties=nil, @from_concern=nil>, #<Apipie::ParamDescription:0x00007f8978297260 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product code."}, @method_description=#<Apipie::MethodDescription:0x00007f8978285740 ...>, @name=:code, @as=:code, @desc="\n<p>Product code.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122500 param_description: ParamDescription: products#update#code>, @validations=[], @additional_properties=nil, @from_concern=nil>, #<Apipie::ParamDescription:0x00007f8978295690 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product price in specified currency."}, @method_description=#<Apipie::MethodDescription:0x00007f8978285740 ...>, @name=:price, @as=:price, @desc="\n<p>Product price in specified currency.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122520 param_description: ParamDescription: products#update#price>, @validations=[], @additional_properties=nil, @from_concern=nil>], @hash_params={:id=>#<Apipie::ParamDescription:0x00007f897828e980 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product ID."}, @method_description=#<Apipie::MethodDescription:0x00007f8978285740 ...>, @name=:id, @as=:id, @desc="\n<p>Product ID.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122460 param_description: ParamDescription: products#update#id>, @validations=[], @additional_properties=nil, @from_concern=nil>, :name=>#<Apipie::ParamDescription:0x00007f897828ce50 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product name."}, @method_description=#<Apipie::MethodDescription:0x00007f8978285740 ...>, @name=:name, @as=:name, @desc="\n<p>Product name.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122480 param_description: ParamDescription: products#update#name>, @validations=[], @additional_properties=nil, @from_concern=nil>, :code=>#<Apipie::ParamDescription:0x00007f8978297260 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product code."}, @method_description=#<Apipie::MethodDescription:0x00007f8978285740 ...>, @name=:code, @as=:code, @desc="\n<p>Product code.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122500 param_description: ParamDescription: products#update#code>, @validations=[], @additional_properties=nil, @from_concern=nil>, :price=>#<Apipie::ParamDescription:0x00007f8978295690 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product price in specified currency."}, @method_description=#<Apipie::MethodDescription:0x00007f8978285740 ...>, @name=:price, @as=:price, @desc="\n<p>Product price in specified currency.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122520 param_description: ParamDescription: products#update#price>, @validations=[], @additional_properties=nil, @from_concern=nil>}>>], @see=[], @formats=nil, @examples=[], @metadata=nil, @params_ordered=[#<Apipie::ParamDescription:0x00007f897829ef38 @options={:param_group=>nil, :desc=>"ID of updated product.", :required=>true}, @method_description=#<Apipie::MethodDescription:0x00007f8978285740 ...>, @name=:id, @as=:id, @desc="\n<p>ID of updated product.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=false, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::NumberValidator:122540 param_description: ParamDescription: products#update#id>, @validations=[], @additional_properties=nil>, #<Apipie::ParamDescription:0x00007f897829d110 @options={:param_group=>nil, :desc=>"Updated product.", :required=>true}, @method_description=#<Apipie::MethodDescription:0x00007f8978285740 ...>, @name=:product, @as=:product, @desc="\n<p>Updated product.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=false, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::HashValidator:122560 param_description: ParamDescription: products#update#product>, @validations=[], @additional_properties=nil>], @headers=[], @show=true>}, @_params_args=[], @_errors_args=[], @_returns_args=[], @controller=Api::V1::ProductsController, @_id="products", @_version="1.0", @_name="Products", @_parent=nil>, @from_concern=nil, @apis=[#<Apipie::MethodDescription::Api:0x00007f897042d6b8 @http_method="PUT", @path="/v1/products/:id", @short_description=nil, @from_routes=nil, @options={}>], @full_description="\n<p>Updates product price (Challenge II)</p>\n", @errors=[], @tag_list=[], @returns=[#<Apipie::ResponseDescription:0x00007f89704374d8 @type_ref=false, @is_array_of=false, @method_description=#<Apipie::MethodDescription:0x00007f897042d758 ...>, @code=200, @description="successful response", @scope=Api::V1::ProductsController, @response_object=#<Apipie::ResponseDescription::ResponseObject:0x00007f89704374b0 @method_description=#<Apipie::MethodDescription:0x00007f897042d758 ...>, @scope=Api::V1::ProductsController, @param_group={:scope=>Api::V1::ProductsController}, @additional_properties=nil, @typename=false, @_apipie_dsl_data={:api=>false, :api_args=>[], :api_from_routes=>nil, :errors=>[], :tag_list=>[], :returns=>{}, :params=>[[:id, Integer, {:desc=>"Product ID.", :param_group=>{:scope=>Api::V1::ProductsController}}, {:only_in=>:response, :required=>true, :param_group=>nil}, nil], [:name, String, {:desc=>"Product name.", :param_group=>{:scope=>Api::V1::ProductsController}}, {:only_in=>:response, :required=>true, :param_group=>nil}, nil], [:code, String, {:desc=>"Product code.", :param_group=>{:scope=>Api::V1::ProductsController}}, {:only_in=>:response, :required=>true, :param_group=>nil}, nil], [:price, String, {:desc=>"Product price in specified currency.", :param_group=>{:scope=>Api::V1::ProductsController}}, {:only_in=>:response, :required=>true, :param_group=>nil}, nil]], :headers=>[], :resource_id=>nil, :short_description=>nil, :description=>nil, :examples=>[], :see=>[], :formats=>nil, :api_versions=>[], :meta=>nil, :show=>true, :deprecated=>false}, @params_ordered=[#<Apipie::ParamDescription:0x00007f8970436998 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product ID."}, @method_description=#<Apipie::MethodDescription:0x00007f897042d758 ...>, @name=:id, @as=:id, @desc="\n<p>Product ID.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122580 param_description: ParamDescription: products#update#id>, @validations=[], @additional_properties=nil, @from_concern=nil>, #<Apipie::ParamDescription:0x00007f8970434e68 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product name."}, @method_description=#<Apipie::MethodDescription:0x00007f897042d758 ...>, @name=:name, @as=:name, @desc="\n<p>Product name.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122600 param_description: ParamDescription: products#update#name>, @validations=[], @additional_properties=nil, @from_concern=nil>, #<Apipie::ParamDescription:0x00007f897043f278 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product code."}, @method_description=#<Apipie::MethodDescription:0x00007f897042d758 ...>, @name=:code, @as=:code, @desc="\n<p>Product code.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122620 param_description: ParamDescription: products#update#code>, @validations=[], @additional_properties=nil, @from_concern=nil>, #<Apipie::ParamDescription:0x00007f897043d6a8 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product price in specified currency."}, @method_description=#<Apipie::MethodDescription:0x00007f897042d758 ...>, @name=:price, @as=:price, @desc="\n<p>Product price in specified currency.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122640 param_description: ParamDescription: products#update#price>, @validations=[], @additional_properties=nil, @from_concern=nil>], @hash_params={:id=>#<Apipie::ParamDescription:0x00007f8970436998 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product ID."}, @method_description=#<Apipie::MethodDescription:0x00007f897042d758 ...>, @name=:id, @as=:id, @desc="\n<p>Product ID.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122580 param_description: ParamDescription: products#update#id>, @validations=[], @additional_properties=nil, @from_concern=nil>, :name=>#<Apipie::ParamDescription:0x00007f8970434e68 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product name."}, @method_description=#<Apipie::MethodDescription:0x00007f897042d758 ...>, @name=:name, @as=:name, @desc="\n<p>Product name.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122600 param_description: ParamDescription: products#update#name>, @validations=[], @additional_properties=nil, @from_concern=nil>, :code=>#<Apipie::ParamDescription:0x00007f897043f278 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product code."}, @method_description=#<Apipie::MethodDescription:0x00007f897042d758 ...>, @name=:code, @as=:code, @desc="\n<p>Product code.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122620 param_description: ParamDescription: products#update#code>, @validations=[], @additional_properties=nil, @from_concern=nil>, :price=>#<Apipie::ParamDescription:0x00007f897043d6a8 @options={:only_in=>:response, :required=>true, :param_group=>{:scope=>Api::V1::ProductsController}, :desc=>"Product price in specified currency."}, @method_description=#<Apipie::MethodDescription:0x00007f897042d758 ...>, @name=:price, @as=:price, @desc="\n<p>Product price in specified currency.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=true, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false, @validator=#<Apipie::Validator::TypeValidator:122640 param_description: ParamDescription: products#update#price>, @validations=[], @additional_properties=nil, @from_concern=nil>}>>], @see=[], @formats=nil, @examples=[], @metadata=nil>, @name=:product, @as=:product, @desc="\n<p>Updated product.</p>\n", @parent=nil, @metadata=nil, @required=true, @response_only=false, @request_only=false, @show=true, @allow_nil=false, @allow_blank=false>} not found.):
  
app/controllers/api/v1/products_controller.rb:78:in `<class:ProductsController>'
app/controllers/api/v1/products_controller.rb:2:in `<main>'
Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:08:02 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 101)
Completed 500 Internal Server Error in 22ms (Views: 3.4ms | ActiveRecord: 4.6ms | Allocations: 4828)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:08:06 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:80:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:80:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.8ms | Allocations: 229)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.6ms | Allocations: 410)
Completed 200 OK in 55ms (Views: 6.6ms | ActiveRecord: 8.8ms | Allocations: 8861)


Started GET "/apipie/1.0/products.html" for 172.24.0.1 at 2022-01-19 06:08:18 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/resource.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.1ms | Allocations: 627)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.2ms | Allocations: 781)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 3.8ms | Allocations: 1620)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.4ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 11.2ms | Allocations: 2683)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.9ms | Allocations: 396)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 4.3ms | Allocations: 850)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 2.5ms | Allocations: 779)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 13.8ms | Allocations: 1995)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/resource.html.erb within layouts/apipie/apipie (Duration: 30.9ms | Allocations: 5003)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 34.2ms | Allocations: 5227)
Completed 200 OK in 185ms (Views: 37.9ms | ActiveRecord: 0.0ms | Allocations: 36210)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 06:08:18 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 06:08:18 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 06:08:18 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 06:08:18 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 06:08:18 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 06:08:18 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 06:08:18 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 06:08:18 +0000
Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:09:40 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.6ms | Allocations: 101)
Completed 500 Internal Server Error in 33ms (Views: 4.7ms | ActiveRecord: 6.1ms | Allocations: 4832)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:09:41 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 64)
Completed 500 Internal Server Error in 12ms (Views: 6.2ms | ActiveRecord: 0.8ms | Allocations: 972)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:09:42 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 64)
Completed 500 Internal Server Error in 8ms (Views: 2.9ms | ActiveRecord: 0.6ms | Allocations: 862)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:09:43 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.2ms | Allocations: 64)
Completed 500 Internal Server Error in 9ms (Views: 3.2ms | ActiveRecord: 0.5ms | Allocations: 862)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=10" for 172.24.0.1 at 2022-01-19 06:10:01 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"10"}, "id"=>"1"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:80:in `update'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:80:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.7ms | Allocations: 229)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.3ms | Allocations: 410)
Completed 200 OK in 62ms (Views: 5.3ms | ActiveRecord: 6.7ms | Allocations: 8815)


Started PUT "/api/v1/products/1?product[currency]=eur" for 172.24.0.1 at 2022-01-19 06:10:08 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 66)
Completed 500 Internal Server Error in 9ms (Views: 2.9ms | ActiveRecord: 0.5ms | Allocations: 989)


Started PUT "/api/v1/products/333" for 172.24.0.1 at 2022-01-19 06:10:22 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"id"=>"333"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 333], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.4ms | Allocations: 64)
Completed 404 Not Found in 11ms (Views: 5.9ms | ActiveRecord: 0.5ms | Allocations: 800)


Started GET "/api/v1/products" for 172.24.0.1 at 2022-01-19 06:10:31 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 5.0ms | Allocations: 451)
  Rendered common/_list.json.jbuilder (Duration: 14.8ms | Allocations: 1250)
  Rendered api/v1/products/index.json.jbuilder (Duration: 16.7ms | Allocations: 1481)
Completed 200 OK in 51ms (Views: 44.6ms | ActiveRecord: 1.4ms | Allocations: 2324)


Started GET "/api/v1/products?page=10000" for 172.24.0.1 at 2022-01-19 06:10:41 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"10000"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.5ms | Allocations: 423)
  Rendered common/_list.json.jbuilder (Duration: 11.2ms | Allocations: 1292)
  Rendered api/v1/products/index.json.jbuilder (Duration: 14.1ms | Allocations: 1530)
Completed 200 OK in 26ms (Views: 15.6ms | ActiveRecord: 1.4ms | Allocations: 3144)


Started GET "/api/v1/products?page=-10000" for 172.24.0.1 at 2022-01-19 06:10:45 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"-10000"}
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 64)
Completed 500 Internal Server Error in 5ms (Views: 4.4ms | ActiveRecord: 0.0ms | Allocations: 347)


Started GET "/api/v1/products?page=10000" for 172.24.0.1 at 2022-01-19 06:10:56 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"10000"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.5ms | Allocations: 423)
  Rendered common/_list.json.jbuilder (Duration: 9.7ms | Allocations: 1270)
  Rendered api/v1/products/index.json.jbuilder (Duration: 15.5ms | Allocations: 1508)
Completed 200 OK in 30ms (Views: 18.4ms | ActiveRecord: 1.2ms | Allocations: 2991)


Started GET "/apipie/1.0/products.html" for 172.24.0.1 at 2022-01-19 06:12:20 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/resource.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.2ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.0ms | Allocations: 619)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.2ms | Allocations: 785)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 4.3ms | Allocations: 1636)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 11.1ms | Allocations: 2691)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.6ms | Allocations: 402)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 3.7ms | Allocations: 856)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.2ms | Allocations: 779)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 11.5ms | Allocations: 2003)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/resource.html.erb within layouts/apipie/apipie (Duration: 31.2ms | Allocations: 5019)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 34.2ms | Allocations: 5243)
Completed 200 OK in 212ms (Views: 37.6ms | ActiveRecord: 0.0ms | Allocations: 37047)


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 06:12:20 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 06:12:20 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 06:12:20 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 06:12:20 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 06:12:20 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 06:12:21 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 06:12:21 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 06:12:21 +0000
Started GET "/api/v1/products?page=10000" for 172.24.0.1 at 2022-01-19 06:12:25 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"10000"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.5ms | Allocations: 547)
  Rendered common/_list.json.jbuilder (Duration: 13.7ms | Allocations: 2870)
  Rendered api/v1/products/index.json.jbuilder (Duration: 15.2ms | Allocations: 3148)
Completed 200 OK in 43ms (Views: 13.6ms | ActiveRecord: 7.0ms | Allocations: 7149)


Started GET "/api/v1/products?page=-10000" for 172.24.0.1 at 2022-01-19 06:12:29 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"-10000"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 0.8ms | Allocations: 423)
  Rendered common/_list.json.jbuilder (Duration: 6.5ms | Allocations: 1270)
  Rendered api/v1/products/index.json.jbuilder (Duration: 7.9ms | Allocations: 1508)
Completed 200 OK in 25ms (Views: 9.6ms | ActiveRecord: 1.6ms | Allocations: 3045)


Started GET "/api/v1/products?page=10000" for 172.24.0.1 at 2022-01-19 06:12:34 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"10000"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.1ms | Allocations: 423)
  Rendered common/_list.json.jbuilder (Duration: 9.1ms | Allocations: 1270)
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.2ms | Allocations: 1508)
Completed 200 OK in 25ms (Views: 13.4ms | ActiveRecord: 1.4ms | Allocations: 2988)


Started GET "/api/v1/products?page=10000&page_size=1000" for 172.24.0.1 at 2022-01-19 06:12:40 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"10000", "page_size"=>"1000"}
  [1m[36mProduct Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.3ms | Allocations: 423)
  Rendered common/_list.json.jbuilder (Duration: 5.6ms | Allocations: 1270)
  Rendered api/v1/products/index.json.jbuilder (Duration: 7.0ms | Allocations: 1508)
Completed 200 OK in 16ms (Views: 8.5ms | ActiveRecord: 1.0ms | Allocations: 2988)


Started GET "/api/v1/products?page=10000&page_size=1000" for 172.24.0.1 at 2022-01-19 06:12:42 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"10000", "page_size"=>"1000"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 1000], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.2ms | Allocations: 423)
  Rendered common/_list.json.jbuilder (Duration: 9.1ms | Allocations: 1270)
  Rendered api/v1/products/index.json.jbuilder (Duration: 12.1ms | Allocations: 1508)
Completed 200 OK in 25ms (Views: 14.6ms | ActiveRecord: 1.7ms | Allocations: 2987)


Started GET "/api/v1/products?page=10000&page_size=-1000" for 172.24.0.1 at 2022-01-19 06:12:47 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"10000", "page_size"=>"-1000"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.1ms | Allocations: 423)
  Rendered common/_list.json.jbuilder (Duration: 7.0ms | Allocations: 1270)
  Rendered api/v1/products/index.json.jbuilder (Duration: 8.4ms | Allocations: 1508)
Completed 200 OK in 19ms (Views: 10.3ms | ActiveRecord: 1.0ms | Allocations: 2988)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=-10" for 172.24.0.1 at 2022-01-19 06:15:03 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-10"}, "id"=>"1"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:80:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:80:in `update'
Completed 422 Unprocessable Entity in 42ms (Views: 1.0ms | ActiveRecord: 7.8ms | Allocations: 8642)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=-10" for 172.24.0.1 at 2022-01-19 06:18:38 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-10"}, "id"=>"1"}
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:96:in `set_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mProduct Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:81:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:81:in `update'
Completed 422 Unprocessable Entity in 115ms (Views: 1.1ms | ActiveRecord: 9.8ms | Allocations: 15007)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=-10" for 172.24.0.1 at 2022-01-19 06:18:42 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"-10"}, "id"=>"1"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:96:in `set_product'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:81:in `update'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:81:in `update'
Completed 422 Unprocessable Entity in 20ms (Views: 0.8ms | ActiveRecord: 1.9ms | Allocations: 4570)


Started PUT "/api/v1/products/1?product[currency]=eur" for 172.24.0.1 at 2022-01-19 06:18:46 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:96:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:81:in `update'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:81:in `update'
Completed 422 Unprocessable Entity in 29ms (Views: 0.8ms | ActiveRecord: 2.1ms | Allocations: 4243)


Started PUT "/api/v1/products/1?product[currency]=eur" for 172.24.0.1 at 2022-01-19 06:18:48 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:96:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:81:in `update'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:81:in `update'
Completed 422 Unprocessable Entity in 23ms (Views: 0.9ms | ActiveRecord: 2.1ms | Allocations: 4241)


Started PUT "/api/v1/products/1" for 172.24.0.1 at 2022-01-19 06:18:55 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:96:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 5.6ms | Allocations: 366)
Completed 400 Bad Request in 42ms (Views: 37.2ms | ActiveRecord: 0.5ms | Allocations: 4786)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-19 06:21:50 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 2], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:22:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 2.5ms | Allocations: 204)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.4ms | Allocations: 126)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 8.6ms | Allocations: 742)
  Rendered common/_list.json.jbuilder (Duration: 13.2ms | Allocations: 1058)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 21.6ms | Allocations: 1842)
Completed 200 OK in 65ms (Views: 26.0ms | ActiveRecord: 9.4ms | Allocations: 7656)


Started GET "/apipie/1.0/products.html" for 172.24.0.1 at 2022-01-19 06:23:15 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/resource.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.4ms | Allocations: 146)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.8ms | Allocations: 283)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 2.7ms | Allocations: 1144)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 2.0ms | Allocations: 1282)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 4.4ms | Allocations: 2153)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 15.2ms | Allocations: 4613)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.5ms | Allocations: 402)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 2.4ms | Allocations: 856)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.5ms | Allocations: 785)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 10.6ms | Allocations: 2144)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/resource.html.erb within layouts/apipie/apipie (Duration: 37.4ms | Allocations: 8681)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 41.2ms | Allocations: 9158)
Completed 200 OK in 216ms (Views: 46.7ms | ActiveRecord: 0.0ms | Allocations: 41909)


Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 06:23:15 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 06:23:15 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 06:23:15 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 06:23:15 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 06:23:15 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 06:23:15 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 06:23:15 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 06:23:16 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 06:23:16 +0000
Started GET "/apipie/1.0.html" for 172.24.0.1 at 2022-01-19 06:23:17 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 16)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 3.3ms | Allocations: 963)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 5.1ms | Allocations: 1187)
Completed 200 OK in 137ms (Views: 8.6ms | ActiveRecord: 0.0ms | Allocations: 34862)


Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 06:23:18 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 06:23:18 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 06:23:18 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 06:23:18 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 06:23:18 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 06:23:18 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 06:23:18 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 06:23:18 +0000
Started GET "/apipie/1.0/basket/check.html" for 172.24.0.1 at 2022-01-19 06:23:21 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"basket", "method"=>"check.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 16)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.0ms | Allocations: 452)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.2ms | Allocations: 787)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 3.1ms | Allocations: 1244)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 6.3ms | Allocations: 1699)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 15.4ms | Allocations: 2725)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 19.6ms | Allocations: 3439)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 22.8ms | Allocations: 3664)
Completed 200 OK in 187ms (Views: 28.0ms | ActiveRecord: 0.0ms | Allocations: 32477)


Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 06:23:21 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 06:23:21 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 06:23:21 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 06:23:21 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 06:23:21 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 06:23:21 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 06:23:21 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 06:23:21 +0000
Started GET "/api/v1/basket/check" for 172.24.0.1 at 2022-01-19 06:23:36 +0000
Processing by Api::V1::BasketController#check as JSON
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.4ms | Allocations: 99)
Completed 400 Bad Request in 9ms (Views: 4.1ms | ActiveRecord: 0.0ms | Allocations: 957)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie" for 172.24.0.1 at 2022-01-19 06:23:54 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie"]}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  ↳ app/models/non_persistent/basket.rb:22:in `map'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.4ms | Allocations: 141)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.4ms | Allocations: 126)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 3.4ms | Allocations: 498)
  Rendered common/_list.json.jbuilder (Duration: 4.6ms | Allocations: 617)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 7.1ms | Allocations: 1139)
Completed 200 OK in 40ms (Views: 9.8ms | ActiveRecord: 6.5ms | Allocations: 6710)


Started GET "/apipie/1.0.html" for 172.24.0.1 at 2022-01-19 06:24:03 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 1.9ms | Allocations: 229)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 5.0ms | Allocations: 453)
Completed 200 OK in 166ms (Views: 8.0ms | ActiveRecord: 0.0ms | Allocations: 34462)


Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 06:24:04 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 06:24:04 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 06:24:04 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 06:24:04 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 06:24:04 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 06:24:04 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 06:24:04 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 06:24:04 +0000
Started GET "/apipie/1.0/products/index.html" for 172.24.0.1 at 2022-01-19 06:24:13 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.3ms | Allocations: 631)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.1ms | Allocations: 785)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 13.7ms | Allocations: 1642)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 21.8ms | Allocations: 2710)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 26.0ms | Allocations: 2895)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 29.5ms | Allocations: 3120)
Completed 200 OK in 212ms (Views: 34.1ms | ActiveRecord: 0.0ms | Allocations: 33192)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 06:24:13 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 06:24:13 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 06:24:13 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 06:24:13 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 06:24:13 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 06:24:13 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 06:24:13 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 06:24:14 +0000
Started GET "/apipie/1.0/basket/check.html" for 172.24.0.1 at 2022-01-19 06:24:18 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"basket", "method"=>"check.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.0ms | Allocations: 452)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.3ms | Allocations: 787)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 3.5ms | Allocations: 1244)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 5.7ms | Allocations: 1699)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 13.3ms | Allocations: 2725)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 16.6ms | Allocations: 2910)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 20.2ms | Allocations: 3134)
Completed 200 OK in 174ms (Views: 23.2ms | ActiveRecord: 0.0ms | Allocations: 32497)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.24.0.1 at 2022-01-19 06:24:18 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.24.0.1 at 2022-01-19 06:24:18 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.24.0.1 at 2022-01-19 06:24:18 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.24.0.1 at 2022-01-19 06:24:18 +0000
Started GET "/apipie/stylesheets/application.css" for 172.24.0.1 at 2022-01-19 06:24:18 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.24.0.1 at 2022-01-19 06:24:18 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.24.0.1 at 2022-01-19 06:24:18 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.24.0.1 at 2022-01-19 06:24:19 +0000
Started GET "/api/v1/products" for 172.24.0.1 at 2022-01-19 06:25:21 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.7ms | Allocations: 618)
  Rendered common/_list.json.jbuilder (Duration: 14.5ms | Allocations: 2929)
  Rendered api/v1/products/index.json.jbuilder (Duration: 17.4ms | Allocations: 3286)
Completed 200 OK in 34ms (Views: 16.2ms | ActiveRecord: 6.8ms | Allocations: 6527)


Started GET "/api/v1/products?page=10000" for 172.24.0.1 at 2022-01-19 06:25:27 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"10000"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:14
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.8ms | Allocations: 423)
  Rendered common/_list.json.jbuilder (Duration: 8.8ms | Allocations: 1306)
  Rendered api/v1/products/index.json.jbuilder (Duration: 10.6ms | Allocations: 1544)
Completed 200 OK in 23ms (Views: 12.8ms | ActiveRecord: 1.3ms | Allocations: 3188)


Started PUT "/api/v1/product/2" for 172.24.0.1 at 2022-01-19 06:25:38 +0000
  
ActionController::RoutingError (No route matches [PUT] "/api/v1/product/2"):
  
Started PUT "/api/v1/product/1" for 172.24.0.1 at 2022-01-19 06:25:56 +0000
  
ActionController::RoutingError (No route matches [PUT] "/api/v1/product/1"):
  
Started PUT "/api/v1/products/133212" for 172.24.0.1 at 2022-01-19 06:26:01 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"id"=>"133212"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 133212], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:97:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 100)
Completed 404 Not Found in 29ms (Views: 3.8ms | ActiveRecord: 5.8ms | Allocations: 3591)


Started PUT "/api/v1/products/1?product[currency]=eur" for 172.24.0.1 at 2022-01-19 06:26:07 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:97:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:29:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:82:in `update'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:82:in `update'
Completed 422 Unprocessable Entity in 29ms (Views: 0.9ms | ActiveRecord: 2.1ms | Allocations: 6065)


Started PUT "/api/v1/products/1?product[currency]=sddd" for 172.24.0.1 at 2022-01-19 06:26:11 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"sddd"}, "id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:97:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:34:in `rescue in _update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:34:in `rescue in _update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:82:in `update'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:82:in `update'
Completed 422 Unprocessable Entity in 25ms (Views: 0.2ms | ActiveRecord: 2.6ms | Allocations: 3872)


Started PUT "/api/v1/products/1" for 172.24.0.1 at 2022-01-19 06:26:15 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:97:in `set_product'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.4ms | Allocations: 64)
Completed 400 Bad Request in 9ms (Views: 3.0ms | ActiveRecord: 0.7ms | Allocations: 874)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (3.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProductCodes (20220119064227)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (28.3ms)[0m  [1m[35mCREATE TABLE "product_codes" ("id" bigserial primary key, "code" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064227"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddProductCodeToProducts (20220119070058)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "products" ADD "product_code_id" bigint NOT NULL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (338.7ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" integer NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'EUR' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodes (20220119064227)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "product_codes" ("id" bigserial primary key, "code" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064227"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddProductCodeToProducts (20220119070058)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "products" ADD "product_code_id" bigint NOT NULL[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE INDEX "index_products_on_product_code_id" ON "products" ("product_code_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_4f9167e826"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070058"]]
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodeDiscounts (20220119070711)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "product_code_discounts" ("id" bigserial primary key, "product_code_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c68b40f39b"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
, CONSTRAINT "fk_rails_a5f12038fa"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_product_code_id" ON "product_code_discounts" ("product_code_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_discount_id" ON "product_code_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070711"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-19 07:50:42.921109"], ["updated_at", "2022-01-19 07:50:42.921109"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.3ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 1], ["code", "hoodie"], ["created_at", "2022-01-19 07:50:47.446511"], ["updated_at", "2022-01-19 07:50:47.446511"]]
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (0.9ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 2], ["code", "tshirt"], ["created_at", "2022-01-19 07:50:47.461495"], ["updated_at", "2022-01-19 07:50:47.461495"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (0.9ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 3], ["code", "mug"], ["created_at", "2022-01-19 07:50:47.472562"], ["updated_at", "2022-01-19 07:50:47.472562"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (1.5ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-19 07:50:47.553151"], ["updated_at", "2022-01-19 07:50:47.553151"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (1.2ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-19 07:50:47.565345"], ["updated_at", "2022-01-19 07:50:47.565345"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCodeDiscount Create (2.1ms)[0m  [1m[32mINSERT INTO "product_code_discounts" ("product_code_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_code_id", 3], ["discount_id", 1], ["created_at", "2022-01-19 07:50:47.737013"], ["updated_at", "2022-01-19 07:50:47.737013"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCodeDiscount Create (1.2ms)[0m  [1m[32mINSERT INTO "product_code_discounts" ("product_code_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_code_id", 3], ["discount_id", 2], ["created_at", "2022-01-19 07:50:47.758451"], ["updated_at", "2022-01-19 07:50:47.758451"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at", "product_code_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Reedsy Mug"], ["code", 0], ["price_cents", 600], ["price_currency", "EUR"], ["created_at", "2022-01-19 07:50:48.074150"], ["updated_at", "2022-01-19 07:50:48.074150"], ["product_code_id", 3]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at", "product_code_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Reedsy T-shirt"], ["code", 1], ["price_cents", 1500], ["price_currency", "EUR"], ["created_at", "2022-01-19 07:50:48.091775"], ["updated_at", "2022-01-19 07:50:48.091775"], ["product_code_id", 2]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at", "product_code_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Reedsy Hoodie"], ["code", 2], ["price_cents", 2000], ["price_currency", "EUR"], ["created_at", "2022-01-19 07:50:48.110321"], ["updated_at", "2022-01-19 07:50:48.110321"], ["product_code_id", 1]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes"[0m
  [1m[36mProduct Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", 0], ["code", 2]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 0], ["code", 0]]
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 0], ["code", 0]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 0], ["code", 0]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 0], ["code", 0]]
  [1m[36mProductCode Load (2.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 0], ["code", 0]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", 0], ["code", 0], ["code", 0]]
  [1m[36mProduct Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" = $1[0m  [["code", 0]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" = $1[0m  [["code", 0]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" = $1[0m  [["code", "mug"]]
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2)[0m  [["code", "mug"], ["code", "hoodie"]]
  [1m[36mProduct Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."product_codes" = $1[0m  [["product_codes", "mug"]]
  [1m[36mProduct Count (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" = $1[0m  [["code", "mug"]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" = $1[0m  [["code", "mug"]]
  [1m[36mProductCode Load (0.4ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Count (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" = $1[0m  [["code", "mug"]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" = $1[0m  [["code", "mug"]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Count (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" = $1[0m  [["code", "mug"]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" = $1[0m  [["code", "mug"]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Count (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2)[0m  [["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2)[0m  [["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCode Load (1.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Count (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.5ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Count (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProduct Load (1.9ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Count (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCode Load (2.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Count (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.5ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProduct Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE 1=0[0m
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Count (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.3ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProduct Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" = $1[0m  [["code", "mug"]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" = $1[0m  [["code", "mug"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Count (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProductCode Load (0.5ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.5ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.5ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Count (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Count (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.4ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Count (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProduct Count (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Count (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Count (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "mug"]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (403.3ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (9.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" integer NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'EUR' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodes (20220119064227)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "product_codes" ("id" bigserial primary key, "code" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064227"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddProductCodeToProducts (20220119070058)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "products" ADD "product_code_id" bigint NOT NULL[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_products_on_product_code_id" ON "products" ("product_code_id")[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_4f9167e826"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070058"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodeDiscounts (20220119070711)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "product_code_discounts" ("id" bigserial primary key, "product_code_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c68b40f39b"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
, CONSTRAINT "fk_rails_a5f12038fa"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_product_code_id" ON "product_code_discounts" ("product_code_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_discount_id" ON "product_code_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070711"]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-19 13:09:40.625211"], ["updated_at", "2022-01-19 13:09:40.625211"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.3ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 1], ["code", "hoodie"], ["created_at", "2022-01-19 13:09:44.976622"], ["updated_at", "2022-01-19 13:09:44.976622"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (0.8ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 2], ["code", "tshirt"], ["created_at", "2022-01-19 13:09:44.988983"], ["updated_at", "2022-01-19 13:09:44.988983"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (0.9ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 3], ["code", "mug"], ["created_at", "2022-01-19 13:09:44.997922"], ["updated_at", "2022-01-19 13:09:44.997922"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (1.3ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-19 13:09:45.043441"], ["updated_at", "2022-01-19 13:09:45.043441"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (1.2ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-19 13:09:45.056100"], ["updated_at", "2022-01-19 13:09:45.056100"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCodeDiscount Create (1.7ms)[0m  [1m[32mINSERT INTO "product_code_discounts" ("product_code_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_code_id", 3], ["discount_id", 1], ["created_at", "2022-01-19 13:09:45.219283"], ["updated_at", "2022-01-19 13:09:45.219283"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.4ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCodeDiscount Create (0.9ms)[0m  [1m[32mINSERT INTO "product_code_discounts" ("product_code_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_code_id", 3], ["discount_id", 2], ["created_at", "2022-01-19 13:09:45.235671"], ["updated_at", "2022-01-19 13:09:45.235671"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (2.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at", "product_code_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Reedsy Mug"], ["code", 0], ["price_cents", 600], ["price_currency", "EUR"], ["created_at", "2022-01-19 13:09:45.612229"], ["updated_at", "2022-01-19 13:09:45.612229"], ["product_code_id", 3]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at", "product_code_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Reedsy T-shirt"], ["code", 1], ["price_cents", 1500], ["price_currency", "EUR"], ["created_at", "2022-01-19 13:09:45.636260"], ["updated_at", "2022-01-19 13:09:45.636260"], ["product_code_id", 2]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at", "product_code_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Reedsy Hoodie"], ["code", 2], ["price_cents", 2000], ["price_currency", "EUR"], ["created_at", "2022-01-19 13:09:45.675659"], ["updated_at", "2022-01-19 13:09:45.675659"], ["product_code_id", 1]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Count (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.5ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProduct Count (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.3ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.5ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (3.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.4ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.4ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.6ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.5ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.3ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.5ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCode Load (2.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProduct Count (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts"[0m
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts"[0m
  [1m[36mProductCode Load (2.3ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProduct Count (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.6ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE 1=0[0m
  [1m[36mProduct Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (6.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.3ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.6ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.4ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.3ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.3ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (2.4ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (2.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.3ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mDiscount Load (1.6ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Count (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.3ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.4ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (5.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (3.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.4ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.5ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.3ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.3ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (2.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.3ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.4ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (2.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (3.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.3ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.3ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts"[0m
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts"[0m
  [1m[36mProductCode Load (1.3ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[35m (1.0ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (344.8ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (13.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (12.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" integer NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'EUR' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodes (20220119064227)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "product_codes" ("id" bigserial primary key, "code" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064227"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddProductCodeToProducts (20220119070058)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "products" ADD "product_code_id" bigint NOT NULL[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE INDEX "index_products_on_product_code_id" ON "products" ("product_code_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_4f9167e826"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070058"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodeDiscounts (20220119070711)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE "product_code_discounts" ("id" bigserial primary key, "product_code_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c68b40f39b"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
, CONSTRAINT "fk_rails_a5f12038fa"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_product_code_id" ON "product_code_discounts" ("product_code_id")[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_discount_id" ON "product_code_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070711"]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-19 14:45:08.455085"], ["updated_at", "2022-01-19 14:45:08.455085"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (3.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (3.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (2.6ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 1], ["code", "hoodie"], ["created_at", "2022-01-19 14:45:13.535601"], ["updated_at", "2022-01-19 14:45:13.535601"]]
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.1ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 2], ["code", "tshirt"], ["created_at", "2022-01-19 14:45:13.557941"], ["updated_at", "2022-01-19 14:45:13.557941"]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (2.4ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 3], ["code", "mug"], ["created_at", "2022-01-19 14:45:13.572136"], ["updated_at", "2022-01-19 14:45:13.572136"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (2.8ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-19 14:45:13.611124"], ["updated_at", "2022-01-19 14:45:13.611124"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (4.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (5.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (3.1ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 1], ["code", "hoodie"], ["created_at", "2022-01-19 14:46:46.083053"], ["updated_at", "2022-01-19 14:46:46.083053"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (479.7ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (12.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.8ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" integer NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'EUR' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodes (20220119064227)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "product_codes" ("id" bigserial primary key, "code" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064227"]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddProductCodeToProducts (20220119070058)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "products" ADD "product_code_id" bigint NOT NULL[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE INDEX "index_products_on_product_code_id" ON "products" ("product_code_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_4f9167e826"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070058"]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodeDiscounts (20220119070711)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.1ms)[0m  [1m[35mCREATE TABLE "product_code_discounts" ("id" bigserial primary key, "product_code_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c68b40f39b"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
, CONSTRAINT "fk_rails_a5f12038fa"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_product_code_id" ON "product_code_discounts" ("product_code_id")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_discount_id" ON "product_code_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070711"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-19 14:52:35.276944"], ["updated_at", "2022-01-19 14:52:35.276944"]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (3.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.5ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 1], ["code", "hoodie"], ["created_at", "2022-01-19 14:52:41.268309"], ["updated_at", "2022-01-19 14:52:41.268309"]]
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.6ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 2], ["code", "tshirt"], ["created_at", "2022-01-19 14:52:41.286965"], ["updated_at", "2022-01-19 14:52:41.286965"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.5ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 3], ["code", "mug"], ["created_at", "2022-01-19 14:52:41.300938"], ["updated_at", "2022-01-19 14:52:41.300938"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (1.4ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-19 14:52:41.364445"], ["updated_at", "2022-01-19 14:52:41.364445"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCodeDiscount Create (2.8ms)[0m  [1m[32mINSERT INTO "product_code_discounts" ("product_code_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_code_id", 3], ["discount_id", 1], ["created_at", "2022-01-19 14:52:41.580955"], ["updated_at", "2022-01-19 14:52:41.580955"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (2.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at", "product_code_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Reedsy Mug"], ["code", 0], ["price_cents", 600], ["price_currency", "EUR"], ["created_at", "2022-01-19 14:52:42.092068"], ["updated_at", "2022-01-19 14:52:42.092068"], ["product_code_id", 3]]
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (1.3ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at", "product_code_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Reedsy T-shirt"], ["code", 1], ["price_cents", 1500], ["price_currency", "EUR"], ["created_at", "2022-01-19 14:52:42.120937"], ["updated_at", "2022-01-19 14:52:42.120937"], ["product_code_id", 2]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at", "product_code_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Reedsy Hoodie"], ["code", 2], ["price_cents", 2000], ["price_currency", "EUR"], ["created_at", "2022-01-19 14:52:42.147291"], ["updated_at", "2022-01-19 14:52:42.147291"], ["product_code_id", 1]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Count (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.4ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProduct Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProductCode Load (1.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts"[0m
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts"[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.8ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 1], ["code", "hoodie"], ["created_at", "2022-01-19 14:55:04.792719"], ["updated_at", "2022-01-19 14:55:04.792719"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (366.5ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (12.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'EUR' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodes (20220119064227)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "product_codes" ("id" bigserial primary key, "code" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064227"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddProductCodeToProducts (20220119070058)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "products" ADD "product_code_id" bigint NOT NULL[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_products_on_product_code_id" ON "products" ("product_code_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_4f9167e826"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070058"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodeDiscounts (20220119070711)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "product_code_discounts" ("id" bigserial primary key, "product_code_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c68b40f39b"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
, CONSTRAINT "fk_rails_a5f12038fa"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_product_code_id" ON "product_code_discounts" ("product_code_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_discount_id" ON "product_code_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070711"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-19 15:02:40.542570"], ["updated_at", "2022-01-19 15:02:40.542570"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.2ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 1], ["code", "hoodie"], ["created_at", "2022-01-19 15:02:45.149443"], ["updated_at", "2022-01-19 15:02:45.149443"]]
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.2ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 2], ["code", "tshirt"], ["created_at", "2022-01-19 15:02:45.161625"], ["updated_at", "2022-01-19 15:02:45.161625"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.0ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 3], ["code", "mug"], ["created_at", "2022-01-19 15:02:45.176969"], ["updated_at", "2022-01-19 15:02:45.176969"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (1.1ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-19 15:02:45.211137"], ["updated_at", "2022-01-19 15:02:45.211137"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (0.9ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-19 15:02:45.221460"], ["updated_at", "2022-01-19 15:02:45.221460"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCodeDiscount Create (2.0ms)[0m  [1m[32mINSERT INTO "product_code_discounts" ("product_code_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_code_id", 3], ["discount_id", 1], ["created_at", "2022-01-19 15:02:45.361115"], ["updated_at", "2022-01-19 15:02:45.361115"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCodeDiscount Create (1.3ms)[0m  [1m[32mINSERT INTO "product_code_discounts" ("product_code_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_code_id", 2], ["discount_id", 2], ["created_at", "2022-01-19 15:02:45.379798"], ["updated_at", "2022-01-19 15:02:45.379798"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (432.9ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (15.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'EUR' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodes (20220119064227)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE TABLE "product_codes" ("id" bigserial primary key, "code" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064227"]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddProductCodeToProducts (20220119070058)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "products" ADD "product_code_id" bigint NOT NULL[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE INDEX "index_products_on_product_code_id" ON "products" ("product_code_id")[0m
  [1m[35m (4.1ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_4f9167e826"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070058"]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodeDiscounts (20220119070711)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.0ms)[0m  [1m[35mCREATE TABLE "product_code_discounts" ("id" bigserial primary key, "product_code_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c68b40f39b"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
, CONSTRAINT "fk_rails_a5f12038fa"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_product_code_id" ON "product_code_discounts" ("product_code_id")[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_discount_id" ON "product_code_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070711"]]
  [1m[36mTRANSACTION (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (3.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-19 15:06:16.373262"], ["updated_at", "2022-01-19 15:06:16.373262"]]
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (3.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.5ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 1], ["code", "hoodie"], ["created_at", "2022-01-19 15:06:22.172916"], ["updated_at", "2022-01-19 15:06:22.172916"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.1ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 2], ["code", "tshirt"], ["created_at", "2022-01-19 15:06:22.187609"], ["updated_at", "2022-01-19 15:06:22.187609"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.1ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 3], ["code", "mug"], ["created_at", "2022-01-19 15:06:22.201660"], ["updated_at", "2022-01-19 15:06:22.201660"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (1.4ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-19 15:06:22.238330"], ["updated_at", "2022-01-19 15:06:22.238330"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (2.0ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-19 15:06:22.252343"], ["updated_at", "2022-01-19 15:06:22.252343"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (1.5ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCodeDiscount Create (2.5ms)[0m  [1m[32mINSERT INTO "product_code_discounts" ("product_code_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_code_id", 3], ["discount_id", 1], ["created_at", "2022-01-19 15:06:22.484959"], ["updated_at", "2022-01-19 15:06:22.484959"]]
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCodeDiscount Create (1.1ms)[0m  [1m[32mINSERT INTO "product_code_discounts" ("product_code_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_code_id", 2], ["discount_id", 2], ["created_at", "2022-01-19 15:06:22.516377"], ["updated_at", "2022-01-19 15:06:22.516377"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (2.3ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (373.0ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'EUR' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodes (20220119064227)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE "product_codes" ("id" bigserial primary key, "code" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064227"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.0ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (5.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddProductCodeToProducts (20220119070058)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "products" ADD "product_code_id" bigint NOT NULL[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE INDEX "index_products_on_product_code_id" ON "products" ("product_code_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_4f9167e826"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070058"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductCodeDiscounts (20220119070711)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "product_code_discounts" ("id" bigserial primary key, "product_code_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c68b40f39b"
FOREIGN KEY ("product_code_id")
  REFERENCES "product_codes" ("id")
, CONSTRAINT "fk_rails_a5f12038fa"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_product_code_id" ON "product_code_discounts" ("product_code_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_product_code_discounts_on_discount_id" ON "product_code_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119070711"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-19 15:10:37.122775"], ["updated_at", "2022-01-19 15:10:37.122775"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (5.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (1.3ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 1], ["code", "hoodie"], ["created_at", "2022-01-19 15:10:41.400193"], ["updated_at", "2022-01-19 15:10:41.400193"]]
  [1m[36mTRANSACTION (10.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (0.6ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 2], ["code", "tshirt"], ["created_at", "2022-01-19 15:10:41.421497"], ["updated_at", "2022-01-19 15:10:41.421497"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Create (0.6ms)[0m  [1m[32mINSERT INTO "product_codes" ("id", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["id", 3], ["code", "mug"], ["created_at", "2022-01-19 15:10:41.431141"], ["updated_at", "2022-01-19 15:10:41.431141"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (1.3ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-19 15:10:41.460121"], ["updated_at", "2022-01-19 15:10:41.460121"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (0.9ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-19 15:10:41.471699"], ["updated_at", "2022-01-19 15:10:41.471699"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCodeDiscount Create (2.3ms)[0m  [1m[32mINSERT INTO "product_code_discounts" ("product_code_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_code_id", 3], ["discount_id", 1], ["created_at", "2022-01-19 15:10:41.633746"], ["updated_at", "2022-01-19 15:10:41.633746"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCodeDiscount Create (1.3ms)[0m  [1m[32mINSERT INTO "product_code_discounts" ("product_code_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_code_id", 2], ["discount_id", 2], ["created_at", "2022-01-19 15:10:41.654029"], ["updated_at", "2022-01-19 15:10:41.654029"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "price_cents", "price_currency", "created_at", "updated_at", "product_code_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy Mug"], ["price_cents", 600], ["price_currency", "EUR"], ["created_at", "2022-01-19 15:10:42.038511"], ["updated_at", "2022-01-19 15:10:42.038511"], ["product_code_id", 3]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "price_cents", "price_currency", "created_at", "updated_at", "product_code_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy T-shirt"], ["price_cents", 1500], ["price_currency", "EUR"], ["created_at", "2022-01-19 15:10:42.059491"], ["updated_at", "2022-01-19 15:10:42.059491"], ["product_code_id", 2]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "price_cents", "price_currency", "created_at", "updated_at", "product_code_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reedsy Hoodie"], ["price_cents", 2000], ["price_currency", "EUR"], ["created_at", "2022-01-19 15:10:42.088413"], ["updated_at", "2022-01-19 15:10:42.088413"], ["product_code_id", 1]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Count (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  [1m[36mProductCode Load (1.4ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (1.3ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.3ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.3ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (3.5ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.4ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (1.3ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.3ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (2.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.9ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.6ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4)[0m  [["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"]]
  [1m[36mProductCode Load (0.8ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts"[0m
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts"[0m
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts"[0m
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts"[0m
  [1m[36mProductCode Load (1.3ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProductCode Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Count (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_codes" "product_code" ON "product_code"."id" = "products"."product_code_id" WHERE "product_code"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  [1m[36mProductCode Load (0.7ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" WHERE "product_codes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 3]]
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 2]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_code_discounts" ON "discounts"."id" = "product_code_discounts"."discount_id" WHERE "product_code_discounts"."product_code_id" = $1[0m  [["product_code_id", 1]]
  [1m[36mProductCode Load (1.1ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mProductCode Load (1.2ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCode Load (1.0ms)[0m  [1m[34mSELECT "product_codes".* FROM "product_codes" INNER JOIN "product_code_discounts" ON "product_codes"."id" = "product_code_discounts"."product_code_id" WHERE "product_code_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mDiscount Load (1.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (362.5ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (18.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (13.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'EUR' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-19 16:26:35.051078"], ["updated_at", "2022-01-19 16:26:35.051078"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (9.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (1.5ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-19 16:26:40.442900"], ["updated_at", "2022-01-19 16:26:40.442900"]]
  [1m[36mTRANSACTION (128.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (0.9ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-19 16:26:40.586164"], ["updated_at", "2022-01-19 16:26:40.586164"]]
  [1m[36mTRANSACTION (15.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (392.2ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (17.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'EUR' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.2ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductDiscounts (20220119163021)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.0ms)[0m  [1m[35mCREATE TABLE "product_discounts" ("id" bigserial primary key, "product_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_bd840c8d3f"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
, CONSTRAINT "fk_rails_9547908de7"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_product_id" ON "product_discounts" ("product_id")[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_discount_id" ON "product_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119163021"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-19 16:55:08.437432"], ["updated_at", "2022-01-19 16:55:08.437432"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (1.2ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-19 16:55:13.470510"], ["updated_at", "2022-01-19 16:55:13.470510"]]
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (0.8ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-19 16:55:13.483859"], ["updated_at", "2022-01-19 16:55:13.483859"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (4.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "Reedsy Mug"], ["code", "mug"], ["price_cents", 600], ["price_currency", "EUR"], ["created_at", "2022-01-19 16:55:13.880806"], ["updated_at", "2022-01-19 16:55:13.880806"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "tshirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "Reedsy T-shirt"], ["code", "tshirt"], ["price_cents", 1500], ["price_currency", "EUR"], ["created_at", "2022-01-19 16:55:13.900790"], ["updated_at", "2022-01-19 16:55:13.900790"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "Reedsy Hoodie"], ["code", "hoodie"], ["price_cents", 2000], ["price_currency", "EUR"], ["created_at", "2022-01-19 16:55:13.918274"], ["updated_at", "2022-01-19 16:55:13.918274"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductDiscount Create (2.0ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 1], ["discount_id", 2], ["created_at", "2022-01-19 16:55:14.082638"], ["updated_at", "2022-01-19 16:55:14.082638"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductDiscount Create (1.2ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 2], ["discount_id", 2], ["created_at", "2022-01-19 16:55:14.112821"], ["updated_at", "2022-01-19 16:55:14.112821"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDiscount Load (5.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts"[0m
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (4.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mDiscount Load (1.3ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductDiscount Create (5.2ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 1], ["discount_id", 1], ["created_at", "2022-01-20 14:54:02.617983"], ["updated_at", "2022-01-20 14:54:02.617983"]]
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductDiscount Create (1.5ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 2], ["discount_id", 2], ["created_at", "2022-01-20 14:54:23.911304"], ["updated_at", "2022-01-20 14:54:23.911304"]]
  [1m[36mTRANSACTION (7.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProduct Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug1"], ["LIMIT", 1]]
  [1m[36mProduct Create (6.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test-mug"], ["code", "mug1"], ["price_cents", 100000], ["price_currency", "EUR"], ["created_at", "2022-01-20 16:06:42.133433"], ["updated_at", "2022-01-20 16:06:42.133433"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug2"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug13"], ["LIMIT", 1]]
  [1m[36mProduct Create (2.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test-mug2"], ["code", "mug13"], ["price_cents", 100000], ["price_currency", "EUR"], ["created_at", "2022-01-20 16:06:56.842265"], ["updated_at", "2022-01-20 16:06:56.842265"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug2333"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug13"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.9ms)[0m  [1m[32mINSERT INTO "products" ("name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test-mug2333"], ["code", "mug13"], ["price_cents", 100000], ["price_currency", "EUR"], ["created_at", "2022-01-20 16:07:10.114589"], ["updated_at", "2022-01-20 16:07:10.114589"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug2333"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug13"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.4ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 5], ["name", "test-mug2333"], ["code", "mug13"], ["price_cents", 100000], ["price_currency", "EUR"], ["created_at", "2022-01-20 16:07:20.977413"], ["updated_at", "2022-01-20 16:07:20.977413"]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug2333"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug13"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-mug2333"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug1323"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-update"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "test-update"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Update (0.8ms)[0m  [1m[33mUPDATE "products" SET "price_cents" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["price_cents", 100], ["updated_at", "2022-01-20 16:11:43.601397"], ["id", 1]]
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (7.1ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/basket/check?product_codes[]=mrrreug&product_codes[]=hoodie&product_codes[]=hoodie" for 172.28.0.1 at 2022-01-20 16:20:41 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (3.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mrrreug", "hoodie", "hoodie"]}
  [1m[36mProduct Count (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "mrrreug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "mrrreug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 14.0ms | Allocations: 500)
Completed 422 Unprocessable Entity in 188ms (Views: 116.7ms | ActiveRecord: 11.6ms | Allocations: 12757)


Started GET "/api/v1/basket/check?product_codes[]=hoodie&product_codes[]=hoodie" for 172.28.0.1 at 2022-01-20 16:20:53 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["hoodie", "hoodie"]}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 4.1ms | Allocations: 204)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [1 times] (Duration: 10.5ms | Allocations: 516)
  Rendered common/_list.json.jbuilder (Duration: 17.5ms | Allocations: 844)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 197.5ms | Allocations: 12960)
Completed 200 OK in 236ms (Views: 190.6ms | ActiveRecord: 13.4ms | Allocations: 14821)


Started GET "/api/v1/basket/check?product_codes[]=hoodie&product_codes[]=hoodie" for 172.28.0.1 at 2022-01-20 16:31:36 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["hoodie", "hoodie"]}
  [1m[36mProduct Count (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (2.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  Rendered common/_list.json.jbuilder (Duration: 38.2ms | Allocations: 4352)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 63.8ms | Allocations: 6124)
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 4.8ms | Allocations: 160)
Completed 500 Internal Server Error in 133ms (Views: 11.4ms | ActiveRecord: 25.1ms | Allocations: 10812)


Started GET "/api/v1/basket/check?product_codes[]=hoodie&product_codes[]=hoodie" for 172.28.0.1 at 2022-01-20 16:31:38 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["hoodie", "hoodie"]}
  [1m[36mProduct Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  Rendered common/_list.json.jbuilder (Duration: 3.6ms | Allocations: 1293)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 19.9ms | Allocations: 2617)
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.2ms | Allocations: 60)
Completed 500 Internal Server Error in 48ms (Views: 4.0ms | ActiveRecord: 3.6ms | Allocations: 4391)


Started GET "/api/v1/basket/check?product_codes[]=hoodie&product_codes[]=hoodie" for 172.28.0.1 at 2022-01-20 16:32:04 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["hoodie", "hoodie"]}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  Rendered common/_list.json.jbuilder (Duration: 2.2ms | Allocations: 1280)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 10.9ms | Allocations: 2504)
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 60)
Completed 500 Internal Server Error in 41ms (Views: 7.2ms | ActiveRecord: 3.0ms | Allocations: 4120)


Started GET "/api/v1/basket/check?product_codes[]=hoodie&product_codes[]=hoodie" for 172.28.0.1 at 2022-01-20 16:32:29 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["hoodie", "hoodie"]}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  Rendered common/_list.json.jbuilder (Duration: 4.3ms | Allocations: 1303)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 43.8ms | Allocations: 6575)
Completed 500 Internal Server Error in 107ms (ActiveRecord: 17.7ms | Allocations: 12647)


  
ActionView::Template::Error (undefined method `map' for "data":String
Did you mean?  tap):
    10: json.total total if total
    11: json.page page if page
    12: json.page_size page_size if page_size
    13: json.('data') do
    14:   json.array! resources, partial: resource_template, as: resource_name
    15: end
  
app/views/common/_list.json.jbuilder:13
app/views/api/v1/basket/check.json.jbuilder:12
app/controllers/api/v1/basket_controller.rb:32:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=hoodie&product_codes[]=hoodie" for 172.28.0.1 at 2022-01-20 16:33:49 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["hoodie", "hoodie"]}
  [1m[36mProduct Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  Rendered common/_list.json.jbuilder (Duration: 6.8ms | Allocations: 1395)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 23.8ms | Allocations: 3076)
Completed 500 Internal Server Error in 46ms (ActiveRecord: 3.3ms | Allocations: 4941)


  
ActionView::Template::Error (undefined method `map' for "data":String
Did you mean?  tap):
    10: json.total total if total
    11: json.page page if page
    12: json.page_size page_size if page_size
    13: json['data'] do
    14:   json.array! resources, partial: resource_template, as: resource_name
    15: end
  
app/views/common/_list.json.jbuilder:13
app/views/api/v1/basket/check.json.jbuilder:12
app/controllers/api/v1/basket_controller.rb:32:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=hoodie&product_codes[]=hoodie" for 172.28.0.1 at 2022-01-20 16:34:14 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["hoodie", "hoodie"]}
  [1m[36mProduct Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  Rendered common/_list.json.jbuilder (Duration: 4.0ms | Allocations: 244)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 26.1ms | Allocations: 1924)
Completed 500 Internal Server Error in 56ms (ActiveRecord: 4.1ms | Allocations: 3803)


  
ActionView::Template::Error (no method name given):
    10: json.total total if total
    11: json.page page if page
    12: json.page_size page_size if page_size
    13: 'json.data'.send do
    14:   json.array! resources, partial: resource_template, as: resource_name
    15: end
  
app/views/common/_list.json.jbuilder:13
app/views/api/v1/basket/check.json.jbuilder:12
app/controllers/api/v1/basket_controller.rb:32:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=hoodie&product_codes[]=hoodie" for 172.28.0.1 at 2022-01-20 16:34:53 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["hoodie", "hoodie"]}
  [1m[36mProduct Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 4.5ms | Allocations: 200)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [1 times] (Duration: 12.7ms | Allocations: 463)
  Rendered common/_list.json.jbuilder (Duration: 20.0ms | Allocations: 735)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [2 times] (Duration: 7.4ms | Allocations: 1185)
  Rendered common/_list.json.jbuilder (Duration: 10.1ms | Allocations: 1356)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 46.6ms | Allocations: 3854)
Completed 500 Internal Server Error in 70ms (ActiveRecord: 3.1ms | Allocations: 5732)


  
ActionView::Template::Error (undefined method `discount' for 4000:Integer):
    1: json.description basket_discount.discount.description
    2: json.reduction number_to_percentage(basket_discount.discount.reduction * 100)
    3: json.applied_products do
    4:   json.array! basket_discount.product_permutation do |product|
  
app/views/api/v1/basket/_basket_discount.json.jbuilder:1
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/basket/check.json.jbuilder:22
app/controllers/api/v1/basket_controller.rb:32:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=hoodie&product_codes[]=hoodie" for 172.28.0.1 at 2022-01-20 16:34:54 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["hoodie", "hoodie"]}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.8ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [1 times] (Duration: 5.3ms | Allocations: 248)
  Rendered common/_list.json.jbuilder (Duration: 8.1ms | Allocations: 356)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [2 times] (Duration: 3.1ms | Allocations: 1080)
  Rendered common/_list.json.jbuilder (Duration: 5.8ms | Allocations: 1184)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 31.1ms | Allocations: 2847)
Completed 500 Internal Server Error in 57ms (ActiveRecord: 3.0ms | Allocations: 4309)


  
ActionView::Template::Error (undefined method `discount' for 4000:Integer):
    1: json.description basket_discount.discount.description
    2: json.reduction number_to_percentage(basket_discount.discount.reduction * 100)
    3: json.applied_products do
    4:   json.array! basket_discount.product_permutation do |product|
  
app/views/api/v1/basket/_basket_discount.json.jbuilder:1
app/views/common/_list.json.jbuilder:14
app/views/common/_list.json.jbuilder:13
app/views/api/v1/basket/check.json.jbuilder:22
app/controllers/api/v1/basket_controller.rb:32:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=hoodie&product_codes[]=hoodie" for 172.28.0.1 at 2022-01-20 16:41:53 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["hoodie", "hoodie"]}
  [1m[36mProduct Count (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (2.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  Rendered common/_list.json.jbuilder (Duration: 12.9ms | Allocations: 3198)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 37.3ms | Allocations: 4950)
Completed 500 Internal Server Error in 100ms (ActiveRecord: 25.0ms | Allocations: 9071)


  
ActionView::Template::Error (undefined local variable or method `name' for #<ActionView::Base:0x0000000000f3e8>):
    11: json.total total if total
    12: json.page page if page
    13: json.page_size page_size if page_size
    14: json.set! (name || :data) do
    15:   json.array! resources, partial: resource_template, as: resource_name
    16: end
  
app/views/common/_list.json.jbuilder:14
app/views/api/v1/basket/check.json.jbuilder:12
app/controllers/api/v1/basket_controller.rb:32:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=hoodie&product_codes[]=hoodie" for 172.28.0.1 at 2022-01-20 16:42:35 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["hoodie", "hoodie"]}
  [1m[36mProduct Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 3.3ms | Allocations: 195)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [1 times] (Duration: 8.5ms | Allocations: 457)
  Rendered common/_list.json.jbuilder (Duration: 14.4ms | Allocations: 723)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [2 times] (Duration: 6.9ms | Allocations: 1178)
  Rendered common/_list.json.jbuilder (Duration: 10.1ms | Allocations: 1342)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 43.2ms | Allocations: 3838)
Completed 500 Internal Server Error in 72ms (ActiveRecord: 4.1ms | Allocations: 5714)


  
ActionView::Template::Error (undefined method `discount' for 4000:Integer):
    1: json.description basket_discount.discount.description
    2: json.reduction number_to_percentage(basket_discount.discount.reduction * 100)
    3: json.applied_products do
    4:   json.array! basket_discount.product_permutation do |product|
  
app/views/api/v1/basket/_basket_discount.json.jbuilder:1
app/views/common/_list.json.jbuilder:15
app/views/common/_list.json.jbuilder:14
app/views/api/v1/basket/check.json.jbuilder:23
app/controllers/api/v1/basket_controller.rb:32:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check?product_codes[]=hoodie&product_codes[]=hoodie" for 172.28.0.1 at 2022-01-20 16:43:05 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["hoodie", "hoodie"]}
  [1m[36mProduct Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2)[0m  [["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 4.9ms | Allocations: 195)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [1 times] (Duration: 11.1ms | Allocations: 455)
  Rendered common/_list.json.jbuilder (Duration: 18.0ms | Allocations: 721)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [0 times] (Duration: 0.1ms | Allocations: 19)
  Rendered common/_list.json.jbuilder (Duration: 2.9ms | Allocations: 191)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 39.4ms | Allocations: 2785)
Completed 200 OK in 72ms (Views: 46.1ms | ActiveRecord: 3.2ms | Allocations: 4687)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.28.0.1 at 2022-01-20 16:43:38 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "hoodie", "hoodie"], "currency"=>"eur"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.2ms | Allocations: 135)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.6ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 8.7ms | Allocations: 500)
  Rendered common/_list.json.jbuilder (Duration: 10.8ms | Allocations: 619)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [1 times] (Duration: 74.9ms | Allocations: 1971)
  Rendered common/_list.json.jbuilder (Duration: 76.4ms | Allocations: 2085)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 173.2ms | Allocations: 12142)
Completed 200 OK in 190ms (Views: 172.2ms | ActiveRecord: 6.6ms | Allocations: 13730)


Started GET "/api/v1/basket/check" for 172.28.0.1 at 2022-01-20 17:23:10 +0000
Processing by Api::V1::BasketController#check as JSON
Completed 400 Bad Request in 7ms (Allocations: 605)


  
ActionController::ParameterMissing (param is missing or the value is empty: product_codes):
  
app/controllers/api/v1/basket_controller.rb:44:in `basket_params'
app/controllers/api/v1/basket_controller.rb:39:in `set_basket'
app/controllers/api/v1/basket_controller.rb:31:in `check'
app/controllers/concerns/monetizable.rb:13:in `with_currency'
Started GET "/api/v1/basket/check" for 172.28.0.1 at 2022-01-20 17:23:29 +0000
Processing by Api::V1::BasketController#check as JSON
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 3.7ms | Allocations: 177)
Completed 400 Bad Request in 20ms (Views: 11.0ms | Allocations: 1362)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie&product_codes[]=tshirt" for 172.28.0.1 at 2022-01-20 17:40:05 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie", "tshirt"]}
  [1m[36mProduct Count (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "hoodie"], ["code", "tshirt"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "hoodie"], ["code", "tshirt"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (1.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  [1m[36mProduct Load (1.9ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 4.3ms | Allocations: 199)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.3ms | Allocations: 126)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.8ms | Allocations: 126)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [3 times] (Duration: 18.2ms | Allocations: 921)
  Rendered common/_list.json.jbuilder (Duration: 24.8ms | Allocations: 1198)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [0 times] (Duration: 0.1ms | Allocations: 16)
  Rendered common/_list.json.jbuilder (Duration: 2.6ms | Allocations: 184)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 102.4ms | Allocations: 12162)
Completed 200 OK in 217ms (Views: 99.9ms | ActiveRecord: 23.8ms | Allocations: 21801)


Started GET "/api/v1/basket/check?product_codes[]=meeeug&product_codes[]=hoodie&product_codes[]=tshirt" for 172.28.0.1 at 2022-01-20 17:56:39 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["meeeug", "hoodie", "tshirt"]}
  [1m[36mProduct Count (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "meeeug"], ["code", "hoodie"], ["code", "tshirt"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "meeeug"], ["code", "hoodie"], ["code", "tshirt"]]
  ↳ app/lib/error/model/basket/invalid_product_codes_error.rb:14:in `map'
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.3ms | Allocations: 91)
Completed 422 Unprocessable Entity in 61ms (Views: 3.8ms | ActiveRecord: 18.9ms | Allocations: 6117)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=hoodie&product_codes[]=tshirt" for 172.28.0.1 at 2022-01-20 18:07:09 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "hoodie", "tshirt"]}
  [1m[36mProduct Count (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "hoodie"], ["code", "tshirt"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (2.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "hoodie"], ["code", "tshirt"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.1ms | Allocations: 128)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.8ms | Allocations: 126)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.4ms | Allocations: 126)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [3 times] (Duration: 8.7ms | Allocations: 712)
  Rendered common/_list.json.jbuilder (Duration: 11.2ms | Allocations: 826)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [0 times] (Duration: 0.1ms | Allocations: 16)
  Rendered common/_list.json.jbuilder (Duration: 1.5ms | Allocations: 123)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 58.3ms | Allocations: 6241)
Completed 200 OK in 99ms (Views: 54.3ms | ActiveRecord: 25.3ms | Allocations: 10009)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=tshirt" for 172.28.0.1 at 2022-01-20 18:09:39 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "tshirt"]}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "mug"], ["code", "tshirt"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "mug"], ["code", "tshirt"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.7ms | Allocations: 134)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.8ms | Allocations: 126)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 7.6ms | Allocations: 501)
  Rendered common/_list.json.jbuilder (Duration: 9.7ms | Allocations: 620)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [1 times] (Duration: 3.7ms | Allocations: 272)
  Rendered common/_list.json.jbuilder (Duration: 6.1ms | Allocations: 374)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 87.3ms | Allocations: 8310)
Completed 200 OK in 104ms (Views: 86.0ms | ActiveRecord: 7.1ms | Allocations: 9786)


Started GET "/api/v1/products" for 172.28.0.1 at 2022-01-20 18:10:03 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [4 times] (Duration: 5.8ms | Allocations: 706)
  Rendered common/_list.json.jbuilder (Duration: 12.4ms | Allocations: 1621)
  Rendered api/v1/products/index.json.jbuilder (Duration: 16.3ms | Allocations: 2013)
Completed 200 OK in 27ms (Views: 19.8ms | ActiveRecord: 1.5ms | Allocations: 3259)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.28.0.1 at 2022-01-21 06:00:32 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "hoodie", "hoodie"], "currency"=>"eur"}
  [1m[36mProduct Count (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (4.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 4.5ms | Allocations: 208)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.7ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 14.7ms | Allocations: 760)
  Rendered common/_list.json.jbuilder (Duration: 21.0ms | Allocations: 1093)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [1 times] (Duration: 22.0ms | Allocations: 1332)
  Rendered common/_list.json.jbuilder (Duration: 23.6ms | Allocations: 1511)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 171.8ms | Allocations: 21005)
Completed 200 OK in 262ms (Views: 180.1ms | ActiveRecord: 25.6ms | Allocations: 31939)


  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (310.4ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (56.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'EUR' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductDiscounts (20220119163021)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "product_discounts" ("id" bigserial primary key, "product_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_bd840c8d3f"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
, CONSTRAINT "fk_rails_9547908de7"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_product_id" ON "product_discounts" ("product_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_discount_id" ON "product_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119163021"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-21 06:04:16.911637"], ["updated_at", "2022-01-21 06:04:16.911637"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (0.9ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-21 06:04:20.689898"], ["updated_at", "2022-01-21 06:04:20.689898"]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDiscount Create (0.6ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-21 06:04:20.699702"], ["updated_at", "2022-01-21 06:04:20.699702"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "Reedsy Mug"], ["code", "mug"], ["price_cents", 60000], ["price_currency", "EUR"], ["created_at", "2022-01-21 06:04:20.955892"], ["updated_at", "2022-01-21 06:04:20.955892"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "tshirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "Reedsy T-shirt"], ["code", "tshirt"], ["price_cents", 150000], ["price_currency", "EUR"], ["created_at", "2022-01-21 06:04:20.978317"], ["updated_at", "2022-01-21 06:04:20.978317"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "Reedsy Hoodie"], ["code", "hoodie"], ["price_cents", 200000], ["price_currency", "EUR"], ["created_at", "2022-01-21 06:04:21.003571"], ["updated_at", "2022-01-21 06:04:21.003571"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductDiscount Create (2.0ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 1], ["discount_id", 2], ["created_at", "2022-01-21 06:04:21.146968"], ["updated_at", "2022-01-21 06:04:21.146968"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductDiscount Create (1.5ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 2], ["discount_id", 2], ["created_at", "2022-01-21 06:04:21.166349"], ["updated_at", "2022-01-21 06:04:21.166349"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.18.0.1 at 2022-01-21 06:05:08 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "hoodie", "hoodie"], "currency"=>"eur"}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 2.7ms | Allocations: 206)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.6ms | Allocations: 145)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 8.3ms | Allocations: 770)
  Rendered common/_list.json.jbuilder (Duration: 12.5ms | Allocations: 1097)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [0 times] (Duration: 0.1ms | Allocations: 19)
  Rendered common/_list.json.jbuilder (Duration: 1.7ms | Allocations: 198)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 252.3ms | Allocations: 20786)
Completed 200 OK in 366ms (Views: 308.1ms | ActiveRecord: 20.6ms | Allocations: 32470)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.18.0.1 at 2022-01-21 06:05:58 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "hoodie", "hoodie"], "currency"=>"eur"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.5ms | Allocations: 130)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.8ms | Allocations: 145)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 4.3ms | Allocations: 504)
  Rendered common/_list.json.jbuilder (Duration: 6.0ms | Allocations: 618)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [0 times] (Duration: 0.1ms | Allocations: 16)
  Rendered common/_list.json.jbuilder (Duration: 1.2ms | Allocations: 123)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 68.0ms | Allocations: 4163)
Completed 200 OK in 102ms (Views: 67.9ms | ActiveRecord: 4.0ms | Allocations: 5828)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.18.0.1 at 2022-01-21 06:06:50 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "hoodie", "hoodie"], "currency"=>"eur"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  [1m[36mDiscount Load (1.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.0ms | Allocations: 130)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.3ms | Allocations: 142)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 7.4ms | Allocations: 501)
  Rendered common/_list.json.jbuilder (Duration: 9.8ms | Allocations: 615)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [0 times] (Duration: 0.1ms | Allocations: 16)
  Rendered common/_list.json.jbuilder (Duration: 2.3ms | Allocations: 123)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 26.1ms | Allocations: 1536)
Completed 200 OK in 79326ms (Views: 31.4ms | ActiveRecord: 6.0ms | Allocations: 17534)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.18.0.1 at 2022-01-21 06:10:39 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "hoodie", "hoodie"], "currency"=>"eur"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (eval):1:in `check'
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (eval):1:in `check'
  [1m[36mCACHE Discount Load (0.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (eval):1:in `check'
  [1m[36mCACHE Discount Load (0.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (eval):1:in `check'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["discount_id", 1], ["LIMIT", 11]]
  ↳ (eval):5:in `block in print_element'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["discount_id", 1], ["LIMIT", 11]]
  ↳ (eval):5:in `block in print_variable'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["discount_id", 1], ["LIMIT", 11]]
  ↳ (eval):5:in `block in print_variable'
  [1m[36mCACHE Discount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (eval):1:in `check'
  [1m[36mProduct Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ (eval):1:in `check'
  [1m[36mProductDiscount Load (0.7ms)[0m  [1m[34mSELECT "product_discounts".* FROM "product_discounts" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  ↳ (eval):5:in `block in print_element'
  [1m[36mCACHE ProductDiscount Load (0.0ms)[0m  [1m[34mSELECT "product_discounts".* FROM "product_discounts" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  ↳ (eval):5:in `block in print_variable'
  [1m[36mCACHE ProductDiscount Load (0.1ms)[0m  [1m[34mSELECT "product_discounts".* FROM "product_discounts" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  ↳ (eval):5:in `block in print_variable'
  [1m[36mProductDiscount Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "product_discounts"[0m
  ↳ (eval):1:in `check'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (eval):1:in `check'
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (eval):1:in `check'
  [1m[36mCACHE Discount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (eval):1:in `check'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ (eval):1:in `check'
  [1m[36mProductDiscount Create (1.8ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 1], ["discount_id", 1], ["created_at", "2022-01-21 06:13:46.957121"], ["updated_at", "2022-01-21 06:13:46.957121"]]
  ↳ (eval):1:in `check'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ (eval):1:in `check'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (eval):1:in `check'
  [1m[36mCACHE Product Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (eval):1:in `check'
  [1m[36mDiscount Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ (eval):1:in `check'
  Rendering api/v1/basket/check.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.5ms | Allocations: 135)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.3ms | Allocations: 145)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 5.6ms | Allocations: 509)
  Rendered common/_list.json.jbuilder (Duration: 7.8ms | Allocations: 623)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [0 times] (Duration: 0.1ms | Allocations: 16)
  Rendered common/_list.json.jbuilder (Duration: 2.2ms | Allocations: 123)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 15.4ms | Allocations: 1551)
Completed 200 OK in 205132ms (Views: 19.4ms | ActiveRecord: 20.9ms | Allocations: 66209)


  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (304.3ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'EUR' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductDiscounts (20220119163021)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "product_discounts" ("id" bigserial primary key, "product_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_bd840c8d3f"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
, CONSTRAINT "fk_rails_9547908de7"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_product_id" ON "product_discounts" ("product_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_discount_id" ON "product_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119163021"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-21 06:17:56.249557"], ["updated_at", "2022-01-21 06:17:56.249557"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (3.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (2.6ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "Reedsy Mug"], ["code", "mug"], ["price_cents", 600], ["price_currency", "EUR"], ["created_at", "2022-01-21 06:18:36.059252"], ["updated_at", "2022-01-21 06:18:36.059252"]]
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "tshirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "Reedsy T-shirt"], ["code", "tshirt"], ["price_cents", 1500], ["price_currency", "EUR"], ["created_at", "2022-01-21 06:18:36.125838"], ["updated_at", "2022-01-21 06:18:36.125838"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "Reedsy Hoodie"], ["code", "hoodie"], ["price_cents", 2000], ["price_currency", "EUR"], ["created_at", "2022-01-21 06:18:36.186106"], ["updated_at", "2022-01-21 06:18:36.186106"]]
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Create (1.4ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-21 06:18:36.683109"], ["updated_at", "2022-01-21 06:18:36.683109"]]
  [1m[36mProductDiscount Create (3.1ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 1], ["discount_id", 1], ["created_at", "2022-01-21 06:18:36.691284"], ["updated_at", "2022-01-21 06:18:36.691284"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy T-shirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "tshirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Create (0.9ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-21 06:18:36.734766"], ["updated_at", "2022-01-21 06:18:36.734766"]]
  [1m[36mProductDiscount Create (6.1ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 2], ["discount_id", 2], ["created_at", "2022-01-21 06:18:36.742323"], ["updated_at", "2022-01-21 06:18:36.742323"]]
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.19.0.1 at 2022-01-21 06:20:16 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "hoodie", "hoodie"], "currency"=>"eur"}
  [1m[36mProduct Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (2.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 4.4ms | Allocations: 208)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.2ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 13.5ms | Allocations: 760)
  Rendered common/_list.json.jbuilder (Duration: 19.3ms | Allocations: 1093)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [1 times] (Duration: 74.5ms | Allocations: 1963)
  Rendered common/_list.json.jbuilder (Duration: 77.1ms | Allocations: 2142)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 310.5ms | Allocations: 20814)
Completed 200 OK in 3776ms (Views: 415.2ms | ActiveRecord: 22.7ms | Allocations: 36680)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.19.0.1 at 2022-01-21 06:27:13 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "hoodie", "hoodie"], "currency"=>"eur"}
  [1m[36mProduct Count (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.5ms | Allocations: 142)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.4ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 4.7ms | Allocations: 509)
  Rendered common/_list.json.jbuilder (Duration: 6.3ms | Allocations: 630)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [1 times] (Duration: 0.7ms | Allocations: 172)
  Rendered common/_list.json.jbuilder (Duration: 2.5ms | Allocations: 274)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 57.9ms | Allocations: 10177)
Completed 200 OK in 131ms (Views: 58.3ms | ActiveRecord: 17.9ms | Allocations: 18555)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.19.0.1 at 2022-01-21 06:39:05 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "hoodie", "hoodie"], "currency"=>"eur"}
  [1m[36mProduct Count (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (2.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (1.7ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 3.0ms | Allocations: 202)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.6ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 9.5ms | Allocations: 702)
  Rendered common/_list.json.jbuilder (Duration: 13.6ms | Allocations: 985)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [1 times] (Duration: 3.9ms | Allocations: 262)
  Rendered common/_list.json.jbuilder (Duration: 6.6ms | Allocations: 425)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 90.4ms | Allocations: 10703)
Completed 200 OK in 190ms (Views: 88.5ms | ActiveRecord: 35.7ms | Allocations: 19223)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.19.0.1 at 2022-01-21 06:56:29 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "hoodie", "hoodie"], "currency"=>"eur"}
  [1m[36mProduct Count (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 2.4ms | Allocations: 202)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.5ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 7.3ms | Allocations: 702)
  Rendered common/_list.json.jbuilder (Duration: 10.3ms | Allocations: 986)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [1 times] (Duration: 2.3ms | Allocations: 225)
  Rendered common/_list.json.jbuilder (Duration: 3.8ms | Allocations: 388)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 55.2ms | Allocations: 10631)
Completed 200 OK in 250ms (Views: 56.2ms | ActiveRecord: 18.8ms | Allocations: 19194)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=eur" for 172.19.0.1 at 2022-01-21 06:56:58 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "hoodie", "hoodie"], "currency"=>"eur"}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 3.8ms | Allocations: 196)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.5ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 11.8ms | Allocations: 688)
  Rendered common/_list.json.jbuilder (Duration: 19.0ms | Allocations: 954)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [1 times] (Duration: 4.0ms | Allocations: 219)
  Rendered common/_list.json.jbuilder (Duration: 6.8ms | Allocations: 382)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 55.3ms | Allocations: 5297)
Completed 200 OK in 79ms (Views: 57.1ms | ActiveRecord: 5.7ms | Allocations: 7328)


Started GET "/api/v1/products" for 172.19.0.1 at 2022-01-21 07:43:01 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 4.2ms | Allocations: 619)
  Rendered common/_list.json.jbuilder (Duration: 15.3ms | Allocations: 2842)
  Rendered api/v1/products/index.json.jbuilder (Duration: 20.2ms | Allocations: 3199)
Completed 200 OK in 69ms (Views: 23.3ms | ActiveRecord: 15.7ms | Allocations: 8698)


Started GET "/favicon.ico" for 172.19.0.1 at 2022-01-21 07:43:02 +0000
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/apipie" for 172.19.0.1 at 2022-01-21 07:43:05 +0000
Processing by Apipie::ApipiesController#index as HTML
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.9ms | Allocations: 145)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 6.6ms | Allocations: 1192)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 10.5ms | Allocations: 1664)
Completed 200 OK in 234ms (Views: 16.2ms | ActiveRecord: 0.0ms | Allocations: 39523)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.19.0.1 at 2022-01-21 07:43:05 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.19.0.1 at 2022-01-21 07:43:05 +0000
Started GET "/apipie/stylesheets/application.css" for 172.19.0.1 at 2022-01-21 07:43:05 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.19.0.1 at 2022-01-21 07:43:05 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.19.0.1 at 2022-01-21 07:43:06 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.19.0.1 at 2022-01-21 07:43:06 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.19.0.1 at 2022-01-21 07:43:06 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.19.0.1 at 2022-01-21 07:43:06 +0000
Started GET "/apipie/1.0/basket/check.html" for 172.19.0.1 at 2022-01-21 07:43:09 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"basket", "method"=>"check.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.3ms | Allocations: 16)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 2.0ms | Allocations: 969)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.4ms | Allocations: 787)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 4.9ms | Allocations: 1741)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.4ms | Allocations: 209)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 11.0ms | Allocations: 2906)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.8ms | Allocations: 276)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 27.2ms | Allocations: 5776)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 33.0ms | Allocations: 6573)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 36.0ms | Allocations: 6798)
Completed 200 OK in 200ms (Views: 42.6ms | ActiveRecord: 0.0ms | Allocations: 37825)


Started GET "/apipie/stylesheets/application.css" for 172.19.0.1 at 2022-01-21 07:43:09 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.19.0.1 at 2022-01-21 07:43:09 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.19.0.1 at 2022-01-21 07:43:09 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.19.0.1 at 2022-01-21 07:43:09 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.19.0.1 at 2022-01-21 07:43:09 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.19.0.1 at 2022-01-21 07:43:09 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.19.0.1 at 2022-01-21 07:43:09 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.19.0.1 at 2022-01-21 07:43:09 +0000
Started GET "/telm/tickets" for 172.19.0.1 at 2022-01-21 08:07:10 +0000
  
ActionController::RoutingError (No route matches [GET] "/telm/tickets"):
  
Started GET "/apipie" for 172.19.0.1 at 2022-01-21 08:07:14 +0000
Processing by Apipie::ApipiesController#index as HTML
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 2.4ms | Allocations: 229)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 5.4ms | Allocations: 453)
Completed 200 OK in 209ms (Views: 9.2ms | Allocations: 38229)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.19.0.1 at 2022-01-21 08:07:14 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.19.0.1 at 2022-01-21 08:07:14 +0000
Started GET "/apipie/stylesheets/application.css" for 172.19.0.1 at 2022-01-21 08:07:14 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.19.0.1 at 2022-01-21 08:07:14 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.19.0.1 at 2022-01-21 08:07:14 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.19.0.1 at 2022-01-21 08:07:14 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.19.0.1 at 2022-01-21 08:07:14 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.19.0.1 at 2022-01-21 08:07:15 +0000
Started GET "/apipie/1.0/basket/check.html" for 172.19.0.1 at 2022-01-21 08:07:17 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"basket", "method"=>"check.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.1ms | Allocations: 452)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.8ms | Allocations: 787)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 4.2ms | Allocations: 1244)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.7ms | Allocations: 811)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 11.2ms | Allocations: 2995)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 22.9ms | Allocations: 4158)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 27.5ms | Allocations: 4343)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 31.9ms | Allocations: 4567)
Completed 200 OK in 207ms (Views: 36.9ms | Allocations: 37381)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.19.0.1 at 2022-01-21 08:07:17 +0000
Started GET "/apipie/stylesheets/application.css" for 172.19.0.1 at 2022-01-21 08:07:17 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.19.0.1 at 2022-01-21 08:07:17 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.19.0.1 at 2022-01-21 08:07:17 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.19.0.1 at 2022-01-21 08:07:17 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.19.0.1 at 2022-01-21 08:07:17 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.19.0.1 at 2022-01-21 08:07:17 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.19.0.1 at 2022-01-21 08:07:18 +0000
Started GET "/apipie/1.0.html" for 172.19.0.1 at 2022-01-21 08:08:46 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 2.0ms | Allocations: 229)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 4.7ms | Allocations: 453)
Completed 200 OK in 190ms (Views: 8.1ms | Allocations: 38686)


Started GET "/apipie/stylesheets/application.css" for 172.19.0.1 at 2022-01-21 08:08:47 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.19.0.1 at 2022-01-21 08:08:47 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.19.0.1 at 2022-01-21 08:08:47 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.19.0.1 at 2022-01-21 08:08:47 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.19.0.1 at 2022-01-21 08:08:47 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.19.0.1 at 2022-01-21 08:08:47 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.19.0.1 at 2022-01-21 08:08:47 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.19.0.1 at 2022-01-21 08:08:47 +0000
Started GET "/apipie/1.0/basket/check.html" for 172.19.0.1 at 2022-01-21 08:08:49 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"basket", "method"=>"check.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.7ms | Allocations: 452)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.0ms | Allocations: 787)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 2.8ms | Allocations: 1244)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.1ms | Allocations: 811)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 8.0ms | Allocations: 2995)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.2ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 19.6ms | Allocations: 4158)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 22.8ms | Allocations: 4343)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 26.1ms | Allocations: 4567)
Completed 200 OK in 195ms (Views: 30.4ms | Allocations: 37776)


Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.19.0.1 at 2022-01-21 08:08:49 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.19.0.1 at 2022-01-21 08:08:49 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.19.0.1 at 2022-01-21 08:08:49 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.19.0.1 at 2022-01-21 08:08:49 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.19.0.1 at 2022-01-21 08:08:49 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.19.0.1 at 2022-01-21 08:08:49 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.19.0.1 at 2022-01-21 08:08:49 +0000
Started GET "/apipie/stylesheets/application.css" for 172.19.0.1 at 2022-01-21 08:08:49 +0000
Started GET "/apipie/1.0/products/index.html" for 172.19.0.1 at 2022-01-21 08:11:31 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.9ms | Allocations: 631)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.0ms | Allocations: 785)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 3.6ms | Allocations: 1636)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 10.6ms | Allocations: 2704)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 14.3ms | Allocations: 2889)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 17.2ms | Allocations: 3113)
Completed 200 OK in 211ms (Views: 20.7ms | Allocations: 36566)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.19.0.1 at 2022-01-21 08:11:32 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.19.0.1 at 2022-01-21 08:11:32 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.19.0.1 at 2022-01-21 08:11:32 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.19.0.1 at 2022-01-21 08:11:32 +0000
Started GET "/apipie/stylesheets/application.css" for 172.19.0.1 at 2022-01-21 08:11:32 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.19.0.1 at 2022-01-21 08:11:32 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.19.0.1 at 2022-01-21 08:11:32 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.19.0.1 at 2022-01-21 08:11:32 +0000
Started GET "/apipie/1.0/products/update.html" for 172.19.0.1 at 2022-01-21 08:11:41 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"update.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.6ms | Allocations: 404)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 2.7ms | Allocations: 890)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 1.9ms | Allocations: 785)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 5.7ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 0.1ms | Allocations: 12)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 0.1ms | Allocations: 13)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 19.9ms | Allocations: 2523)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 22.6ms | Allocations: 2708)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 25.5ms | Allocations: 2932)
Completed 200 OK in 169ms (Views: 28.7ms | Allocations: 34679)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.19.0.1 at 2022-01-21 08:11:41 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.19.0.1 at 2022-01-21 08:11:41 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.19.0.1 at 2022-01-21 08:11:41 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.19.0.1 at 2022-01-21 08:11:41 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.19.0.1 at 2022-01-21 08:11:41 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.19.0.1 at 2022-01-21 08:11:41 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.19.0.1 at 2022-01-21 08:11:41 +0000
Started GET "/apipie/stylesheets/application.css" for 172.19.0.1 at 2022-01-21 08:11:41 +0000
Started GET "/apipie/1.0.html" for 172.19.0.1 at 2022-01-21 08:19:45 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 3.6ms | Allocations: 229)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 8.1ms | Allocations: 453)
Completed 200 OK in 557ms (Views: 12.6ms | Allocations: 39467)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.19.0.1 at 2022-01-21 08:19:45 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.19.0.1 at 2022-01-21 08:19:45 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.19.0.1 at 2022-01-21 08:19:45 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.19.0.1 at 2022-01-21 08:19:45 +0000
Started GET "/apipie/stylesheets/application.css" for 172.19.0.1 at 2022-01-21 08:19:45 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.19.0.1 at 2022-01-21 08:19:45 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.19.0.1 at 2022-01-21 08:19:46 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.19.0.1 at 2022-01-21 08:19:46 +0000
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=usd" for 172.19.0.1 at 2022-01-21 08:42:03 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "hoodie", "hoodie"], "currency"=>"usd"}
  [1m[36mProduct Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 1.1ms | Allocations: 181)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.7ms | Allocations: 166)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 4.3ms | Allocations: 587)
  Rendered common/_list.json.jbuilder (Duration: 5.5ms | Allocations: 708)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [1 times] (Duration: 0.5ms | Allocations: 152)
  Rendered common/_list.json.jbuilder (Duration: 1.6ms | Allocations: 254)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 57.4ms | Allocations: 10596)
Completed 200 OK in 128ms (Views: 51.1ms | ActiveRecord: 32.3ms | Allocations: 20957)


  [1m[35m (0.7ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (311.0ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'USD' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductDiscounts (20220119163021)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "product_discounts" ("id" bigserial primary key, "product_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_bd840c8d3f"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
, CONSTRAINT "fk_rails_9547908de7"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_product_id" ON "product_discounts" ("product_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_discount_id" ON "product_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119163021"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-21 09:29:54.917665"], ["updated_at", "2022-01-21 09:29:54.917665"]]
  [1m[36mTRANSACTION (37.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "Reedsy Mug"], ["code", "mug"], ["price_cents", 600], ["price_currency", "USD"], ["created_at", "2022-01-21 09:29:58.355805"], ["updated_at", "2022-01-21 09:29:58.355805"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "tshirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "Reedsy T-shirt"], ["code", "tshirt"], ["price_cents", 1500], ["price_currency", "USD"], ["created_at", "2022-01-21 09:29:58.371572"], ["updated_at", "2022-01-21 09:29:58.371572"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "Reedsy Hoodie"], ["code", "hoodie"], ["price_cents", 2000], ["price_currency", "USD"], ["created_at", "2022-01-21 09:29:58.386045"], ["updated_at", "2022-01-21 09:29:58.386045"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Create (1.0ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-21 09:29:58.596769"], ["updated_at", "2022-01-21 09:29:58.596769"]]
  [1m[36mProductDiscount Create (1.6ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 1], ["discount_id", 1], ["created_at", "2022-01-21 09:29:58.600624"], ["updated_at", "2022-01-21 09:29:58.600624"]]
  [1m[36mTRANSACTION (12.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy T-shirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "tshirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Create (0.7ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-21 09:29:58.633674"], ["updated_at", "2022-01-21 09:29:58.633674"]]
  [1m[36mProductDiscount Create (1.0ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 2], ["discount_id", 2], ["created_at", "2022-01-21 09:29:58.637328"], ["updated_at", "2022-01-21 09:29:58.637328"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=mug&product_codes[]=hoodie&product_codes[]=hoodie&currency=usd" for 172.20.0.1 at 2022-01-21 09:35:14 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "mug", "hoodie", "hoodie"], "currency"=>"usd"}
  [1m[36mProduct Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "mug"], ["code", "hoodie"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.6ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 3.3ms | Allocations: 208)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.6ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 9.2ms | Allocations: 760)
  Rendered common/_list.json.jbuilder (Duration: 13.5ms | Allocations: 1093)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [1 times] (Duration: 46.9ms | Allocations: 1922)
  Rendered common/_list.json.jbuilder (Duration: 48.5ms | Allocations: 2101)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 242.1ms | Allocations: 21327)
Completed 200 OK in 371ms (Views: 303.3ms | ActiveRecord: 19.9ms | Allocations: 33021)


Started GET "/apipie/1.0.html" for 172.20.0.1 at 2022-01-21 09:51:22 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 2.6ms | Allocations: 147)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 9.3ms | Allocations: 1257)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 14.8ms | Allocations: 1736)
Completed 200 OK in 357ms (Views: 25.2ms | Allocations: 41266)


Started GET "/apipie/stylesheets/application.css" for 172.20.0.1 at 2022-01-21 09:51:23 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.20.0.1 at 2022-01-21 09:51:23 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.20.0.1 at 2022-01-21 09:51:23 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.20.0.1 at 2022-01-21 09:51:23 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.20.0.1 at 2022-01-21 09:51:23 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.20.0.1 at 2022-01-21 09:51:23 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.20.0.1 at 2022-01-21 09:51:23 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.20.0.1 at 2022-01-21 09:51:23 +0000
Started GET "/apipie/1.0.html" for 172.20.0.1 at 2022-01-21 09:51:26 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 19)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 2.0ms | Allocations: 229)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 5.1ms | Allocations: 453)
Completed 200 OK in 175ms (Views: 8.6ms | Allocations: 37326)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 172.20.0.1 at 2022-01-21 09:51:26 +0000
Started GET "/apipie/stylesheets/application.css" for 172.20.0.1 at 2022-01-21 09:51:26 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 172.20.0.1 at 2022-01-21 09:51:26 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 172.20.0.1 at 2022-01-21 09:51:26 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 172.20.0.1 at 2022-01-21 09:51:26 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 172.20.0.1 at 2022-01-21 09:51:26 +0000
Started GET "/apipie/javascripts/apipie.js" for 172.20.0.1 at 2022-01-21 09:51:26 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 172.20.0.1 at 2022-01-21 09:51:26 +0000
Started GET "/apipie.json?type=swagger" for 172.20.0.1 at 2022-01-21 09:51:36 +0000
Processing by Apipie::ApipiesController#index as JSON
  Parameters: {"type"=>"swagger"}
Completed 200 OK in 253ms (Views: 2.1ms | Allocations: 30850)


Started GET "/api/v1/products?page=1&page_size=3&currency=eur" for 172.20.0.1 at 2022-01-21 09:57:46 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"3", "currency"=>"eur"}
  [1m[36mProduct Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 4.0ms | Allocations: 765)
  Rendered common/_list.json.jbuilder (Duration: 13.7ms | Allocations: 3219)
  Rendered api/v1/products/index.json.jbuilder (Duration: 19.4ms | Allocations: 3588)
Completed 200 OK in 73ms (Views: 22.4ms | ActiveRecord: 14.2ms | Allocations: 11878)


Started GET "/api/v1/products?page=1&page_size=3&currency=eur" for 172.20.0.1 at 2022-01-21 09:57:49 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"3", "currency"=>"eur"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.7ms | Allocations: 546)
  Rendered common/_list.json.jbuilder (Duration: 8.7ms | Allocations: 1392)
  Rendered api/v1/products/index.json.jbuilder (Duration: 10.3ms | Allocations: 1631)
Completed 200 OK in 21ms (Views: 12.4ms | ActiveRecord: 1.4ms | Allocations: 3149)


Started GET "/api/v1/products" for 172.20.0.1 at 2022-01-21 09:58:35 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.9ms | Allocations: 425)
  Rendered common/_list.json.jbuilder (Duration: 7.7ms | Allocations: 1205)
  Rendered api/v1/products/index.json.jbuilder (Duration: 9.7ms | Allocations: 1434)
Completed 200 OK in 19ms (Views: 12.1ms | ActiveRecord: 1.5ms | Allocations: 2222)


Started GET "/api/v1/products" for 172.20.0.1 at 2022-01-21 09:58:38 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.8ms | Allocations: 422)
  Rendered common/_list.json.jbuilder (Duration: 7.6ms | Allocations: 1187)
  Rendered api/v1/products/index.json.jbuilder (Duration: 8.9ms | Allocations: 1415)
Completed 200 OK in 18ms (Views: 10.9ms | ActiveRecord: 1.3ms | Allocations: 2187)


Started GET "/api/v1/products" for 172.20.0.1 at 2022-01-21 09:58:39 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.3ms | Allocations: 422)
  Rendered common/_list.json.jbuilder (Duration: 7.3ms | Allocations: 1187)
  Rendered api/v1/products/index.json.jbuilder (Duration: 8.9ms | Allocations: 1415)
Completed 200 OK in 19ms (Views: 11.3ms | ActiveRecord: 1.4ms | Allocations: 2181)


Started GET "/api/v1/products" for 172.20.0.1 at 2022-01-21 09:58:40 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 4.1ms | Allocations: 422)
  Rendered common/_list.json.jbuilder (Duration: 11.0ms | Allocations: 1187)
  Rendered api/v1/products/index.json.jbuilder (Duration: 12.7ms | Allocations: 1415)
Completed 200 OK in 20ms (Views: 14.4ms | ActiveRecord: 1.3ms | Allocations: 2181)


Started GET "/api/v1/products" for 172.20.0.1 at 2022-01-21 09:59:00 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.3ms | Allocations: 422)
  Rendered common/_list.json.jbuilder (Duration: 11.1ms | Allocations: 1187)
  Rendered api/v1/products/index.json.jbuilder (Duration: 12.7ms | Allocations: 1415)
Completed 200 OK in 21ms (Views: 15.2ms | ActiveRecord: 1.1ms | Allocations: 2181)


  [1m[35m (0.6ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "tshirt"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "hoodie"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Create (2.1ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-21 10:01:27.911115"], ["updated_at", "2022-01-21 10:01:27.911115"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
Started GET "/api/v1/products" for 172.20.0.1 at 2022-01-21 10:02:23 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 64.7ms | Allocations: 2957)
  Rendered common/_list.json.jbuilder (Duration: 83.8ms | Allocations: 7417)
  Rendered api/v1/products/index.json.jbuilder (Duration: 90.3ms | Allocations: 8147)
Completed 200 OK in 142ms (Views: 111.3ms | ActiveRecord: 8.4ms | Allocations: 14298)


Started GET "/api/v1/basket/check?product_codes=mug,mug" for 172.20.0.1 at 2022-01-21 10:02:58 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>"mug,mug"}
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 3.1ms | Allocations: 181)
Completed 500 Internal Server Error in 16ms (Views: 7.2ms | ActiveRecord: 0.0ms | Allocations: 2512)


Started GET "/api/v1/basket/check?product_codes=mug" for 172.20.0.1 at 2022-01-21 10:03:19 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>"mug"}
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.2ms | Allocations: 65)
Completed 500 Internal Server Error in 6ms (Views: 3.2ms | ActiveRecord: 0.0ms | Allocations: 1509)


Started GET "/api/v1/basket/check?product_codes=mug,mug" for 172.20.0.1 at 2022-01-21 10:03:45 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>"mug,mug"}
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.2ms | Allocations: 65)
Completed 500 Internal Server Error in 6ms (Views: 3.7ms | ActiveRecord: 0.0ms | Allocations: 1462)


Started PUT "/api/v1/products/1" for 172.20.0.1 at 2022-01-21 10:06:32 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"usd", "price_cents"=>"1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:98:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:39:in `_update_price='
  [1m[36mProduct Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:39:in `_update_price='
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:39:in `_update_price='
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "price_cents" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["price_cents", 1000], ["updated_at", "2022-01-21 10:06:32.497248"], ["id", 1]]
  ↳ app/models/product.rb:39:in `_update_price='
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:84:in `update'
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:84:in `update'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:84:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 2.5ms | Allocations: 210)
  Rendered api/v1/products/update.json.jbuilder (Duration: 6.7ms | Allocations: 472)
Completed 200 OK in 61ms (Views: 10.4ms | ActiveRecord: 8.2ms | Allocations: 9184)


Started PUT "/api/v1/products/1" for 172.20.0.1 at 2022-01-21 10:06:41 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:98:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:39:in `_update_price='
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:39:in `_update_price='
  [1m[36mProduct Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:39:in `_update_price='
  [1m[36mProduct Update (0.5ms)[0m  [1m[33mUPDATE "products" SET "price_currency" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["price_currency", "EUR"], ["updated_at", "2022-01-21 10:06:41.156899"], ["id", 1]]
  ↳ app/models/product.rb:39:in `_update_price='
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:84:in `update'
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:84:in `update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:84:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.9ms | Allocations: 193)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.9ms | Allocations: 335)
Completed 200 OK in 48ms (Views: 5.4ms | ActiveRecord: 5.4ms | Allocations: 6692)


Started GET "/api/v1/basket/check?product_codes=mug,mug" for 172.20.0.1 at 2022-01-21 10:10:14 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>"mug,mug"}
  Rendering api/v1/error.json.jbuilder
  Rendered api/v1/error.json.jbuilder (Duration: 0.2ms | Allocations: 65)
Completed 500 Internal Server Error in 6ms (Views: 3.4ms | ActiveRecord: 0.0ms | Allocations: 1483)


Started GET "/api/v1/products/1" for 172.20.0.1 at 2022-01-21 10:13:58 +0000
  
ActionController::RoutingError (No route matches [GET] "/api/v1/products/1"):
  
Started GET "/api/v1/products" for 172.20.0.1 at 2022-01-21 10:14:02 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.5ms | Allocations: 468)
  Rendered common/_list.json.jbuilder (Duration: 7.2ms | Allocations: 1315)
  Rendered api/v1/products/index.json.jbuilder (Duration: 8.8ms | Allocations: 1544)
Completed 200 OK in 38ms (Views: 10.6ms | ActiveRecord: 14.6ms | Allocations: 4567)


Started GET "/api/v1/products" for 172.20.0.1 at 2022-01-21 10:14:12 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.4ms | Allocations: 461)
  Rendered common/_list.json.jbuilder (Duration: 8.0ms | Allocations: 1227)
  Rendered api/v1/products/index.json.jbuilder (Duration: 9.7ms | Allocations: 1455)
Completed 200 OK in 21ms (Views: 15.2ms | ActiveRecord: 1.0ms | Allocations: 2222)


Started GET "/api/v1/products?currency=eur" for 172.20.0.1 at 2022-01-21 10:15:12 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"currency"=>"eur"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.9ms | Allocations: 503)
  Rendered common/_list.json.jbuilder (Duration: 7.4ms | Allocations: 1269)
  Rendered api/v1/products/index.json.jbuilder (Duration: 8.8ms | Allocations: 1497)
Completed 200 OK in 16ms (Views: 10.4ms | ActiveRecord: 1.3ms | Allocations: 2270)


Started GET "/api/v1/products?page=1&page_size=2" for 172.20.0.1 at 2022-01-21 10:16:10 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"page"=>"1", "page_size"=>"2"}
  [1m[36mProduct Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:69:in `load_resources_total'
  [1m[36mCACHE Product Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:41:in `computed_page'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" LIMIT $1 OFFSET $2[0m  [["LIMIT", 2], ["OFFSET", 0]]
  ↳ app/views/common/_list.json.jbuilder:15
  Rendered collection of api/v1/products/_product.json.jbuilder [2 times] (Duration: 0.8ms | Allocations: 292)
  Rendered common/_list.json.jbuilder (Duration: 7.8ms | Allocations: 1172)
  Rendered api/v1/products/index.json.jbuilder (Duration: 9.5ms | Allocations: 1375)
Completed 200 OK in 23ms (Views: 11.4ms | ActiveRecord: 1.2ms | Allocations: 2975)


Started PUT "/api/v1/products/1?product[currency]=eur&product[price_cents]=1000" for 172.20.0.1 at 2022-01-21 10:17:28 +0000
Processing by Api::V1::ProductsController#update as JSON
  Parameters: {"product"=>{"currency"=>"eur", "price_cents"=>"1000"}, "id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:98:in `set_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/product.rb:39:in `_update_price='
  [1m[36mProduct Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:39:in `_update_price='
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:39:in `_update_price='
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:84:in `update'
  [1m[36mCACHE Product Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:84:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:84:in `update'
  Rendering api/v1/products/update.json.jbuilder
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.5ms | Allocations: 169)
  Rendered api/v1/products/update.json.jbuilder (Duration: 2.1ms | Allocations: 311)
Completed 200 OK in 47ms (Views: 5.4ms | ActiveRecord: 6.0ms | Allocations: 5932)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=tshirt&product_codes[]=hoodie&currency=usd" for 172.20.0.1 at 2022-01-21 10:19:48 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "tshirt", "hoodie"], "currency"=>"usd"}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.5ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.5ms | Allocations: 171)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.4ms | Allocations: 127)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.5ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [3 times] (Duration: 9.1ms | Allocations: 852)
  Rendered common/_list.json.jbuilder (Duration: 10.9ms | Allocations: 1058)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [0 times] (Duration: 0.1ms | Allocations: 19)
  Rendered common/_list.json.jbuilder (Duration: 1.7ms | Allocations: 197)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 139.4ms | Allocations: 17213)
Completed 200 OK in 171ms (Views: 125.7ms | ActiveRecord: 18.4ms | Allocations: 20834)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=tshirt&product_codes[]=mug&currency=usd" for 172.20.0.1 at 2022-01-21 10:20:24 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "tshirt", "mug"], "currency"=>"usd"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.4ms | Allocations: 174)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.5ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 3.7ms | Allocations: 539)
  Rendered common/_list.json.jbuilder (Duration: 5.2ms | Allocations: 658)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [1 times] (Duration: 20.6ms | Allocations: 1304)
  Rendered common/_list.json.jbuilder (Duration: 21.5ms | Allocations: 1416)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 66.6ms | Allocations: 8748)
Completed 200 OK in 80ms (Views: 65.3ms | ActiveRecord: 5.4ms | Allocations: 10277)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=tshirt&product_codes[]=mug&product_codes[]=mug&currency=usd" for 172.20.0.1 at 2022-01-21 10:20:42 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "tshirt", "mug", "mug"], "currency"=>"usd"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.4ms | Allocations: 168)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.9ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 3.9ms | Allocations: 522)
  Rendered common/_list.json.jbuilder (Duration: 5.0ms | Allocations: 636)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [1 times] (Duration: 0.4ms | Allocations: 131)
  Rendered common/_list.json.jbuilder (Duration: 1.5ms | Allocations: 233)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 33.2ms | Allocations: 5672)
Completed 200 OK in 44ms (Views: 31.7ms | ActiveRecord: 4.9ms | Allocations: 7301)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=tshirt&product_codes[]=mug&product_codes[]=mug&product_codes[]=mug&currency=usd" for 172.20.0.1 at 2022-01-21 10:21:00 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "tshirt", "mug", "mug", "mug"], "currency"=>"usd"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4, $5)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "mug"], ["code", "mug"], ["code", "mug"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.5ms | Allocations: 167)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.5ms | Allocations: 127)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [2 times] (Duration: 4.0ms | Allocations: 518)
  Rendered common/_list.json.jbuilder (Duration: 5.3ms | Allocations: 624)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [1 times] (Duration: 0.4ms | Allocations: 124)
  Rendered common/_list.json.jbuilder (Duration: 2.0ms | Allocations: 226)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 30.9ms | Allocations: 5562)
Completed 200 OK in 43ms (Views: 30.9ms | ActiveRecord: 3.8ms | Allocations: 7057)


Started GET "/api/v1/basket/check?product_codes[]=mug&product_codes[]=tshirt&product_codes[]=tshirt&product_codes[]=tshirt&product_codes[]=tshirt&product_codes[]=mug&product_codes[]=hoodie" for 172.20.0.1 at 2022-01-21 10:21:31 +0000
Processing by Api::V1::BasketController#check as JSON
  Parameters: {"product_codes"=>["mug", "tshirt", "tshirt", "tshirt", "tshirt", "mug", "hoodie"]}
  [1m[36mProduct Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:48:in `valid_product_codes?'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."code" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["code", "mug"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "tshirt"], ["code", "mug"], ["code", "hoodie"]]
  ↳ app/models/non_persistent/basket.rb:30:in `block in from_product_codes'
  Rendering api/v1/basket/check.json.jbuilder
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" INNER JOIN "product_discounts" ON "discounts"."id" = "product_discounts"."discount_id" WHERE "product_discounts"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/non_persistent/basket.rb:69:in `flatten'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 1]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_discounts" ON "products"."id" = "product_discounts"."product_id" WHERE "product_discounts"."discount_id" = $1[0m  [["discount_id", 2]]
  ↳ app/models/discount.rb:50:in `applicable_products'
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.3ms | Allocations: 166)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.3ms | Allocations: 126)
  Rendered api/v1/products/_product.json.jbuilder (Duration: 0.5ms | Allocations: 126)
  Rendered collection of api/v1/basket/_basket_item.json.jbuilder [3 times] (Duration: 5.9ms | Allocations: 745)
  Rendered common/_list.json.jbuilder (Duration: 7.4ms | Allocations: 851)
  Rendered collection of api/v1/basket/_basket_discount.json.jbuilder [2 times] (Duration: 0.6ms | Allocations: 231)
  Rendered common/_list.json.jbuilder (Duration: 2.1ms | Allocations: 333)
  Rendered api/v1/basket/check.json.jbuilder (Duration: 48.4ms | Allocations: 9054)
Completed 200 OK in 60ms (Views: 47.8ms | ActiveRecord: 4.2ms | Allocations: 10625)


  [1m[35m (1.3ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (356.7ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'USD' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductDiscounts (20220119163021)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "product_discounts" ("id" bigserial primary key, "product_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_bd840c8d3f"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
, CONSTRAINT "fk_rails_9547908de7"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_product_id" ON "product_discounts" ("product_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_discount_id" ON "product_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119163021"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-21 12:51:45.600945"], ["updated_at", "2022-01-21 12:51:45.600945"]]
  [1m[36mTRANSACTION (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "Reedsy Mug"], ["code", "mug"], ["price_cents", 600], ["price_currency", "USD"], ["created_at", "2022-01-21 12:51:50.066581"], ["updated_at", "2022-01-21 12:51:50.066581"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "tshirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "Reedsy T-shirt"], ["code", "tshirt"], ["price_cents", 1500], ["price_currency", "USD"], ["created_at", "2022-01-21 12:51:50.085222"], ["updated_at", "2022-01-21 12:51:50.085222"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "Reedsy Hoodie"], ["code", "hoodie"], ["price_cents", 2000], ["price_currency", "USD"], ["created_at", "2022-01-21 12:51:50.103165"], ["updated_at", "2022-01-21 12:51:50.103165"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Create (1.3ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-21 12:51:50.354495"], ["updated_at", "2022-01-21 12:51:50.354495"]]
  [1m[36mProductDiscount Create (2.1ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 1], ["discount_id", 1], ["created_at", "2022-01-21 12:51:50.358985"], ["updated_at", "2022-01-21 12:51:50.358985"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy T-shirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "tshirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Create (0.9ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-21 12:51:50.384457"], ["updated_at", "2022-01-21 12:51:50.384457"]]
  [1m[36mProductDiscount Create (1.1ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 2], ["discount_id", 2], ["created_at", "2022-01-21 12:51:50.388698"], ["updated_at", "2022-01-21 12:51:50.388698"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (427.5ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (13.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.6ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'USD' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductDiscounts (20220119163021)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.3ms)[0m  [1m[35mCREATE TABLE "product_discounts" ("id" bigserial primary key, "product_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_bd840c8d3f"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
, CONSTRAINT "fk_rails_9547908de7"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_product_id" ON "product_discounts" ("product_id")[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_discount_id" ON "product_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119163021"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-21 12:58:13.925149"], ["updated_at", "2022-01-21 12:58:13.925149"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (3.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (4.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "Reedsy Mug"], ["code", "mug"], ["price_cents", 600], ["price_currency", "USD"], ["created_at", "2022-01-21 12:58:19.592357"], ["updated_at", "2022-01-21 12:58:19.592357"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "tshirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "Reedsy T-shirt"], ["code", "tshirt"], ["price_cents", 1500], ["price_currency", "USD"], ["created_at", "2022-01-21 12:58:19.619273"], ["updated_at", "2022-01-21 12:58:19.619273"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "Reedsy Hoodie"], ["code", "hoodie"], ["price_cents", 2000], ["price_currency", "USD"], ["created_at", "2022-01-21 12:58:19.643908"], ["updated_at", "2022-01-21 12:58:19.643908"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Create (1.6ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-21 12:58:19.837948"], ["updated_at", "2022-01-21 12:58:19.837948"]]
  [1m[36mProductDiscount Create (3.2ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 1], ["discount_id", 1], ["created_at", "2022-01-21 12:58:19.844480"], ["updated_at", "2022-01-21 12:58:19.844480"]]
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy T-shirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "tshirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Create (0.8ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-21 12:58:19.889136"], ["updated_at", "2022-01-21 12:58:19.889136"]]
  [1m[36mProductDiscount Create (2.4ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 2], ["discount_id", 2], ["created_at", "2022-01-21 12:58:19.896942"], ["updated_at", "2022-01-21 12:58:19.896942"]]
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (15.1ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (689.4ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (17.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (12.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.9ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'USD' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductDiscounts (20220119163021)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.7ms)[0m  [1m[35mCREATE TABLE "product_discounts" ("id" bigserial primary key, "product_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_bd840c8d3f"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
, CONSTRAINT "fk_rails_9547908de7"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_product_id" ON "product_discounts" ("product_id")[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_discount_id" ON "product_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119163021"]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-21 13:43:59.661494"], ["updated_at", "2022-01-21 13:43:59.661494"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (4.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (10.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (2.4ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "Reedsy Mug"], ["code", "mug"], ["price_cents", 600], ["price_currency", "USD"], ["created_at", "2022-01-21 13:44:09.466844"], ["updated_at", "2022-01-21 13:44:09.466844"]]
  [1m[36mTRANSACTION (4.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "tshirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.8ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "Reedsy T-shirt"], ["code", "tshirt"], ["price_cents", 1500], ["price_currency", "USD"], ["created_at", "2022-01-21 13:44:09.517630"], ["updated_at", "2022-01-21 13:44:09.517630"]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (6.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (7.7ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "Reedsy Hoodie"], ["code", "hoodie"], ["price_cents", 2000], ["price_currency", "USD"], ["created_at", "2022-01-21 13:44:09.572775"], ["updated_at", "2022-01-21 13:44:09.572775"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Create (2.1ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-21 13:44:10.185478"], ["updated_at", "2022-01-21 13:44:10.185478"]]
  [1m[36mProductDiscount Create (6.1ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 1], ["discount_id", 1], ["created_at", "2022-01-21 13:44:10.198974"], ["updated_at", "2022-01-21 13:44:10.198974"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (3.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy T-shirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "tshirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Create (3.0ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-21 13:44:10.289107"], ["updated_at", "2022-01-21 13:44:10.289107"]]
  [1m[36mProductDiscount Create (2.7ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 2], ["discount_id", 2], ["created_at", "2022-01-21 13:44:10.305723"], ["updated_at", "2022-01-21 13:44:10.305723"]]
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (name like '%mug%')[0m
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (name like '%Mug%')[0m
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (name like '%Mug%')[0m
  [1m[36mProduct Load (1.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (lower(name) like '%mug%')[0m
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (lower(name) like '%mug%')[0m
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (lower(code) like '%mug%')[0m
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (lower(code) like '%mug%')[0m
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (price > 100 )[0m
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (price_cents > 1000 )[0m
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (price_cents > 2100 )[0m
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (price_cents < 2100 )[0m
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/products" for 192.168.0.1 at 2022-01-22 14:29:19 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 152.9ms | Allocations: 2959)
  Rendered common/_list.json.jbuilder (Duration: 174.5ms | Allocations: 7421)
  Rendered api/v1/products/index.json.jbuilder (Duration: 195.7ms | Allocations: 8261)
Completed 200 OK in 346ms (Views: 297.7ms | ActiveRecord: 9.4ms | Allocations: 15575)


Started GET "/api/v1/products?name=mug" for 192.168.0.1 at 2022-01-22 14:29:35 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"name"=>"mug"}
  [1m[36mProduct Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.2ms | Allocations: 474)
  Rendered common/_list.json.jbuilder (Duration: 9.8ms | Allocations: 1266)
  Rendered api/v1/products/index.json.jbuilder (Duration: 13.2ms | Allocations: 1525)
Completed 200 OK in 27ms (Views: 15.5ms | ActiveRecord: 2.2ms | Allocations: 2451)


Started GET "/api/v1/products?name=mug" for 192.168.0.1 at 2022-01-22 14:29:37 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"name"=>"mug"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.5ms | Allocations: 422)
  Rendered common/_list.json.jbuilder (Duration: 13.0ms | Allocations: 1188)
  Rendered api/v1/products/index.json.jbuilder (Duration: 15.1ms | Allocations: 1417)
Completed 200 OK in 27ms (Views: 18.8ms | ActiveRecord: 1.9ms | Allocations: 2217)


Started GET "/api/v1/products?name=mug" for 192.168.0.1 at 2022-01-22 14:30:06 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"name"=>"mug"}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 6.5ms | Allocations: 549)
  Rendered common/_list.json.jbuilder (Duration: 28.8ms | Allocations: 2843)
  Rendered api/v1/products/index.json.jbuilder (Duration: 32.4ms | Allocations: 3112)
Completed 200 OK in 69ms (Views: 33.2ms | ActiveRecord: 8.9ms | Allocations: 6821)


Started GET "/api/v1/products?name=mug" for 192.168.0.1 at 2022-01-22 14:30:21 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"name"=>"mug"}
  [1m[36mProduct Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 9.3ms | Allocations: 475)
  Rendered common/_list.json.jbuilder (Duration: 21.4ms | Allocations: 1267)
  Rendered api/v1/products/index.json.jbuilder (Duration: 25.4ms | Allocations: 1525)
Completed 200 OK in 42346ms (Views: 31.2ms | ActiveRecord: 2.6ms | Allocations: 9580)


Started GET "/api/v1/products?name=mug" for 192.168.0.1 at 2022-01-22 14:31:13 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"name"=>"mug"}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 7.6ms | Allocations: 549)
  Rendered common/_list.json.jbuilder (Duration: 34.1ms | Allocations: 2805)
  Rendered api/v1/products/index.json.jbuilder (Duration: 37.7ms | Allocations: 3073)
Completed 200 OK in 90ms (Views: 38.7ms | ActiveRecord: 9.6ms | Allocations: 6749)


Started GET "/api/v1/products?name=mug" for 192.168.0.1 at 2022-01-22 14:31:41 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"name"=>"mug"}
  [1m[36mProduct Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE (lower(name) like '%mug%')[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (lower(name) like '%mug%')[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 1.1ms | Allocations: 281)
  Rendered common/_list.json.jbuilder (Duration: 43.4ms | Allocations: 2542)
  Rendered api/v1/products/index.json.jbuilder (Duration: 51.8ms | Allocations: 2741)
Completed 200 OK in 132ms (Views: 52.7ms | ActiveRecord: 12.1ms | Allocations: 6566)


Started GET "/api/v1/products?name=mug" for 192.168.0.1 at 2022-01-22 14:32:02 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"name"=>"mug"}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE (lower(name) like '%mug%')[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (lower(name) like '%mug%')[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 0.6ms | Allocations: 157)
  Rendered common/_list.json.jbuilder (Duration: 8.9ms | Allocations: 933)
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.4ms | Allocations: 1091)
Completed 200 OK in 28ms (Views: 17.7ms | ActiveRecord: 2.2ms | Allocations: 2048)


Started GET "/api/v1/products?name=hoodie" for 192.168.0.1 at 2022-01-22 14:32:16 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"name"=>"hoodie"}
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE (lower(name) like '%hoodie%')[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (lower(name) like '%hoodie%')[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 2.1ms | Allocations: 157)
  Rendered common/_list.json.jbuilder (Duration: 12.8ms | Allocations: 933)
  Rendered api/v1/products/index.json.jbuilder (Duration: 15.7ms | Allocations: 1091)
Completed 200 OK in 27ms (Views: 18.6ms | ActiveRecord: 2.3ms | Allocations: 2006)


Started GET "/api/v1/products?code=hoodie" for 192.168.0.1 at 2022-01-22 14:32:23 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"code"=>"hoodie"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE (lower(code) like '%hoodie%')[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (lower(code) like '%hoodie%')[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 0.9ms | Allocations: 157)
  Rendered common/_list.json.jbuilder (Duration: 9.1ms | Allocations: 933)
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.2ms | Allocations: 1091)
Completed 200 OK in 21ms (Views: 13.9ms | ActiveRecord: 1.6ms | Allocations: 2008)


Started GET "/api/v1/products?price_lower_than=2000" for 192.168.0.1 at 2022-01-22 14:32:45 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"price_lower_than"=>"2000"}
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms | Allocations: 2070)


  
NoMethodError (undefined method `Money' for #<Api::V1::ProductsController:0x00000000016440>):
  
app/controllers/api/v1/products_controller.rb:131:in `filter_params'
app/controllers/concerns/filtrable.rb:11:in `filtered_resources'
app/controllers/api/v1/products_controller.rb:47:in `index'
app/controllers/concerns/monetizable.rb:15:in `with_currency'
Started GET "/api/v1/products?price_lower_than=2000" for 192.168.0.1 at 2022-01-22 14:32:56 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"price_lower_than"=>"2000"}
Completed 500 Internal Server Error in 26ms (ActiveRecord: 0.0ms | Allocations: 4055)


  
NoMethodError (undefined method `Money' for #<Api::V1::ProductsController:0x00000000019fa0>):
  
app/controllers/api/v1/products_controller.rb:131:in `filter_params'
app/controllers/concerns/filtrable.rb:11:in `filtered_resources'
app/controllers/api/v1/products_controller.rb:47:in `index'
app/controllers/concerns/monetizable.rb:15:in `with_currency'
Started GET "/api/v1/products?price_lower_than=2000" for 192.168.0.1 at 2022-01-22 14:33:01 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"price_lower_than"=>"2000"}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Completed 500 Internal Server Error in 50ms (ActiveRecord: 0.0ms | Allocations: 9339)


  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  
NameError (undefined local variable or method `price' for #<ActiveRecord::Relation [#<Product id: 1, name: "Reedsy Mug", code: "mug", price_cents: 600, price_currency: "USD", created_at: "2022-01-21 13:44:09.466844000 +0000", updated_at: "2022-01-21 13:44:09.466844000 +0000">, #<Product id: 2, name: "Reedsy T-shirt", code: "tshirt", price_cents: 1500, price_currency: "USD", created_at: "2022-01-21 13:44:09.517630000 +0000", updated_at: "2022-01-21 13:44:09.517630000 +0000">, #<Product id: 3, name: "Reedsy Hoodie", code: "hoodie", price_cents: 2000, price_currency: "USD", created_at: "2022-01-21 13:44:09.572775000 +0000", updated_at: "2022-01-21 13:44:09.572775000 +0000">]>):
  
app/models/product.rb:25:in `block in <class:Product>'
app/controllers/concerns/filtrable.rb:14:in `block in filtered_resources'
app/controllers/concerns/filtrable.rb:12:in `each'
app/controllers/concerns/filtrable.rb:12:in `filtered_resources'
app/controllers/api/v1/products_controller.rb:47:in `index'
app/controllers/concerns/monetizable.rb:15:in `with_currency'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/api/v1/products?sort_column=name" for 192.168.0.1 at 2022-01-22 14:36:06 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"sort_column"=>"name"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.0ms | Allocations: 549)
  Rendered common/_list.json.jbuilder (Duration: 17.9ms | Allocations: 2788)
  Rendered api/v1/products/index.json.jbuilder (Duration: 19.9ms | Allocations: 3056)
Completed 200 OK in 68ms (Views: 19.4ms | ActiveRecord: 8.7ms | Allocations: 6880)


Started GET "/api/v1/products?sort_column=name&sort_order=asc" for 192.168.0.1 at 2022-01-22 14:36:19 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"sort_column"=>"name", "sort_order"=>"asc"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY name asc[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.2ms | Allocations: 425)
  Rendered common/_list.json.jbuilder (Duration: 9.6ms | Allocations: 1227)
  Rendered api/v1/products/index.json.jbuilder (Duration: 12.9ms | Allocations: 1455)
Completed 200 OK in 22ms (Views: 14.9ms | ActiveRecord: 1.8ms | Allocations: 2419)


Started GET "/api/v1/products?sort_column=name&sort_order=desc" for 192.168.0.1 at 2022-01-22 14:36:22 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"sort_column"=>"name", "sort_order"=>"desc"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY name desc[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.3ms | Allocations: 425)
  Rendered common/_list.json.jbuilder (Duration: 12.0ms | Allocations: 1225)
  Rendered api/v1/products/index.json.jbuilder (Duration: 14.4ms | Allocations: 1453)
Completed 200 OK in 25ms (Views: 16.9ms | ActiveRecord: 2.1ms | Allocations: 2353)


Started GET "/api/v1/products?sort_column=name&sort_order=descss" for 192.168.0.1 at 2022-01-22 14:36:27 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"sort_column"=>"name", "sort_order"=>"descss"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 247)


  
ActiveRecord::UnknownAttributeReference (Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "name descss".This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql().):
  
app/models/product.rb:27:in `block in <class:Product>'
app/controllers/concerns/sortable.rb:14:in `sorted_resources'
app/controllers/api/v1/products_controller.rb:48:in `index'
app/controllers/concerns/monetizable.rb:15:in `with_currency'
  [1m[35m (1.5ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (367.5ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (9.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'USD' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductDiscounts (20220119163021)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "product_discounts" ("id" bigserial primary key, "product_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_bd840c8d3f"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
, CONSTRAINT "fk_rails_9547908de7"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_product_id" ON "product_discounts" ("product_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_discount_id" ON "product_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119163021"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-22 16:14:57.918622"], ["updated_at", "2022-01-22 16:14:57.918622"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (4.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (2.1ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "Reedsy Mug"], ["code", "mug"], ["price_cents", 600], ["price_currency", "USD"], ["created_at", "2022-01-22 16:15:03.163247"], ["updated_at", "2022-01-22 16:15:03.163247"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "tshirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.3ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "Reedsy T-shirt"], ["code", "tshirt"], ["price_cents", 1500], ["price_currency", "USD"], ["created_at", "2022-01-22 16:15:03.231814"], ["updated_at", "2022-01-22 16:15:03.231814"]]
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.6ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "Reedsy Hoodie"], ["code", "hoodie"], ["price_cents", 2000], ["price_currency", "USD"], ["created_at", "2022-01-22 16:15:03.266768"], ["updated_at", "2022-01-22 16:15:03.266768"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Create (2.2ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-22 16:15:03.696831"], ["updated_at", "2022-01-22 16:15:03.696831"]]
  [1m[36mProductDiscount Create (3.5ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 1], ["discount_id", 1], ["created_at", "2022-01-22 16:15:03.706361"], ["updated_at", "2022-01-22 16:15:03.706361"]]
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy T-shirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "tshirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Create (1.7ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-22 16:15:03.765409"], ["updated_at", "2022-01-22 16:15:03.765409"]]
  [1m[36mProductDiscount Create (2.0ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 2], ["discount_id", 2], ["created_at", "2022-01-22 16:15:03.775500"], ["updated_at", "2022-01-22 16:15:03.775500"]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/products?name=mug" for 192.168.48.1 at 2022-01-22 16:15:26 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"name"=>"mug"}
  [1m[36mProduct Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE (lower(name) like '%mug%')[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (lower(name) like '%mug%') ORDER BY created_at desc[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 88.5ms | Allocations: 2694)
  Rendered common/_list.json.jbuilder (Duration: 113.1ms | Allocations: 7168)
  Rendered api/v1/products/index.json.jbuilder (Duration: 131.2ms | Allocations: 7938)
Completed 200 OK in 274ms (Views: 225.2ms | ActiveRecord: 10.8ms | Allocations: 15278)


Started GET "/api/v1/products?code=mug" for 192.168.48.1 at 2022-01-22 16:16:01 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"code"=>"mug"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE (lower(code) like '%mug%')[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (lower(code) like '%mug%') ORDER BY created_at desc[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [1 times] (Duration: 1.0ms | Allocations: 209)
  Rendered common/_list.json.jbuilder (Duration: 9.8ms | Allocations: 1022)
  Rendered api/v1/products/index.json.jbuilder (Duration: 12.4ms | Allocations: 1211)
Completed 200 OK in 23ms (Views: 15.4ms | ActiveRecord: 1.5ms | Allocations: 2355)


Started GET "/api/v1/products?sort_by=mug" for 192.168.48.1 at 2022-01-22 16:16:22 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"sort_by"=>"mug"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY created_at desc[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.7ms | Allocations: 425)
  Rendered common/_list.json.jbuilder (Duration: 9.8ms | Allocations: 1225)
  Rendered api/v1/products/index.json.jbuilder (Duration: 11.9ms | Allocations: 1454)
Completed 200 OK in 22ms (Views: 15.3ms | ActiveRecord: 1.4ms | Allocations: 2372)


Started GET "/api/v1/products?sort_column=code" for 192.168.48.1 at 2022-01-22 16:16:48 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"sort_column"=>"code"}
  [1m[36mProduct Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY code desc[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 3.7ms | Allocations: 425)
  Rendered common/_list.json.jbuilder (Duration: 12.6ms | Allocations: 1225)
  Rendered api/v1/products/index.json.jbuilder (Duration: 15.0ms | Allocations: 1454)
Completed 200 OK in 25ms (Views: 17.9ms | ActiveRecord: 1.8ms | Allocations: 2368)


Started GET "/api/v1/products?sort_column=codeeee" for 192.168.48.1 at 2022-01-22 16:16:50 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"sort_column"=>"codeeee"}
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY codeeee desc[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered common/_list.json.jbuilder (Duration: 36.1ms | Allocations: 3907)
  Rendered api/v1/products/index.json.jbuilder (Duration: 37.9ms | Allocations: 4029)
Completed 500 Internal Server Error in 48ms (ActiveRecord: 1.8ms | Allocations: 4949)


  
ActionView::Template::Error (PG::UndefinedColumn: ERROR:  column "codeeee" does not exist
LINE 1: SELECT "products".* FROM "products" ORDER BY codeeee desc
                                                     ^
HINT:  Perhaps you meant to reference the column "products.code".
):
    14: json.page page if page
    15: json.page_size page_size if page_size
    16: json.set!(name || :data) do
    17:   json.array! resources, partial: resource_template, as: resource_name
    18: end
  
app/views/common/_list.json.jbuilder:17
app/views/common/_list.json.jbuilder:16
app/views/api/v1/products/index.json.jbuilder:3
app/controllers/api/v1/products_controller.rb:50:in `index'
app/controllers/concerns/monetizable.rb:15:in `with_currency'
Started GET "/api/v1/products?sort_column=code&sort_order=asc" for 192.168.48.1 at 2022-01-22 16:17:06 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"sort_column"=>"code", "sort_order"=>"asc"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY code asc[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 1.5ms | Allocations: 477)
  Rendered common/_list.json.jbuilder (Duration: 12.0ms | Allocations: 1304)
  Rendered api/v1/products/index.json.jbuilder (Duration: 14.4ms | Allocations: 1545)
Completed 200 OK in 25ms (Views: 17.1ms | ActiveRecord: 1.9ms | Allocations: 2584)


Started GET "/api/v1/products?sort_column=code&sort_order=dec" for 192.168.48.1 at 2022-01-22 16:17:11 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"sort_column"=>"code", "sort_order"=>"dec"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 231)


  
ActiveRecord::UnknownAttributeReference (Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "code dec".This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql().):
  
app/models/product.rb:25:in `block in <class:Product>'
app/controllers/concerns/sortable.rb:14:in `sorted_resources'
app/controllers/api/v1/products_controller.rb:48:in `index'
app/controllers/concerns/monetizable.rb:15:in `with_currency'
Started GET "/api/v1/products?sort_column=id&sort_order=desc" for 192.168.48.1 at 2022-01-22 16:17:19 +0000
Processing by Api::V1::ProductsController#index as JSON
  Parameters: {"sort_column"=>"id", "sort_order"=>"desc"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY id desc[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 5.2ms | Allocations: 425)
  Rendered common/_list.json.jbuilder (Duration: 12.9ms | Allocations: 1225)
  Rendered api/v1/products/index.json.jbuilder (Duration: 14.9ms | Allocations: 1453)
Completed 200 OK in 26ms (Views: 17.1ms | ActiveRecord: 2.1ms | Allocations: 2350)


  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (378.6ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'USD' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductDiscounts (20220119163021)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE TABLE "product_discounts" ("id" bigserial primary key, "product_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_bd840c8d3f"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
, CONSTRAINT "fk_rails_9547908de7"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_product_id" ON "product_discounts" ("product_id")[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_discount_id" ON "product_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119163021"]]
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-22 21:02:28.599128"], ["updated_at", "2022-01-22 21:02:28.599128"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.5ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "Reedsy Mug"], ["code", "mug"], ["price_cents", 600], ["price_currency", "USD"], ["created_at", "2022-01-22 21:02:34.018969"], ["updated_at", "2022-01-22 21:02:34.018969"]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "tshirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "Reedsy T-shirt"], ["code", "tshirt"], ["price_cents", 1500], ["price_currency", "USD"], ["created_at", "2022-01-22 21:02:34.054191"], ["updated_at", "2022-01-22 21:02:34.054191"]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.3ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "Reedsy Hoodie"], ["code", "hoodie"], ["price_cents", 2000], ["price_currency", "USD"], ["created_at", "2022-01-22 21:02:34.079298"], ["updated_at", "2022-01-22 21:02:34.079298"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Create (1.6ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-22 21:02:34.419011"], ["updated_at", "2022-01-22 21:02:34.419011"]]
  [1m[36mProductDiscount Create (4.0ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 1], ["discount_id", 1], ["created_at", "2022-01-22 21:02:34.425244"], ["updated_at", "2022-01-22 21:02:34.425244"]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy T-shirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "tshirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Create (1.2ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-22 21:02:34.469304"], ["updated_at", "2022-01-22 21:02:34.469304"]]
  [1m[36mProductDiscount Create (2.2ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 2], ["discount_id", 2], ["created_at", "2022-01-22 21:02:34.475776"], ["updated_at", "2022-01-22 21:02:34.475776"]]
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/products" for 192.168.96.1 at 2022-01-22 21:15:52 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY created_at desc[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 96.0ms | Allocations: 2963)
  Rendered common/_list.json.jbuilder (Duration: 131.4ms | Allocations: 7449)
  Rendered api/v1/products/index.json.jbuilder (Duration: 152.3ms | Allocations: 8289)
Completed 200 OK in 321ms (Views: 274.9ms | ActiveRecord: 13.8ms | Allocations: 15514)


Started GET "/apipie" for 192.168.96.1 at 2022-01-22 21:15:57 +0000
Processing by Apipie::ApipiesController#index as HTML
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.9ms | Allocations: 146)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (Duration: 7.8ms | Allocations: 1260)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 11.9ms | Allocations: 1739)
Completed 200 OK in 325ms (Views: 18.6ms | ActiveRecord: 0.0ms | Allocations: 43629)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 192.168.96.1 at 2022-01-22 21:15:57 +0000
Started GET "/apipie/stylesheets/bundled/prettify.css" for 192.168.96.1 at 2022-01-22 21:15:57 +0000
Started GET "/apipie/stylesheets/application.css" for 192.168.96.1 at 2022-01-22 21:15:57 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 192.168.96.1 at 2022-01-22 21:15:57 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 192.168.96.1 at 2022-01-22 21:15:57 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 192.168.96.1 at 2022-01-22 21:15:57 +0000
Started GET "/apipie/javascripts/apipie.js" for 192.168.96.1 at 2022-01-22 21:15:57 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 192.168.96.1 at 2022-01-22 21:15:57 +0000
Started GET "/apipie/1.0/products/index.html" for 192.168.96.1 at 2022-01-22 21:16:07 +0000
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"products", "method"=>"index.html"}
  Rendering layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb
  Rendering /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_languages.erb (Duration: 0.1ms | Allocations: 16)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 3.0ms | Allocations: 1913)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 2.3ms | Allocations: 1282)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_params.html.erb (Duration: 6.3ms | Allocations: 2153)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_headers.html.erb (Duration: 1.0ms | Allocations: 276)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/_method_detail.erb (Duration: 24.1ms | Allocations: 5711)
  Rendered /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (Duration: 32.0ms | Allocations: 6508)
  Rendered layout /usr/local/bundle/gems/apipie-rails-0.5.19/app/views/layouts/apipie/apipie.html.erb (Duration: 36.5ms | Allocations: 6733)
Completed 200 OK in 282ms (Views: 42.5ms | ActiveRecord: 0.0ms | Allocations: 40516)


Started GET "/apipie/stylesheets/bundled/prettify.css" for 192.168.96.1 at 2022-01-22 21:16:08 +0000
Started GET "/apipie/javascripts/bundled/jquery.js" for 192.168.96.1 at 2022-01-22 21:16:08 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for 192.168.96.1 at 2022-01-22 21:16:08 +0000
Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for 192.168.96.1 at 2022-01-22 21:16:08 +0000
Started GET "/apipie/stylesheets/application.css" for 192.168.96.1 at 2022-01-22 21:16:08 +0000
Started GET "/apipie/javascripts/bundled/prettify.js" for 192.168.96.1 at 2022-01-22 21:16:08 +0000
Started GET "/apipie/javascripts/apipie.js" for 192.168.96.1 at 2022-01-22 21:16:08 +0000
Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for 192.168.96.1 at 2022-01-22 21:16:08 +0000
Started GET "/api/v1/products" for 192.168.96.1 at 2022-01-22 22:29:53 +0000
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mProduct Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginated.rb:71:in `load_resources_total'
  Rendering api/v1/products/index.json.jbuilder
  [1m[36mProduct Load (4.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY created_at desc[0m
  ↳ app/views/common/_list.json.jbuilder:17
  Rendered collection of api/v1/products/_product.json.jbuilder [3 times] (Duration: 2.1ms | Allocations: 549)
  Rendered common/_list.json.jbuilder (Duration: 24.8ms | Allocations: 2921)
  Rendered api/v1/products/index.json.jbuilder (Duration: 27.8ms | Allocations: 3189)
Completed 200 OK in 119ms (Views: 23.3ms | ActiveRecord: 38.3ms | Allocations: 11268)


Started GET "/apipie.json?type=swagger" for 192.168.96.1 at 2022-01-22 22:30:00 +0000
Processing by Apipie::ApipiesController#index as JSON
  Parameters: {"type"=>"swagger"}
Completed 200 OK in 272ms (Views: 1.5ms | ActiveRecord: 0.0ms | Allocations: 32357)


  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE "reedsy-challenge-development" ENCODING = 'unicode'[0m
  [1m[35m (323.7ms)[0m  [1m[35mCREATE DATABASE "reedsy_challenge_test" ENCODING = 'unicode'[0m
  [1m[35m (31.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateProducts (20220113153159)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "code" character varying NOT NULL, "price_cents" integer DEFAULT 0 NOT NULL, "price_currency" character varying DEFAULT 'USD' NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220113153159"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDiscounts (20220119064535)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" bigserial primary key, "min_amount" integer, "max_amount" integer, "description" character varying, "reduction" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119064535"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductDiscounts (20220119163021)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "product_discounts" ("id" bigserial primary key, "product_id" bigint NOT NULL, "discount_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_bd840c8d3f"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
, CONSTRAINT "fk_rails_9547908de7"
FOREIGN KEY ("discount_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_product_id" ON "product_discounts" ("product_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_product_discounts_on_discount_id" ON "product_discounts" ("discount_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220119163021"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-01-23 09:36:56.377771"], ["updated_at", "2022-01-23 09:36:56.377771"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(4843880265667427985)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Mug"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "mug"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "Reedsy Mug"], ["code", "mug"], ["price_cents", 600], ["price_currency", "USD"], ["created_at", "2022-01-23 09:37:00.181163"], ["updated_at", "2022-01-23 09:37:00.181163"]]
  [1m[36mTRANSACTION (9.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy T-shirt"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "tshirt"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "Reedsy T-shirt"], ["code", "tshirt"], ["price_cents", 1500], ["price_currency", "USD"], ["created_at", "2022-01-23 09:37:00.225109"], ["updated_at", "2022-01-23 09:37:00.225109"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Reedsy Hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 LIMIT $2[0m  [["code", "hoodie"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "products" ("id", "name", "code", "price_cents", "price_currency", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "Reedsy Hoodie"], ["code", "hoodie"], ["price_cents", 2000], ["price_currency", "USD"], ["created_at", "2022-01-23 09:37:00.244458"], ["updated_at", "2022-01-23 09:37:00.244458"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy Mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "mug"], ["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Create (1.1ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["min_amount", 2], ["max_amount", 2], ["description", "2x1 in mugs!"], ["reduction", 0.5], ["created_at", "2022-01-23 09:37:00.471831"], ["updated_at", "2022-01-23 09:37:00.471831"]]
  [1m[36mProductDiscount Create (1.6ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 1], ["discount_id", 1], ["created_at", "2022-01-23 09:37:00.475820"], ["updated_at", "2022-01-23 09:37:00.475820"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["name", "Reedsy T-shirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."code" = $1 AND "products"."id" != $2 LIMIT $3[0m  [["code", "tshirt"], ["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Create (0.8ms)[0m  [1m[32mINSERT INTO "discounts" ("id", "min_amount", "max_amount", "description", "reduction", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["min_amount", 3], ["max_amount", nil], ["description", "30% discount in t-shirts when buying 3 or more!"], ["reduction", 0.3], ["created_at", "2022-01-23 09:37:00.498904"], ["updated_at", "2022-01-23 09:37:00.498904"]]
  [1m[36mProductDiscount Create (1.7ms)[0m  [1m[32mINSERT INTO "product_discounts" ("product_id", "discount_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["product_id", 2], ["discount_id", 2], ["created_at", "2022-01-23 09:37:00.503267"], ["updated_at", "2022-01-23 09:37:00.503267"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
